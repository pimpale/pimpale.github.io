import{m as M}from"./mod.0ccf2658.js";function L(i,e){const t=M.makeNoise4D(e);return(s,a)=>t(Math.cos(s*Math.PI*2)/i,Math.sin(s*Math.PI*2)/i,Math.cos(a*Math.PI*2)/i,Math.sin(a*Math.PI*2)/i)}function w(i,e,t,s){function a(n,o,h){const r=n(o+1e-4,h),v=n(o-1e-4,h),E=(r-v)/(2*1e-4),l=n(o,h+1e-4),m=n(o,h-1e-4);return[(l-m)/(2*1e-4),-E]}const c=new Float32Array(e*t*2),u=L(3,s);for(let n=0;n<t;n++)for(let o=0;o<e;o++){const[h,d]=a(u,o/e,n/t),r=e*n+o;c[r*2+0]=h/4095,c[r*2+1]=d/4095}return c}class I{constructor(e){this.mousePos=null,this.handleMouseDown=t=>{const s=this.getMousePos(this.canvas,t);this.mousePos={current:s,previous:s}},this.handleMouseUp=t=>{this.mousePos=null},this.handleMouseMove=t=>{!this.mousePos||(this.mousePos={current:this.getMousePos(this.canvas,t),previous:this.mousePos.current})},this.discardTouchEvent=t=>t.preventDefault(),this.cleanup=()=>{this.canvas.removeEventListener("pointerdown",this.handleMouseDown),this.canvas.removeEventListener("pointermove",this.handleMouseMove),window.removeEventListener("pointerup",this.handleMouseUp),this.canvas.removeEventListener("touchstart",this.discardTouchEvent),this.canvas.removeEventListener("touchmove",this.discardTouchEvent),this.canvas.removeEventListener("touchend",this.discardTouchEvent),this.canvas.removeEventListener("touchcancel",this.discardTouchEvent)},this.canvas=e,this.canvas.addEventListener("pointerdown",this.handleMouseDown),this.canvas.addEventListener("pointermove",this.handleMouseMove),window.addEventListener("pointerup",this.handleMouseUp),this.canvas.addEventListener("touchstart",this.discardTouchEvent),this.canvas.addEventListener("touchmove",this.discardTouchEvent),this.canvas.addEventListener("touchend",this.discardTouchEvent),this.canvas.addEventListener("touchcancel",this.discardTouchEvent)}getMousePos(e,t){const s=e.getBoundingClientRect(),a=e.width/s.width,c=e.height/s.height;return{x:(t.clientX-s.left)*a,y:(t.clientY-s.top)*c}}}export{I as C,w as c};
