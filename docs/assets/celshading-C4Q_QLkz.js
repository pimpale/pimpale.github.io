import"./modulepreload-polyfill-B5Qt9EMX.js";import{R as fe,j as C,c as Zn}from"./client-DdPLZftV.js";import{A as zn}from"./ArticleLayout-B3vM04fD.js";import{S as Ge}from"./Section-C07f904z.js";import{a as qn,b as mt}from"./webgl-BxJ6eXGr.js";import{T as er}from"./camera-CY7KAysO.js";import{c as Re,a as tr}from"./index-wlCcieKm.js";import{g as nr}from"./icosphere-CpoS4dSW.js";import{V as rr}from"./visibility-B6XuZukV.js";import{a as m,s as se,b as G,n as nn,d as sr,e as we,m as or,g as ir,h as yt,i as cr,f as ar,c as ur}from"./quat-BTiemoqx.js";import"./bootstrap-Ba_QWTmA.js";import"./Layout-3y06LAST.js";async function rn(t,e,n,r){return r._parse(t,e,n,r)}function w(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const ye=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),Et=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Et&&parseFloat(Et[1]);const bt=globalThis,pt=globalThis.process||{};function fr(t){if(typeof window<"u"&&window.process?.type==="renderer"||typeof process<"u"&&process.versions?.electron)return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function rt(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process?.browser)||fr()}const sn="4.1.0";function Ar(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class lr{constructor(e,n,r="sessionStorage"){this.storage=Ar(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function Br(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function hr(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var le;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(le||(le={}));const dr=10;function Ft(t){return typeof t!="string"?t:(t=t.toUpperCase(),le[t]||le.WHITE)}function Cr(t,e,n){return!rt&&typeof t=="string"&&(e&&(t=`\x1B[${Ft(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${Ft(n)+dr}m${t}\x1B[49m`)),t}function gr(t,e=["constructor"]){const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),s=t;for(const o of r){const i=s[o];typeof i=="function"&&(e.find(c=>o===c)||(s[o]=i.bind(t)))}}function st(t,e){if(!t)throw new Error("Assertion failed")}function P(){let t;if(rt()&&bt.performance)t=bt?.performance?.now?.();else if("hrtime"in pt){const e=pt?.hrtime?.();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}const v={debug:rt()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},mr={enabled:!0,level:0};function j(){}const It={},Tt={once:!0};class ot{constructor({id:e}={id:""}){this.VERSION=sn,this._startTs=P(),this._deltaTs=P(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new lr(`__probe-${this.id}__`,mr),this.timeStamp(`${this.id} started`),gr(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((P()-this._startTs).toPrecision(10))}getDelta(){return Number((P()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,v.warn,arguments,Tt)}error(e){return this._getLogFunction(0,e,v.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,v.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,v.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,v.debug||v.info,arguments,Tt)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||j,r&&[r],{tag:Er(n)}):j}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||j)}group(e,n,r={collapsed:!1}){const s=Mt({logLevel:e,message:n,opts:r}),{collapsed:o}=r;return s.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(e,n,r={}){return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||j)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=on(e)}_getLogFunction(e,n,r,s,o){if(this._shouldLog(e)){o=Mt({logLevel:e,message:n,args:s,opts:o}),r=r||o.method,st(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=P();const i=o.tag||o.message;if(o.once&&i)if(!It[i])It[i]=P();else return j;return n=yr(this.id,o.message,o),r.bind(console,n,...o.args)}return j}}ot.VERSION=sn;function on(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return st(Number.isFinite(e)&&e>=0),e}function Mt(t){const{logLevel:e,message:n}=t;t.logLevel=on(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const s=typeof t.message;return st(s==="string"||s==="object"),Object.assign(t,{args:r},t.opts)}function yr(t,e,n){if(typeof e=="string"){const r=n.time?hr(Br(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=Cr(e,n.color,n.background)}return e}function Er(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const _e="4.3.3",br=_e[0]>="0"&&_e[0]<="9"?`v${_e}`:"";function pr(){const t=new ot({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=br,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const Fr=pr();function Ir(t,e){return cn(t||{},e)}function cn(t,e,n=0){if(n>3)return e;const r={...t};for(const[s,o]of Object.entries(e))o&&typeof o=="object"&&!Array.isArray(o)?r[s]=cn(r[s]||{},e[s],n+1):r[s]=e[s];return r}function Tr(t){globalThis.loaders||={},globalThis.loaders.modules||={},Object.assign(globalThis.loaders.modules,t)}function Mr(t){return globalThis.loaders?.modules?.[t]||null}const Dr="latest";function Gr(){return globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}const an=Gr();function _(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const T=typeof process!="object"||String(process)!=="[object process]"||process.browser,it=typeof importScripts=="function",Rr=typeof window<"u"&&typeof window.orientation<"u",Dt=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Dt&&parseFloat(Dt[1]);class wr{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(e,n){this.name=e,this.workerThread=n,this.result=new Promise((r,s)=>{this._resolve=r,this._reject=s})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){_(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){_(this.isRunning),this.isRunning=!1,this._reject(e)}}class Oe{terminate(){}}const Le=new Map;function _r(t){_(t.source&&!t.url||!t.source&&t.url);let e=Le.get(t.source||t.url);return e||(t.url&&(e=Or(t.url),Le.set(t.url,e)),t.source&&(e=un(t.source),Le.set(t.source,e))),_(e),e}function Or(t){if(!t.startsWith("http"))return t;const e=Lr(t);return un(e)}function un(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Lr(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function fn(t,e=!0,n){const r=n||new Set;if(t){if(Gt(t))r.add(t);else if(Gt(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const s in t)fn(t[s],e,r)}}return n===void 0?Array.from(r):[]}function Gt(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Je=()=>{};class We{name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return typeof Worker<"u"&&T||typeof Oe<"u"&&!T}constructor(e){const{name:n,source:r,url:s}=e;_(r||s),this.name=n,this.source=r,this.url=s,this.onMessage=Je,this.onError=o=>console.log(o),this.worker=T?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Je,this.onError=Je,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||fn(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=_r({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new Oe(r,{eval:!1})}else if(this.source)e=new Oe(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Jr{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return We.isSupported()}constructor(e){this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(s,o,i)=>s.done(i),r=(s,o)=>s.error(o)){const s=new Promise(o=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new wr(n.name,e);e.onMessage=s=>n.onMessage(r,s.type,s.payload),e.onError=s=>n.onError(r,s),n.onStart(r);try{await r.result}catch(s){console.error(`Worker exception: ${s}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!T||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new We({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Rr?this.maxMobileConcurrency:this.maxConcurrency}}const xr={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class L{props;workerPools=new Map;static _workerFarm;static isSupported(){return We.isSupported()}static getWorkerFarm(e={}){return L._workerFarm=L._workerFarm||new L({}),L._workerFarm.setProps(e),L._workerFarm}constructor(e){this.props={...xr},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:s}=e;let o=this.workerPools.get(n);return o||(o=new Jr({name:n,source:r,url:s}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}function Sr(t,e={}){const n=e[t.id]||{},r=T?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let s=n.workerUrl;if(!s&&t.id==="compression"&&(s=e.workerUrl),e._workerType==="test"&&(T?s=`modules/${t.module}/dist/${r}`:s=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!s){let o=t.version;o==="latest"&&(o=Dr);const i=o?`@${o}`:"";s=`https://unpkg.com/@loaders.gl/${t.module}${i}/dist/${r}`}return _(s),s}function Ur(t,e=an){_(t,"no worker provided");const n=t.version;return!(!e||!n)}const xe={};async function U(t,e=null,n={},r=null){return e&&(t=Hr(t,e,n,r)),xe[t]=xe[t]||Nr(t),await xe[t]}function Hr(t,e,n={},r=null){if(!n.useLocalLibraries&&t.startsWith("http"))return t;r=r||t;const s=n.modules||{};return s[r]?s[r]:T?n.CDN?(_(n.CDN.startsWith("http")),`${n.CDN}/${e}@${an}/dist/libs/${r}`):it?`../src/libs/${r}`:`modules/${e}/src/libs/${r}`:`modules/${e}/dist/libs/${r}`}async function Nr(t){if(t.endsWith("wasm"))return await vr(t);if(!T)try{const{requireFromFile:n}=globalThis.loaders||{};return await n?.(t)}catch(n){return console.error(n),null}if(it)return importScripts(t);const e=await jr(t);return Pr(e,t)}function Pr(t,e){if(!T){const{requireFromString:r}=globalThis.loaders||{};return r?.(t,e)}if(it)return eval.call(globalThis,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}async function vr(t){const{readFileAsArrayBuffer:e}=globalThis.loaders||{};return T||!e||t.startsWith("http")?await(await fetch(t)).arrayBuffer():await e(t)}async function jr(t){const{readFileAsText:e}=globalThis.loaders||{};return T||!e||t.startsWith("http")?await(await fetch(t)).text():await e(t)}function Kr(t,e){return!L.isSupported()||!T&&!e?._nodeWorkers?!1:t.worker&&e?.worker}async function kr(t,e,n,r,s){const o=t.id,i=Sr(t,n),a=L.getWorkerFarm(n).getWorkerPool({name:o,url:i});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await a.startJob("process-on-worker",Qr.bind(null,s));return u.postMessage("process",{input:e,options:n,context:r}),await(await u.result).result}async function Qr(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:s,input:o,options:i}=r;try{const c=await t(o,i);e.postMessage("done",{id:s,result:c})}catch(c){const a=c instanceof Error?c.message:"unknown error";e.postMessage("error",{id:s,error:a})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function Xr(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Rt(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Rt(t,0,e):""}function Rt(t,e,n){if(t.byteLength<=e+n)return"";const r=new DataView(t);let s="";for(let o=0;o<n;o++)s+=String.fromCharCode(r.getUint8(e+o));return s}function Yr(t){try{return JSON.parse(t)}catch{throw new Error(`Failed to parse JSON from data starting with "${Xr(t)}"`)}}function Wr(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),s=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}function Vr(...t){return $r(t)}function $r(t){const e=t.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=e.reduce((o,i)=>o+i.byteLength,0),r=new Uint8Array(n);let s=0;for(const o of e)r.set(o,s),s+=o.byteLength;return r.buffer}function An(t,e,n){const r=n!==void 0?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}function ee(t,e){return w(t>=0),w(e>0),t+(e-1)&-4}function Zr(t,e,n){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{const s=t.byteOffset,o=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,s,o)}return e.set(r,n),n+ee(r.byteLength,4)}async function zr(t){const e=[];for await(const n of t)e.push(n);return Vr(...e)}let qr="";const wt={};function es(t){for(const e in wt)if(t.startsWith(e)){const n=wt[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${qr}${t}`),t}function ts(t){return t&&typeof t=="object"&&t.isBuffer}function ln(t){if(ts(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Bn(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function ns(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const rs=t=>typeof t=="boolean",Z=t=>typeof t=="function",te=t=>t!==null&&typeof t=="object",_t=t=>te(t)&&t.constructor==={}.constructor,ss=t=>!!t&&typeof t[Symbol.iterator]=="function",os=t=>t&&typeof t[Symbol.asyncIterator]=="function",H=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,N=t=>typeof Blob<"u"&&t instanceof Blob,is=t=>t&&typeof t=="object"&&t.isBuffer,cs=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||te(t)&&Z(t.tee)&&Z(t.cancel)&&Z(t.getReader),as=t=>te(t)&&Z(t.read)&&Z(t.pipe)&&rs(t.readable),hn=t=>cs(t)||as(t);class us extends Error{constructor(e,n){super(e),this.reason=n.reason,this.url=n.url,this.response=n.response}reason;url;response}const fs=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,As=/^([-\w.]+\/[-\w.+]+)/;function Ot(t,e){return t.toLowerCase()===e.toLowerCase()}function ls(t){const e=As.exec(t);return e?e[1]:t}function Lt(t){const e=fs.exec(t);return e?e[1]:""}const dn=/\?.*/;function Bs(t){const e=t.match(dn);return e&&e[0]}function ct(t){return t.replace(dn,"")}function hs(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Ee(t){return H(t)?t.url:N(t)?t.name||"":typeof t=="string"?t:""}function at(t){if(H(t)){const e=t,n=e.headers.get("content-type")||"",r=ct(e.url);return ls(n)||Lt(r)}return N(t)?t.type||"":typeof t=="string"?Lt(t):""}function ds(t){return H(t)?t.headers["content-length"]||-1:N(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function Cn(t){if(H(t))return t;const e={},n=ds(t);n>=0&&(e["content-length"]=String(n));const r=Ee(t),s=at(t);s&&(e["content-type"]=s);const o=await ms(t);o&&(e["x-first-bytes"]=o),typeof t=="string"&&(t=new TextEncoder().encode(t));const i=new Response(t,{headers:e});return Object.defineProperty(i,"url",{value:r}),i}async function Cs(t){if(!t.ok)throw await gs(t)}async function gs(t){const e=hs(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:t.statusText,url:t.url,response:t};try{const s=t.headers.get("Content-Type");r.reason=!t.bodyUsed&&s?.includes("application/json")?await t.json():await t.text()}catch{}return new us(n,r)}async function ms(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const s=new FileReader;s.onload=o=>r(o?.target?.result),s.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${ys(n)}`}return null}function ys(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function Es(t){return!bs(t)&&!ps(t)}function bs(t){return t.startsWith("http:")||t.startsWith("https:")}function ps(t){return t.startsWith("data:")}async function Jt(t,e){if(typeof t=="string"){const n=es(t);return Es(n)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(n,e):await fetch(n,e)}return await Cn(t)}const xt=new ot({id:"loaders.gl"});class Fs{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Is{console;constructor(){this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const gn={fetch:null,mimeType:void 0,nothrow:!1,log:new Is,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:ye,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Ts={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function mn(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function yn(){const t=mn();return t.globalOptions=t.globalOptions||{...gn},t.globalOptions}function Ms(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],Ds(t,n),Rs(e,t,r)}function Ds(t,e){St(t,null,gn,Ts,e);for(const n of e){const r=t&&t[n.id]||{},s=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};St(r,n.id,s,o,e)}}function St(t,e,n,r,s){const o=e||"Top level",i=e?`${e}.`:"";for(const c in t){const a=!e&&te(t[c]),u=c==="baseUri"&&!e,f=c==="workerUrl"&&e;if(!(c in n)&&!u&&!f){if(c in r)xt.warn(`${o} loader option '${i}${c}' no longer supported, use '${r[c]}'`)();else if(!a){const A=Gs(c,s);xt.warn(`${o} loader option '${i}${c}' not recognized. ${A}`)()}}}}function Gs(t,e){const n=t.toLowerCase();let r="";for(const s of e)for(const o in s.options){if(t===o)return`Did you mean '${s.id}.${o}'?`;const i=o.toLowerCase();(n.startsWith(i)||i.startsWith(n))&&(r=r||`Did you mean '${s.id}.${o}'?`)}return r}function Rs(t,e,n){const s={...t.options||{}};return ws(s,n),s.log===null&&(s.log=new Fs),Ut(s,yn()),Ut(s,e),s}function Ut(t,e){for(const n in e)if(n in e){const r=e[n];_t(r)&&_t(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function ws(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function ut(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t?.extensions)):!1}function En(t){w(t,"null loader"),w(ut(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t?.parseTextSync||t?.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const _s=()=>{const t=mn();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Os(){return _s()}const Ls=/\.([^.]+)$/;async function Js(t,e=[],n,r){if(!bn(t))return null;let s=Ht(t,e,{...n,nothrow:!0},r);if(s)return s;if(N(t)&&(t=await t.slice(0,10).arrayBuffer(),s=Ht(t,e,n,r)),!s&&!n?.nothrow)throw new Error(pn(t));return s}function Ht(t,e=[],n,r){if(!bn(t))return null;if(e&&!Array.isArray(e))return En(e);let s=[];e&&(s=s.concat(e)),n?.ignoreRegisteredLoaders||s.push(...Os()),Ss(s);const o=xs(t,s,n,r);if(!o&&!n?.nothrow)throw new Error(pn(t));return o}function xs(t,e,n,r){const s=Ee(t),o=at(t),i=ct(s)||r?.url;let c=null,a="";return n?.mimeType&&(c=Se(e,n?.mimeType),a=`match forced by supplied MIME type ${n?.mimeType}`),c=c||Us(e,i),a=a||(c?`matched url ${i}`:""),c=c||Se(e,o),a=a||(c?`matched MIME type ${o}`:""),c=c||Ns(e,t),a=a||(c?`matched initial data ${Fn(t)}`:""),n?.fallbackMimeType&&(c=c||Se(e,n?.fallbackMimeType),a=a||(c?`matched fallback MIME type ${o}`:"")),a&&Fr.log(1,`selectLoader selected ${c?.name}: ${a}.`),c}function bn(t){return!(t instanceof Response&&t.status===204)}function pn(t){const e=Ee(t),n=at(t);let r="No valid loader found (";r+=e?`${Bn(e)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const s=t?Fn(t):"";return r+=s?` first bytes: "${s}"`:"first bytes: not available",r+=")",r}function Ss(t){for(const e of t)En(e)}function Us(t,e){const n=e&&Ls.exec(e),r=n&&n[1];return r?Hs(t,r):null}function Hs(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function Se(t,e){for(const n of t)if(n.mimeTypes?.some(r=>Ot(e,r))||Ot(e,`application/x.${n.id}`))return n;return null}function Ns(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(Ps(e,n))return n}else if(ArrayBuffer.isView(e)){if(Nt(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Nt(e,0,n))return n;return null}function Ps(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function Nt(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(s=>vs(t,e,n,s))}function vs(t,e,n,r){if(r instanceof ArrayBuffer)return Wr(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":const s=Ve(t,e,r.length);return r===s;default:return!1}}function Fn(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Ve(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Ve(t,0,e):""}function Ve(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let s="";for(let o=0;o<n;o++)s+=String.fromCharCode(r.getUint8(e+o));return s}const js=256*1024;function*Ks(t,e){const n=e?.chunkSize||js;let r=0;const s=new TextEncoder;for(;r<t.length;){const o=Math.min(t.length-r,n),i=t.slice(r,r+o);r+=o,yield s.encode(i)}}const ks=256*1024;function*Qs(t,e={}){const{chunkSize:n=ks}=e;let r=0;for(;r<t.byteLength;){const s=Math.min(t.byteLength-r,n),o=new ArrayBuffer(s),i=new Uint8Array(t,r,s);new Uint8Array(o).set(i),r+=s,yield o}}const Xs=1024*1024;async function*Ys(t,e){const n=e?.chunkSize||Xs;let r=0;for(;r<t.size;){const s=r+n,o=await t.slice(r,s).arrayBuffer();r=s,yield o}}function Pt(t,e){return ye?Ws(t,e):Vs(t)}async function*Ws(t,e){const n=t.getReader();let r;try{for(;;){const s=r||n.read();e?._streamReadAhead&&(r=n.read());const{done:o,value:i}=await s;if(o)return;yield ln(i)}}catch{n.releaseLock()}}async function*Vs(t,e){for await(const n of t)yield ln(n)}function $s(t,e){if(typeof t=="string")return Ks(t,e);if(t instanceof ArrayBuffer)return Qs(t,e);if(N(t))return Ys(t,e);if(hn(t))return Pt(t,e);if(H(t))return Pt(t.body,e);throw new Error("makeIterator")}const In="Cannot convert supplied data type";function Zs(t,e,n){if(e.text&&typeof t=="string")return t;if(is(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const s=t.byteLength||t.length;return(t.byteOffset!==0||s!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+s)),r}throw new Error(In)}async function zs(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return Zs(t,e);if(N(t)&&(t=await Cn(t)),H(t)){const s=t;return await Cs(s),e.binary?await s.arrayBuffer():await s.text()}if(hn(t)&&(t=$s(t,n)),ss(t)||os(t))return zr(t);throw new Error(In)}function Tn(t,e){const n=yn(),r=t||n;return typeof r.fetch=="function"?r.fetch:te(r.fetch)?s=>Jt(s,r.fetch):e?.fetch?e?.fetch:Jt}function qs(t,e,n){if(n)return n;const r={fetch:Tn(e,t),...t};if(r.url){const s=ct(r.url);r.baseUrl=s,r.queryString=Bs(r.url),r.filename=Bn(s),r.baseUrl=ns(s)}return Array.isArray(r.loaders)||(r.loaders=null),r}function eo(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function Be(t,e,n,r){e&&!Array.isArray(e)&&!ut(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const s=Ee(t),i=eo(e,r),c=await Js(t,i,n);return c?(n=Ms(n,c,i,s),r=qs({url:s,_parse:Be,loaders:i},n,r||null),await to(c,t,n,r)):null}async function to(t,e,n,r){if(Ur(t),n=Ir(t.options,n),H(e)){const o=e,{ok:i,redirected:c,status:a,statusText:u,type:f,url:A}=o,l=Object.fromEntries(o.headers.entries());r.response={headers:l,ok:i,redirected:c,status:a,statusText:u,type:f,url:A}}e=await zs(e,t,n);const s=t;if(s.parseTextSync&&typeof e=="string")return s.parseTextSync(e,n,r);if(Kr(t,n))return await kr(t,e,n,r,Be);if(s.parseText&&typeof e=="string")return await s.parseText(e,n,r);if(s.parse)return await s.parse(e,n,r);throw _(!s.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}function no(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function ro(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,i=-1/0;const c=t.POSITION?t.POSITION.value:[],a=c&&c.length;for(let u=0;u<a;u+=3){const f=c[u],A=c[u+1],l=c[u+2];e=f<e?f:e,n=A<n?A:n,r=l<r?l:r,s=f>s?f:s,o=A>o?A:o,i=l>i?l:i}return[[e,n,r],[s,o,i]]}function so(t,e,n){const r=no(e.value),s=n||oo(e);return{name:t,type:{type:"fixed-size-list",listSize:e.size,children:[{name:"value",type:r}]},nullable:!1,metadata:s}}function oo(t){const e={};return"byteOffset"in t&&(e.byteOffset=t.byteOffset.toString(10)),"byteStride"in t&&(e.byteStride=t.byteStride.toString(10)),"normalized"in t&&(e.normalized=t.normalized.toString()),e}async function io(t,e,n,r){let s,o;!Array.isArray(e)&&!ut(e)?(s=[],o=e):(s=e,o=n);const i=Tn(o);let c=t;return typeof t=="string"&&(c=await i(t)),N(t)&&(c=await i(t)),Array.isArray(s)?await Be(c,s,o):await Be(c,s,o)}const co="4.3.3",ao=globalThis.loaders?.parseImageNode,$e=typeof Image<"u",Ze=typeof ImageBitmap<"u",uo=!!ao,ze=ye?!0:uo;function fo(t){switch(t){case"auto":return Ze||$e||ze;case"imagebitmap":return Ze;case"image":return $e;case"data":return ze;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function Ao(){if(Ze)return"imagebitmap";if($e)return"image";if(ze)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function lo(t){const e=Bo(t);if(!e)throw new Error("Not an image");return e}function Mn(t){switch(lo(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Bo(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const ho=/^data:image\/svg\+xml/,Co=/\.svg((\?|#).*)?$/;function ft(t){return t&&(ho.test(t)||Co.test(t))}function go(t,e){if(ft(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(o){throw new Error(o.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return Dn(t,e)}function Dn(t,e){if(ft(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Gn(t,e,n){const r=go(t,n),s=self.URL||self.webkitURL,o=typeof r!="string"&&s.createObjectURL(r);try{return await mo(o||r,e)}finally{o&&s.revokeObjectURL(o)}}async function mo(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,s)=>{try{n.onload=()=>r(n),n.onerror=o=>{const i=o instanceof Error?o.message:"error";s(new Error(i))}}catch(o){s(o)}})}const yo={};let vt=!0;async function Eo(t,e,n){let r;ft(n)?r=await Gn(t,e,n):r=Dn(t,n);const s=e&&e.imagebitmap;return await bo(r,s)}async function bo(t,e=null){if((po(e)||!vt)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),vt=!1}return await createImageBitmap(t)}function po(t){for(const e in t||yo)return!1;return!0}function Fo(t){return!Do(t,"ftyp",4)||(t[8]&96)===0?null:Io(t)}function Io(t){switch(To(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function To(t,e,n){return String.fromCharCode(...t.slice(e,n))}function Mo(t){return[...t].map(e=>e.charCodeAt(0))}function Do(t,e,n=0){const r=Mo(e);for(let s=0;s<r.length;++s)if(r[s]!==t[s+n])return!1;return!0}const R=!1,z=!0;function At(t){const e=ne(t);return Ro(e)||Oo(e)||wo(e)||_o(e)||Go(e)}function Go(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=Fo(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function Ro(t){const e=ne(t);return e.byteLength>=24&&e.getUint32(0,R)===2303741511?{mimeType:"image/png",width:e.getUint32(16,R),height:e.getUint32(20,R)}:null}function wo(t){const e=ne(t);return e.byteLength>=10&&e.getUint32(0,R)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,z),height:e.getUint16(8,z)}:null}function _o(t){const e=ne(t);return e.byteLength>=14&&e.getUint16(0,R)===16973&&e.getUint32(2,z)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,z),height:e.getUint32(22,z)}:null}function Oo(t){const e=ne(t);if(!(e.byteLength>=3&&e.getUint16(0,R)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:s}=Lo();let o=2;for(;o+9<e.byteLength;){const i=e.getUint16(o,R);if(s.has(i))return{mimeType:"image/jpeg",height:e.getUint16(o+5,R),width:e.getUint16(o+7,R)};if(!r.has(i))return null;o+=2,o+=e.getUint16(o,R)}return null}function Lo(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function ne(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function Jo(t,e){const{mimeType:n}=At(t)||{},r=globalThis.loaders?.parseImageNode;return w(r),await r(t,n)}async function xo(t,e,n){e=e||{};const s=(e.image||{}).type||"auto",{url:o}=n||{},i=So(s);let c;switch(i){case"imagebitmap":c=await Eo(t,e,o);break;case"image":c=await Gn(t,e,o);break;case"data":c=await Jo(t);break;default:w(!1)}return s==="data"&&(c=Mn(c)),c}function So(t){switch(t){case"auto":case"data":return Ao();default:return fo(t),t}}const Uo=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],Ho=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],No={image:{type:"auto",decode:!0}},Po={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:co,mimeTypes:Ho,extensions:Uo,parse:xo,tests:[t=>!!At(new DataView(t))],options:No},Ue={};function vo(t){if(Ue[t]===void 0){const e=ye?Ko(t):jo(t);Ue[t]=e}return Ue[t]}function jo(t){const e=["image/png","image/jpeg","image/gif"],n=globalThis.loaders?.imageFormatsNode||e;return!!globalThis.loaders?.parseImageNode&&n.includes(t)}function Ko(t){switch(t){case"image/avif":case"image/webp":return ko(t);default:return!0}}function ko(t){try{return document.createElement("canvas").toDataURL(t).indexOf(`data:${t}`)===0}catch{return!1}}function I(t,e){if(!t)throw new Error(e||"assert failed: gltf")}const Rn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wn={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},jt=["SCALAR","VEC2","VEC3","VEC4"],Qo=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Xo=new Map(Qo),Yo={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Wo={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Vo={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function _n(t){return jt[t-1]||jt[0]}function be(t){const e=Xo.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function On(t,e){const n=Vo[t.componentType],r=Yo[t.type],s=Wo[t.componentType],o=t.count*r,i=t.count*r*s;I(i>=0&&i<=e.byteLength);const c=wn[t.componentType],a=Rn[t.type];return{ArrayType:n,length:o,byteLength:i,componentByteSize:c,numberOfComponentsInElement:a}}function $o(t,e,n){const r=t.bufferViews[n];I(r);const s=r.buffer,o=e[s];I(o);const i=(r.byteOffset||0)+o.byteOffset;return new Uint8Array(o.arrayBuffer,i,r.byteLength)}function Zo(t,e,n){const r=typeof n=="number"?t.accessors?.[n]:n;if(!r)throw new Error(`No gltf accessor ${JSON.stringify(n)}`);const s=t.bufferViews?.[r.bufferView||0];if(!s)throw new Error(`No gltf buffer view for accessor ${s}`);const{arrayBuffer:o,byteOffset:i}=e[s.buffer],c=(i||0)+(r.byteOffset||0)+(s.byteOffset||0),{ArrayType:a,length:u,componentByteSize:f,numberOfComponentsInElement:A}=On(r,s),l=f*A,B=s.byteStride||l;if(typeof s.byteStride>"u"||s.byteStride===l)return new a(o,c,u);const h=new a(u);for(let d=0;d<r.count;d++){const g=new a(o,c+d*B,A);h.set(g,d*A)}return h}function zo(){return{asset:{version:"2.0",generator:"loaders.gl"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]}}class y{gltf;sourceBuffers;byteLength;constructor(e){this.gltf={json:e?.json||zo(),buffers:e?.buffers||[],images:e?.images||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}hasExtension(e){const n=this.getUsedExtensions().find(s=>s===e),r=this.getRequiredExtensions().find(s=>s===e);return typeof n=="string"||typeof r=="string"}getExtension(e){const n=this.getUsedExtensions().find(s=>s===e),r=this.json.extensions||{};return n?r[e]:null}getRequiredExtension(e){return this.getRequiredExtensions().find(r=>r===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if(typeof n=="object")return n;const r=this.json[e]&&this.json[e][n];if(!r)throw new Error(`glTF file error: Could not find ${e}[${n}]`);return r}getTypedArrayForBufferView(e){e=this.getBufferView(e);const n=e.buffer,r=this.gltf.buffers[n];I(r);const s=(e.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,s,e.byteLength)}getTypedArrayForAccessor(e){const n=this.getAccessor(e);return Zo(this.gltf.json,this.gltf.buffers,n)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),s=this.getBuffer(n.buffer).data,o=n.byteOffset||0;return new Uint8Array(s,o,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,r){return e.extensions=e.extensions||{},e.extensions[n]=r,this.registerUsedExtension(n),this}setObjectExtension(e,n,r){const s=e.extensions||{};s[n]=r}removeObjectExtension(e,n){const r=e?.extensions||{};if(r[n]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const s=this.json.extensionsRemoved;s.includes(n)||s.push(n)}delete r[n]}addExtension(e,n={}){return I(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return I(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(this.json.extensions?.[e]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}this.json.extensions&&delete this.json.extensions[e],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:r}=e;this.json.nodes=this.json.nodes||[];const s={mesh:n};return r&&(s.matrix=r),this.json.nodes.push(s),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:r,material:s,mode:o=4}=e,c={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(r){const a=this._addIndices(r);c.primitives[0].indices=a}return Number.isFinite(s)&&(c.primitives[0].material=s),this.json.meshes=this.json.meshes||[],this.json.meshes.push(c),this.json.meshes.length-1}addPointCloud(e){const r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addImage(e,n){const r=At(e),s=n||r?.mimeType,i={bufferView:this.addBufferView(e),mimeType:s};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1}addBufferView(e,n=0,r=this.byteLength){const s=e.byteLength;I(Number.isFinite(s)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const o={buffer:n,byteOffset:r,byteLength:s};return this.byteLength+=ee(s,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(o),this.json.bufferViews.length-1}addAccessor(e,n){const r={bufferView:e,type:_n(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){const r=this.addBufferView(e);let s={min:n.min,max:n.max};(!s.min||!s.max)&&(s=this._getAccessorMinMax(e,n.size));const o={size:n.size,componentType:be(e),count:Math.round(e.length/n.size),min:s.min,max:s.max};return this.addAccessor(r,Object.assign(o,n))}addTexture(e){const{imageIndex:n}=e,r={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){const e=this.byteLength,n=new ArrayBuffer(e),r=new Uint8Array(n);let s=0;for(const o of this.sourceBuffers||[])s=Zr(o,r,s);this.json?.buffers?.[0]?this.json.buffers[0].byteLength=e:this.json.buffers=[{byteLength:e}],this.gltf.binary=n,this.sourceBuffers=[n],this.gltf.buffers=[{arrayBuffer:n,byteOffset:0,byteLength:n.byteLength}]}_removeStringFromArray(e,n){let r=!0;for(;r;){const s=e.indexOf(n);s>-1?e.splice(s,1):r=!1}}_addAttributes(e={}){const n={};for(const r in e){const s=e[r],o=this._getGltfAttributeName(r),i=this.addBinaryBuffer(s.value,s);n[o]=i}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const r={min:null,max:null};if(e.length<n)return r;r.min=[],r.max=[];const s=e.subarray(0,n);for(const o of s)r.min.push(o),r.max.push(o);for(let o=n;o<e.length;o+=n)for(let i=0;i<n;i++)r.min[0+i]=Math.min(r.min[0+i],e[o+i]),r.max[0+i]=Math.max(r.max[0+i],e[o+i]);return r}}function Kt(t){return(t%1+1)%1}const Ln={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},qo={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},Jn={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function lt(t,e){return Jn[e]*Ln[t]}function pe(t,e,n,r){if(n!=="UINT8"&&n!=="UINT16"&&n!=="UINT32"&&n!=="UINT64")return null;const s=t.getTypedArrayForBufferView(e),o=Fe(s,"SCALAR",n,r+1);return o instanceof BigInt64Array||o instanceof BigUint64Array?null:o}function Fe(t,e,n,r=1){const s=Ln[e],o=qo[n],i=Jn[n],c=r*s,a=c*i;let u=t.buffer,f=t.byteOffset;return f%i!==0&&(u=new Uint8Array(u).slice(f,f+a).buffer,f=0),new o(u,f,c)}function Bt(t,e,n){const r=`TEXCOORD_${e.texCoord||0}`,s=n.attributes[r],o=t.getTypedArrayForAccessor(s),i=t.gltf.json,c=e.index,a=i.textures?.[c]?.source;if(typeof a<"u"){const u=i.images?.[a]?.mimeType,f=t.gltf.images?.[a];if(f&&typeof f.width<"u"){const A=[];for(let l=0;l<o.length;l+=2){const B=ei(f,u,o,l,e.channels);A.push(B)}return A}}return[]}function xn(t,e,n,r,s){if(!n?.length)return;const o=[];for(const f of n){let A=r.findIndex(l=>l===f);A===-1&&(A=r.push(f)-1),o.push(A)}const i=new Uint32Array(o),c=t.gltf.buffers.push({arrayBuffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength})-1,a=t.addBufferView(i,c,0),u=t.addAccessor(a,{size:1,componentType:be(i),count:i.length});s.attributes[e]=u}function ei(t,e,n,r,s=[0]){const o={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},i=n[r],c=n[r+1];let a=1;e&&(e.indexOf("image/jpeg")!==-1||e.indexOf("image/png")!==-1)&&(a=4);const u=ti(i,c,t,a);let f=0;for(const A of s){const l=typeof A=="number"?Object.values(o)[A]:o[A],B=u+l.offset,h=Mn(t);if(h.data.length<=B)throw new Error(`${h.data.length} <= ${B}`);const d=h.data[B];f|=d<<l.shift}return f}function ti(t,e,n,r=1){const s=n.width,o=Kt(t)*(s-1),i=Math.round(o),c=n.height,a=Kt(e)*(c-1),u=Math.round(a),f=n.components?n.components:r;return(u*s+i)*f}function Sn(t,e,n,r,s){const o=[];for(let i=0;i<e;i++){const c=n[i],a=n[i+1]-n[i];if(a+c>r)break;const u=c/s,f=a/s;o.push(t.slice(u,u+f))}return o}function Un(t,e,n){const r=[];for(let s=0;s<e;s++){const o=s*n;r.push(t.slice(o,o+n))}return r}function Hn(t,e,n,r){if(n)throw new Error("Not implemented - arrayOffsets for strings is specified");if(r){const s=[],o=new TextDecoder("utf8");let i=0;for(let c=0;c<t;c++){const a=r[c+1]-r[c];if(a+i<=e.length){const u=e.subarray(i,a+i),f=o.decode(u);s.push(f),i+=a}}return s}return[]}const Q="EXT_mesh_features",ni=Q;async function ri(t,e){const n=new y(t);oi(n,e)}function si(t,e){const n=new y(t);return ci(n),n.createBinaryChunk(),n.gltf}function oi(t,e){const n=t.gltf.json;if(n.meshes)for(const r of n.meshes)for(const s of r.primitives)ii(t,s,e)}function ii(t,e,n){if(!n?.gltf?.loadBuffers)return;const s=e.extensions?.[Q]?.featureIds;if(s)for(const o of s){let i;if(typeof o.attribute<"u"){const c=`_FEATURE_ID_${o.attribute}`,a=e.attributes[c];i=t.getTypedArrayForAccessor(a)}else typeof o.texture<"u"&&n?.gltf?.loadImages?i=Bt(t,o.texture,e):i=[];o.data=i}}function ci(t,e){const n=t.gltf.json.meshes;if(n)for(const r of n)for(const s of r.primitives)ui(t,s)}function ai(t,e,n,r){e.extensions||(e.extensions={});let s=e.extensions[Q];s||(s={featureIds:[]},e.extensions[Q]=s);const{featureIds:o}=s,i={featureCount:n.length,propertyTable:r,data:n};o.push(i),t.addObjectExtension(e,Q,s)}function ui(t,e){const n=e.extensions?.[Q];if(!n)return;const r=n.featureIds;r.forEach((s,o)=>{if(s.data){const{accessorKey:i,index:c}=fi(e.attributes),a=new Uint32Array(s.data);r[o]={featureCount:a.length,propertyTable:s.propertyTable,attribute:c},t.gltf.buffers.push({arrayBuffer:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength});const u=t.addBufferView(a),f=t.addAccessor(u,{size:1,componentType:be(a),count:a.length});e.attributes[i]=f}})}function fi(t){const e="_FEATURE_ID_",n=Object.keys(t).filter(o=>o.indexOf(e)===0);let r=-1;for(const o of n){const i=Number(o.substring(e.length));i>r&&(r=i)}return r++,{accessorKey:`${e}${r}`,index:r}}const Ai=Object.freeze(Object.defineProperty({__proto__:null,createExtMeshFeatures:ai,decode:ri,encode:si,name:ni},Symbol.toStringTag,{value:"Module"})),X="EXT_structural_metadata",li=X;async function Bi(t,e){const n=new y(t);di(n,e)}function hi(t,e){const n=new y(t);return _i(n),n.createBinaryChunk(),n.gltf}function di(t,e){if(!e.gltf?.loadBuffers)return;const n=t.getExtension(X);n&&(e.gltf?.loadImages&&Ci(t,n),gi(t,n))}function Ci(t,e){const n=e.propertyTextures,r=t.gltf.json;if(n&&r.meshes)for(const s of r.meshes)for(const o of s.primitives)yi(t,n,o,e)}function gi(t,e){const n=e.schema;if(!n)return;const r=n.classes,s=e.propertyTables;if(r&&s)for(const o in r){const i=mi(s,o);i&&bi(t,n,i)}}function mi(t,e){for(const n of t)if(n.class===e)return n;return null}function yi(t,e,n,r){if(!e)return;const o=n.extensions?.[X]?.propertyTextures;if(o)for(const i of o){const c=e[i];Ei(t,c,n,r)}}function Ei(t,e,n,r){if(!e.properties)return;r.dataAttributeNames||(r.dataAttributeNames=[]);const s=e.class;for(const o in e.properties){const i=`${s}_${o}`,c=e.properties?.[o];if(!c)continue;c.data||(c.data=[]);const a=c.data,u=Bt(t,c,n);u!==null&&(xn(t,i,u,a,n),c.data=a,r.dataAttributeNames.push(i))}}function bi(t,e,n){const r=e.classes?.[n.class];if(!r)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${n.class}`);const s=n.count;for(const o in r.properties){const i=r.properties[o],c=n.properties?.[o];if(c){const a=pi(t,e,i,s,c);c.data=a}}}function pi(t,e,n,r,s){let o=[];const i=s.values,c=t.getTypedArrayForBufferView(i),a=Fi(t,n,s,r),u=Ii(t,s,r);switch(n.type){case"SCALAR":case"VEC2":case"VEC3":case"VEC4":case"MAT2":case"MAT3":case"MAT4":{o=Ti(n,r,c,a);break}case"BOOLEAN":throw new Error(`Not implemented - classProperty.type=${n.type}`);case"STRING":{o=Hn(r,c,a,u);break}case"ENUM":{o=Mi(e,n,r,c,a);break}default:throw new Error(`Unknown classProperty type ${n.type}`)}return o}function Fi(t,e,n,r){return e.array&&typeof e.count>"u"&&typeof n.arrayOffsets<"u"?pe(t,n.arrayOffsets,n.arrayOffsetType||"UINT32",r):null}function Ii(t,e,n){return typeof e.stringOffsets<"u"?pe(t,e.stringOffsets,e.stringOffsetType||"UINT32",n):null}function Ti(t,e,n,r){const s=t.array,o=t.count,i=lt(t.type,t.componentType),c=n.byteLength/i;let a;return t.componentType?a=Fe(n,t.type,t.componentType,c):a=n,s?r?Sn(a,e,r,n.length,i):o?Un(a,e,o):[]:a}function Mi(t,e,n,r,s){const o=e.enumType;if(!o)throw new Error("Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM");const i=t.enums?.[o];if(!i)throw new Error(`Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain ${o}`);const c=i.valueType||"UINT16",a=lt(e.type,c),u=r.byteLength/a;let f=Fe(r,e.type,c,u);if(f||(f=r),e.array){if(s)return Di({valuesData:f,numberOfElements:n,arrayOffsets:s,valuesDataBytesLength:r.length,elementSize:a,enumEntry:i});const A=e.count;return A?Gi(f,n,A,i):[]}return ht(f,0,n,i)}function Di(t){const{valuesData:e,numberOfElements:n,arrayOffsets:r,valuesDataBytesLength:s,elementSize:o,enumEntry:i}=t,c=[];for(let a=0;a<n;a++){const u=r[a],f=r[a+1]-r[a];if(f+u>s)break;const A=u/o,l=f/o,B=ht(e,A,l,i);c.push(B)}return c}function Gi(t,e,n,r){const s=[];for(let o=0;o<e;o++){const i=n*o,c=ht(t,i,n,r);s.push(c)}return s}function ht(t,e,n,r){const s=[];for(let o=0;o<n;o++)if(t instanceof BigInt64Array||t instanceof BigUint64Array)s.push("");else{const i=t[e+o],c=Ri(r,i);c?s.push(c.name):s.push("")}return s}function Ri(t,e){for(const n of t.values)if(n.value===e)return n;return null}const wi="schemaClassId";function _i(t,e){const n=t.getExtension(X);if(n&&n.propertyTables)for(const r of n.propertyTables){const s=r.class,o=n.schema?.classes?.[s];r.properties&&o&&Oi(r,o,t)}}function Oi(t,e,n){for(const r in t.properties){const s=t.properties[r].data;if(s){const o=e.properties[r];if(o){const i=Si(s,o,n);t.properties[r]=i}}}}function Li(t,e,n=wi){let r=t.getExtension(X);r||(r=t.addExtension(X)),r.schema=Ji(e,n,r.schema);const s=xi(e,n,r.schema);return r.propertyTables||(r.propertyTables=[]),r.propertyTables.push(s)-1}function Ji(t,e,n){const r=n??{id:"schema_id"},s={properties:{}};for(const o of t){const i={type:o.elementType,componentType:o.componentType};s.properties[o.name]=i}return r.classes={},r.classes[e]=s,r}function xi(t,e,n){const r={class:e,count:0};let s=0;const o=n.classes?.[e];for(const i of t){if(s===0&&(s=i.values.length),s!==i.values.length&&i.values.length)throw new Error("Illegal values in attributes");o?.properties[i.name]&&(r.properties||(r.properties={}),r.properties[i.name]={values:0,data:i.values})}return r.count=s,r}function Si(t,e,n){const r={values:0};if(e.type==="STRING"){const{stringData:s,stringOffsets:o}=Ni(t);r.stringOffsets=He(o,n),r.values=He(s,n)}else if(e.type==="SCALAR"&&e.componentType){const s=Hi(t,e.componentType);r.values=He(s,n)}return r}const Ui={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:Int32Array,UINT64:Uint32Array,FLOAT32:Float32Array,FLOAT64:Float64Array};function Hi(t,e){const n=[];for(const s of t)n.push(Number(s));const r=Ui[e];if(!r)throw new Error("Illegal component type");return new r(n)}function Ni(t){const e=new TextEncoder,n=[];let r=0;for(const a of t){const u=e.encode(a);r+=u.length,n.push(u)}const s=new Uint8Array(r),o=[];let i=0;for(const a of n)s.set(a,i),o.push(i),i+=a.length;o.push(i);const c=new Uint32Array(o);return{stringData:s,stringOffsets:c}}function He(t,e){return e.gltf.buffers.push({arrayBuffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}),e.addBufferView(t)}const Pi=Object.freeze(Object.defineProperty({__proto__:null,createExtStructuralMetadata:Li,decode:Bi,encode:hi,name:li},Symbol.toStringTag,{value:"Module"})),Nn="EXT_feature_metadata",vi=Nn;async function ji(t,e){const n=new y(t);Ki(n,e)}function Ki(t,e){if(!e.gltf?.loadBuffers)return;const n=t.getExtension(Nn);n&&(e.gltf?.loadImages&&ki(t,n),Qi(t,n))}function ki(t,e){const n=e.schema;if(!n)return;const r=n.classes,{featureTextures:s}=e;if(r&&s)for(const o in r){const i=r[o],c=Yi(s,o);c&&Vi(t,c,i)}}function Qi(t,e){const n=e.schema;if(!n)return;const r=n.classes,s=e.featureTables;if(r&&s)for(const o in r){const i=Xi(s,o);i&&Wi(t,n,i)}}function Xi(t,e){for(const n in t){const r=t[n];if(r.class===e)return r}return null}function Yi(t,e){for(const n in t){const r=t[n];if(r.class===e)return r}return null}function Wi(t,e,n){if(!n.class)return;const r=e.classes?.[n.class];if(!r)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${n.class}`);const s=n.count;for(const o in r.properties){const i=r.properties[o],c=n.properties?.[o];if(c){const a=$i(t,e,i,s,c);c.data=a}}}function Vi(t,e,n){const r=e.class;for(const s in n.properties){const o=e?.properties?.[s];if(o){const i=tc(t,o,r);o.data=i}}}function $i(t,e,n,r,s){let o=[];const i=s.bufferView,c=t.getTypedArrayForBufferView(i),a=Zi(t,n,s,r),u=zi(t,n,s,r);return n.type==="STRING"||n.componentType==="STRING"?o=Hn(r,c,a,u):qi(n)&&(o=ec(n,r,c,a)),o}function Zi(t,e,n,r){return e.type==="ARRAY"&&typeof e.componentCount>"u"&&typeof n.arrayOffsetBufferView<"u"?pe(t,n.arrayOffsetBufferView,n.offsetType||"UINT32",r):null}function zi(t,e,n,r){return typeof n.stringOffsetBufferView<"u"?pe(t,n.stringOffsetBufferView,n.offsetType||"UINT32",r):null}function qi(t){const e=["UINT8","INT16","UINT16","INT32","UINT32","INT64","UINT64","FLOAT32","FLOAT64"];return e.includes(t.type)||typeof t.componentType<"u"&&e.includes(t.componentType)}function ec(t,e,n,r){const s=t.type==="ARRAY",o=t.componentCount,i="SCALAR",c=t.componentType||t.type,a=lt(i,c),u=n.byteLength/a,f=Fe(n,i,c,u);return s?r?Sn(f,e,r,n.length,a):o?Un(f,e,o):[]:f}function tc(t,e,n){const r=t.gltf.json;if(!r.meshes)return[];const s=[];for(const o of r.meshes)for(const i of o.primitives)nc(t,n,e,s,i);return s}function nc(t,e,n,r,s){const o={channels:n.channels,...n.texture},i=Bt(t,o,s);i&&xn(t,e,i,r,s)}const rc=Object.freeze(Object.defineProperty({__proto__:null,decode:ji,name:vi},Symbol.toStringTag,{value:"Module"})),sc="4.3.3",oc="4.3.3",he={TRANSCODER:"basis_transcoder.js",TRANSCODER_WASM:"basis_transcoder.wasm",ENCODER:"basis_encoder.js",ENCODER_WASM:"basis_encoder.wasm"};let kt;async function Qt(t){Tr(t.modules);const e=Mr("basis");return e||(kt||=ic(t),await kt)}async function ic(t){let e=null,n=null;return[e,n]=await Promise.all([await U(he.TRANSCODER,"textures",t),await U(he.TRANSCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await cc(e,n)}function cc(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(s=>{const{BasisFile:o,initializeBasis:i}=s;i(),r({BasisFile:o})})})}let Ne;async function Xt(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(Ne=Ne||ac(t),await Ne)}async function ac(t){let e=null,n=null;return[e,n]=await Promise.all([await U(he.ENCODER,"textures",t),await U(he.ENCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await uc(e,n)}function uc(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(s=>{const{BasisFile:o,KTX2File:i,initializeBasis:c,BasisEncoder:a}=s;c(),r({BasisFile:o,KTX2File:i,BasisEncoder:a})})})}const K={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_ASTC_4X4_KHR:37808},fc=["","WEBKIT_","MOZ_"],Yt={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let oe=null;function Ac(t){if(!oe){t=t||lc()||void 0,oe=new Set;for(const e of fc)for(const n in Yt)if(t&&t.getExtension(`${e}${n}`)){const r=Yt[n];oe.add(r)}}return oe}function lc(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}const p=[171,75,84,88,32,50,48,187,13,10,26,10];function Bc(t){const e=new Uint8Array(t);return!(e.byteLength<p.length||e[0]!==p[0]||e[1]!==p[1]||e[2]!==p[2]||e[3]!==p[3]||e[4]!==p[4]||e[5]!==p[5]||e[6]!==p[6]||e[7]!==p[7]||e[8]!==p[8]||e[9]!==p[9]||e[10]!==p[10]||e[11]!==p[11])}const hc={etc1:{basisFormat:0,compressed:!0,format:K.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:K.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:K.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:K.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:K.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:K.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function dc(t,e){if(e.basis.containerFormat==="auto"){if(Bc(t)){const r=await Xt(e);return Wt(r.KTX2File,t,e)}const{BasisFile:n}=await Qt(e);return Pe(n,t,e)}if(e.basis.module==="encoder"){const n=await Xt(e);return e.basis.containerFormat==="ktx2"?Wt(n.KTX2File,t,e):Pe(n.BasisFile,t,e)}else{const{BasisFile:r}=await Qt(e);return Pe(r,t,e)}}function Pe(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");const s=r.getNumImages(),o=[];for(let i=0;i<s;i++){const c=r.getNumLevels(i),a=[];for(let u=0;u<c;u++)a.push(Cc(r,i,u,n));o.push(a)}return o}finally{r.close(),r.delete()}}function Cc(t,e,n,r){const s=t.getImageWidth(e,n),o=t.getImageHeight(e,n),i=t.getHasAlpha(),{compressed:c,format:a,basisFormat:u}=Pn(r,i),f=t.getImageTranscodedSizeInBytes(e,n,u),A=new Uint8Array(f);if(!t.transcodeImage(A,e,n,u,0,0))throw new Error("failed to start Basis transcoding");return{width:s,height:o,data:A,compressed:c,format:a,hasAlpha:i}}function Wt(t,e,n){const r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");const s=r.getLevels(),o=[];for(let i=0;i<s;i++)o.push(gc(r,i,n));return[o]}finally{r.close(),r.delete()}}function gc(t,e,n){const{alphaFlag:r,height:s,width:o}=t.getImageLevelInfo(e,0,0),{compressed:i,format:c,basisFormat:a}=Pn(n,r),u=t.getImageTranscodedSizeInBytes(e,0,0,a),f=new Uint8Array(u);if(!t.transcodeImage(f,e,0,0,a,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:s,data:f,compressed:i,levelSize:u,hasAlpha:r,format:c}}function Pn(t,e){let n=t&&t.basis&&t.basis.format;return n==="auto"&&(n=vn()),typeof n=="object"&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),hc[n]}function vn(){const t=Ac();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const mc={dataType:null,batchType:null,name:"Basis",id:"basis",module:"textures",version:oc,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},yc={...mc,parse:dc},Y=!0,Vt=1735152710,dt=12,de=8,Ec=1313821514,bc=5130562,pc=0,Fc=0,Ic=1;function Tc(t,e=0){return`${String.fromCharCode(t.getUint8(e+0))}${String.fromCharCode(t.getUint8(e+1))}${String.fromCharCode(t.getUint8(e+2))}${String.fromCharCode(t.getUint8(e+3))}`}function Mc(t,e=0,n={}){const r=new DataView(t),{magic:s=Vt}=n,o=r.getUint32(e,!1);return o===s||o===Vt}function Dc(t,e,n=0,r={}){const s=new DataView(e),o=Tc(s,n+0),i=s.getUint32(n+4,Y),c=s.getUint32(n+8,Y);switch(Object.assign(t,{header:{byteOffset:n,byteLength:c,hasBinChunk:!1},type:o,version:i,json:{},binChunks:[]}),n+=dt,t.version){case 1:return Gc(t,s,n);case 2:return Rc(t,s,n,r={});default:throw new Error(`Invalid GLB version ${t.version}. Only supports version 1 and 2.`)}}function Gc(t,e,n){w(t.header.byteLength>dt+de);const r=e.getUint32(n+0,Y),s=e.getUint32(n+4,Y);return n+=de,w(s===pc),qe(t,e,n,r),n+=r,n+=et(t,e,n,t.header.byteLength),n}function Rc(t,e,n,r){return w(t.header.byteLength>dt+de),wc(t,e,n,r),n+t.header.byteLength}function wc(t,e,n,r){for(;n+8<=t.header.byteLength;){const s=e.getUint32(n+0,Y),o=e.getUint32(n+4,Y);switch(n+=de,o){case Ec:qe(t,e,n,s);break;case bc:et(t,e,n,s);break;case Fc:r.strict||qe(t,e,n,s);break;case Ic:r.strict||et(t,e,n,s);break}n+=ee(s,4)}return n}function qe(t,e,n,r){const s=new Uint8Array(e.buffer,n,r),i=new TextDecoder("utf8").decode(s);return t.json=JSON.parse(i),ee(r,4)}function et(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),ee(r,4)}function jn(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const r=e.baseUri||e.uri;if(!r)throw new Error(`'baseUri' must be provided to resolve relative url ${t}`);return r.substr(0,r.lastIndexOf("/")+1)+t}const _c="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Oc="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",Lc=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Jc=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),xc={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Sc={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};async function Uc(t,e,n,r,s,o="NONE"){const i=await Hc();vc(i,i.exports[Sc[s]],t,e,n,r,i.exports[xc[o||"NONE"]])}let ve;async function Hc(){return ve||(ve=Nc()),ve}async function Nc(){let t=_c;WebAssembly.validate(Lc)&&(t=Oc,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=await WebAssembly.instantiate(Pc(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}function Pc(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){const s=t.charCodeAt(r);e[r]=s>96?s-71:s>64?s-65:s>47?s+4:s>46?63:62}let n=0;for(let r=0;r<t.length;++r)e[n++]=e[r]<60?Jc[e[r]]:(e[r]-60)*64+e[++r];return e.buffer.slice(0,n)}function vc(t,e,n,r,s,o,i){const c=t.exports.sbrk,a=r+3&-4,u=c(a*s),f=c(o.length),A=new Uint8Array(t.exports.memory.buffer);A.set(o,f);const l=e(u,r,s,f,o.length);if(l===0&&i&&i(u,a,s),n.set(A.subarray(u,u+r*s)),c(u-c(0)),l!==0)throw new Error(`Malformed buffer data: ${l}`)}const Ce="EXT_meshopt_compression",jc=Ce;async function Kc(t,e){const n=new y(t);if(!e?.gltf?.decompressMeshes||!e.gltf?.loadBuffers)return;const r=[];for(const s of t.json.bufferViews||[])r.push(kc(n,s));await Promise.all(r),n.removeExtension(Ce)}async function kc(t,e){const n=t.getObjectExtension(e,Ce);if(n){const{byteOffset:r=0,byteLength:s=0,byteStride:o,count:i,mode:c,filter:a="NONE",buffer:u}=n,f=t.gltf.buffers[u],A=new Uint8Array(f.arrayBuffer,f.byteOffset+r,s),l=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);await Uc(l,i,o,A,c,a),t.removeObjectExtension(e,Ce)}}const Qc=Object.freeze(Object.defineProperty({__proto__:null,decode:Kc,name:jc},Symbol.toStringTag,{value:"Module"})),k="EXT_texture_webp",Xc=k;function Yc(t,e){const n=new y(t);if(!vo("image/webp")){if(n.getRequiredExtensions().includes(k))throw new Error(`gltf: Required extension ${k} not supported by browser`);return}const{json:r}=n;for(const s of r.textures||[]){const o=n.getObjectExtension(s,k);o&&(s.source=o.source),n.removeObjectExtension(s,k)}n.removeExtension(k)}const Wc=Object.freeze(Object.defineProperty({__proto__:null,name:Xc,preprocess:Yc},Symbol.toStringTag,{value:"Module"})),Ae="KHR_texture_basisu",Vc=Ae;function $c(t,e){const n=new y(t),{json:r}=n;for(const s of r.textures||[]){const o=n.getObjectExtension(s,Ae);o&&(s.source=o.source,n.removeObjectExtension(s,Ae))}n.removeExtension(Ae)}const Zc=Object.freeze(Object.defineProperty({__proto__:null,name:Vc,preprocess:$c},Symbol.toStringTag,{value:"Module"})),zc="4.3.3",qc={dataType:null,batchType:null,name:"Draco",id:"draco",module:"draco",version:zc,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};function ea(t,e,n){const r=Kn(e.metadata),s=[],o=ta(e.attributes);for(const i in t){const c=t[i],a=$t(i,c,o[i]);s.push(a)}if(n){const i=$t("indices",n);s.push(i)}return{fields:s,metadata:r}}function ta(t){const e={};for(const n in t){const r=t[n];e[r.name||"undefined"]=r}return e}function $t(t,e,n){const r=n?Kn(n.metadata):void 0;return so(t,e,r)}function Kn(t){Object.entries(t);const e={};for(const n in t)e[`${n}.string`]=JSON.stringify(t[n]);return e}const Zt={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},na={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},ra=4;class sa{draco;decoder;metadataQuerier;constructor(e){this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){const r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const s=this.decoder.GetEncodedGeometryType(r),o=s===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let i;switch(s){case this.draco.TRIANGULAR_MESH:i=this.decoder.DecodeBufferToMesh(r,o);break;case this.draco.POINT_CLOUD:i=this.decoder.DecodeBufferToPointCloud(r,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!i.ok()||!o.ptr){const l=`DRACO decompression failed: ${i.error_msg()}`;throw new Error(l)}const c=this._getDracoLoaderData(o,s,n),a=this._getMeshData(o,c,n),u=ro(a.attributes),f=ea(a.attributes,c,a.indices);return{loader:"draco",loaderData:c,header:{vertexCount:o.num_points(),boundingBox:u},...a,schema:f}}finally{this.draco.destroy(r),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,r){const s=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,r);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:s,attributes:o}}_getDracoAttributes(e,n){const r={};for(let s=0;s<e.num_attributes();s++){const o=this.decoder.GetAttribute(e,s),i=this._getAttributeMetadata(e,s);r[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:s,metadata:i};const c=this._getQuantizationTransform(o,n);c&&(r[o.unique_id()].quantization_transform=c);const a=this._getOctahedronTransform(o,n);a&&(r[o.unique_id()].octahedron_transform=a)}return r}_getMeshData(e,n,r){const s=this._getMeshAttributes(n,e,r);if(!s.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?r.topology==="triangle-strip"?{topology:"triangle-strip",mode:4,attributes:s,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:s,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:s}}_getMeshAttributes(e,n,r){const s={};for(const o of Object.values(e.attributes)){const i=this._deduceAttributeName(o,r);o.name=i;const c=this._getAttributeValues(n,o);if(c){const{value:a,size:u}=c;s[i]={value:a,size:u,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}}return s}_getTriangleListIndices(e){const r=e.num_faces()*3,s=r*ra,o=this.draco._malloc(s);try{return this.decoder.GetTrianglesUInt32Array(e,s,o),new Uint32Array(this.draco.HEAPF32.buffer,o,r).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),ca(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const r=na[n.data_type];if(!r)return console.warn(`DRACO: Unsupported attribute type ${n.data_type}`),null;const s=n.num_components,i=e.num_points()*s,c=i*r.BYTES_PER_ELEMENT,a=oa(this.draco,r);let u;const f=this.draco._malloc(c);try{const A=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,A,a,c,f),u=new r(this.draco.HEAPF32.buffer,f,i).slice()}finally{this.draco._free(f)}return{value:u,size:s}}_deduceAttributeName(e,n){const r=e.unique_id;for(const[i,c]of Object.entries(n.extraAttributes||{}))if(c===r)return i;const s=e.attribute_type;for(const i in Zt)if(this.draco[i]===s)return Zt[i];const o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:`CUSTOM_ATTRIBUTE_${r}`}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const r=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(r)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},r=this.metadataQuerier.NumEntries(e);for(let s=0;s<r;s++){const o=this.metadataQuerier.GetEntryName(e,s);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){const r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,r);const s=ia(r);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:s}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:r=[]}=e,s=[...n,...r];for(const o of s)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){const{quantizedAttributes:r=[]}=n,s=e.attribute_type();if(r.map(i=>this.decoder[i]).includes(s)){const i=new this.draco.AttributeQuantizationTransform;try{if(i.InitFromAttribute(e))return{quantization_bits:i.quantization_bits(),range:i.range(),min_values:new Float32Array([1,2,3]).map(c=>i.min_value(c))}}finally{this.draco.destroy(i)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:r=[]}=n,s=e.attribute_type();if(r.map(i=>this.decoder[i]).includes(s)){const i=new this.draco.AttributeQuantizationTransform;try{if(i.InitFromAttribute(e))return{quantization_bits:i.quantization_bits()}}finally{this.draco.destroy(i)}}return null}}function oa(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function ia(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}function ca(t){const e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}const aa="1.5.6",ua="1.4.1",je=`https://www.gstatic.com/draco/versioned/decoders/${aa}`,E={DECODER:"draco_wasm_wrapper.js",DECODER_WASM:"draco_decoder.wasm",FALLBACK_DECODER:"draco_decoder.js",ENCODER:"draco_encoder.js"},Ke={[E.DECODER]:`${je}/${E.DECODER}`,[E.DECODER_WASM]:`${je}/${E.DECODER_WASM}`,[E.FALLBACK_DECODER]:`${je}/${E.FALLBACK_DECODER}`,[E.ENCODER]:`https://raw.githubusercontent.com/google/draco/${ua}/javascript/${E.ENCODER}`};let ke;async function fa(t){const e=t.modules||{};return e.draco3d?ke||=e.draco3d.createDecoderModule({}).then(n=>({draco:n})):ke||=Aa(t),await ke}async function Aa(t){let e,n;return(t.draco&&t.draco.decoderType)==="js"?e=await U(Ke[E.FALLBACK_DECODER],"draco",t,E.FALLBACK_DECODER):[e,n]=await Promise.all([await U(Ke[E.DECODER],"draco",t,E.DECODER),await U(Ke[E.DECODER_WASM],"draco",t,E.DECODER_WASM)]),e=e||globalThis.DracoDecoderModule,await la(e,n)}function la(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(r=>{t({...n,onModuleLoaded:s=>r({draco:s})})})}const Ba={...qc,parse:ha};async function ha(t,e){const{draco:n}=await fa(e),r=new sa(n);try{return r.parseSync(t,e?.draco)}finally{r.destroy()}}function da(t){const e={};for(const n in t){const r=t[n];if(n!=="indices"){const s=kn(r);e[n]=s}}return e}function kn(t){const{buffer:e,size:n,count:r}=Ca(t);return{value:e,size:n,byteOffset:0,count:r,type:_n(n),componentType:be(e)}}function Ca(t){let e=t,n=1,r=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=ga(e,Float32Array)),r=e.length/n),{buffer:e,size:n,count:r}}function ga(t,e,n=!1){return t?Array.isArray(t)?new e(t):n&&!(t instanceof e)?new e(t):t:null}const J="KHR_draco_mesh_compression",ma=J;function ya(t,e,n){const r=new y(t);for(const s of Qn(r))r.getObjectExtension(s,J)}async function Ea(t,e,n){if(!e?.gltf?.decompressMeshes)return;const r=new y(t),s=[];for(const o of Qn(r))r.getObjectExtension(o,J)&&s.push(pa(r,o,e,n));await Promise.all(s),r.removeExtension(J)}function ba(t,e={}){const n=new y(t);for(const r of n.json.meshes||[])Fa(r),n.addRequiredExtension(J)}async function pa(t,e,n,r){const s=t.getObjectExtension(e,J);if(!s)return;const o=t.getTypedArrayForBufferView(s.bufferView),i=An(o.buffer,o.byteOffset),c={...n};delete c["3d-tiles"];const a=await rn(i,Ba,c,r),u=da(a.attributes);for(const[f,A]of Object.entries(u))if(f in e.attributes){const l=e.attributes[f],B=t.getAccessor(l);B?.min&&B?.max&&(A.min=B.min,A.max=B.max)}e.attributes=u,a.indices&&(e.indices=kn(a.indices)),t.removeObjectExtension(e,J),Ia(e)}function Fa(t,e,n=4,r,s){if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=r.DracoWriter.encodeSync({attributes:t}),i=s?.parseSync?.({attributes:t}),c=r._addFauxAttributes(i.attributes),a=r.addBufferView(o);return{primitives:[{attributes:c,mode:n,extensions:{[J]:{bufferView:a,attributes:c}}}]}}function Ia(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*Qn(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const Ta=Object.freeze(Object.defineProperty({__proto__:null,decode:Ea,encode:ba,name:ma,preprocess:ya},Symbol.toStringTag,{value:"Module"})),Ma={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...Ma}};const M=globalThis.mathgl.config;function Da(t,{precision:e=M.precision}={}){return t=Ga(t),`${parseFloat(t.toPrecision(e))}`}function ge(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Xn(t,e,n){const r=M.EPSILON;try{if(t===e)return!0;if(ge(t)&&ge(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!Xn(t[s],e[s]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=M.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{M.EPSILON=r}}function Ga(t){return Math.round(t/M.EPSILON)*M.EPSILON}class Yn extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ge(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(M)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+Da(this[r],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Xn(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let s=0;s<this.ELEMENTS;++s){const o=e[s],i=typeof n=="number"?n:n[s];this[s]=o+r*(i-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(M.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function Ra(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function F(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function wa(t,e,n=""){if(M.debug&&!Ra(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function zt(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class _a extends Yn{get x(){return this[0]}set x(e){this[0]=F(e)}get y(){return this[1]}set y(e){this[1]=F(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const s=this[r]-e[r];n+=s*s}return F(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return F(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return zt(e>=0&&e<this.ELEMENTS,"index is out of range"),F(this[e])}setComponent(e,n){return zt(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}let me=typeof Float32Array<"u"?Float32Array:Array;function Oa(){const t=new me(2);return me!=Float32Array&&(t[0]=0,t[1]=0),t}function La(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[3]*s+n[6],t[1]=n[1]*r+n[4]*s+n[7],t}(function(){const t=Oa();return function(e,n,r,s,o,i){let c,a;for(n||(n=2),r||(r=0),s?a=Math.min(s*n+r,e.length):a=e.length,c=r;c<a;c+=n)t[0]=e[c],t[1]=e[c+1],o(t,t,i),e[c]=t[0],e[c+1]=t[1];return e}})();function Ja(t,e,n){const r=e[0],s=e[1],o=e[2],i=n[3]*r+n[7]*s+n[11]*o||1;return t[0]=(n[0]*r+n[4]*s+n[8]*o)/i,t[1]=(n[1]*r+n[5]*s+n[9]*o)/i,t[2]=(n[2]*r+n[6]*s+n[10]*o)/i,t}function xa(t,e,n){const r=e[0],s=e[1];return t[0]=n[0]*r+n[2]*s,t[1]=n[1]*r+n[3]*s,t[2]=e[2],t}function Sa(t,e,n){const r=e[0],s=e[1],o=e[2];return t[0]=n[0]*r+n[3]*s+n[6]*o,t[1]=n[1]*r+n[4]*s+n[7]*o,t[2]=n[2]*r+n[5]*s+n[8]*o,t[3]=e[3],t}function Ua(){const t=new me(3);return me!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Na(t,e,n){const r=e[0],s=e[1],o=e[2],i=n[0],c=n[1],a=n[2];return t[0]=s*a-o*c,t[1]=o*i-r*a,t[2]=r*c-s*i,t}function Pa(t,e,n){const r=e[0],s=e[1],o=e[2];let i=n[3]*r+n[7]*s+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*s+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*s+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*s+n[10]*o+n[14])/i,t}function Wn(t,e,n){const r=e[0],s=e[1],o=e[2];return t[0]=r*n[0]+s*n[3]+o*n[6],t[1]=r*n[1]+s*n[4]+o*n[7],t[2]=r*n[2]+s*n[5]+o*n[8],t}function va(t,e,n){const r=n[0],s=n[1],o=n[2],i=n[3],c=e[0],a=e[1],u=e[2];let f=s*u-o*a,A=o*c-r*u,l=r*a-s*c,B=s*l-o*A,h=o*f-r*l,d=r*A-s*f;const g=i*2;return f*=g,A*=g,l*=g,B*=2,h*=2,d*=2,t[0]=c+f+B,t[1]=a+A+h,t[2]=u+l+d,t}function ja(t,e,n,r){const s=[],o=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],o[0]=s[0],o[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),o[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Ka(t,e,n,r){const s=[],o=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],o[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),o[1]=s[1],o[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function ka(t,e,n,r){const s=[],o=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],o[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),o[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),o[2]=s[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Qa(t,e){const n=t[0],r=t[1],s=t[2],o=e[0],i=e[1],c=e[2],a=Math.sqrt((n*n+r*r+s*s)*(o*o+i*i+c*c)),u=a&&Ha(t,e)/a;return Math.acos(Math.min(Math.max(u,-1),1))}(function(){const t=Ua();return function(e,n,r,s,o,i){let c,a;for(n||(n=3),r||(r=0),s?a=Math.min(s*n+r,e.length):a=e.length,c=r;c<a;c+=n)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],o(t,t,i),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();const Qe=[0,0,0];let ie;class Ct extends _a{static get ZERO(){return ie||(ie=new Ct(0,0,0),Object.freeze(ie)),ie}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&ge(e)?this.copy(e):(M.debug&&(F(e),F(n),F(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return M.debug&&(F(e.x),F(e.y),F(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=F(e)}angle(e){return Qa(this,e)}cross(e){return Na(this,this,e),this.check()}rotateX({radians:e,origin:n=Qe}){return ja(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Qe}){return Ka(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Qe}){return ka(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Pa(this,this,e),this.check()}transformAsVector(e){return Ja(this,this,e),this.check()}transformByMatrix3(e){return Wn(this,this,e),this.check()}transformByMatrix2(e){return xa(this,this,e),this.check()}transformByQuaternion(e){return va(this,this,e),this.check()}}class Xa extends Yn{toString(){let e="[";if(M.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=F(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)n[s]=this[r+s];return n}setColumn(e,n){const r=e*this.RANK;for(let s=0;s<this.RANK;++s)this[r+s]=n[s];return this}}function Ya(t,e){if(t===e){const n=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Wa(t,e){const n=e[0],r=e[1],s=e[2],o=e[3],i=e[4],c=e[5],a=e[6],u=e[7],f=e[8],A=f*i-c*u,l=-f*o+c*a,B=u*o-i*a;let h=n*A+r*l+s*B;return h?(h=1/h,t[0]=A*h,t[1]=(-f*r+s*u)*h,t[2]=(c*r-s*i)*h,t[3]=l*h,t[4]=(f*n-s*a)*h,t[5]=(-c*n+s*o)*h,t[6]=B*h,t[7]=(-u*n+r*a)*h,t[8]=(i*n-r*o)*h,t):null}function Va(t){const e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],i=t[5],c=t[6],a=t[7],u=t[8];return e*(u*o-i*a)+n*(-u*s+i*c)+r*(a*s-o*c)}function qt(t,e,n){const r=e[0],s=e[1],o=e[2],i=e[3],c=e[4],a=e[5],u=e[6],f=e[7],A=e[8],l=n[0],B=n[1],h=n[2],d=n[3],g=n[4],b=n[5],D=n[6],O=n[7],W=n[8];return t[0]=l*r+B*i+h*u,t[1]=l*s+B*c+h*f,t[2]=l*o+B*a+h*A,t[3]=d*r+g*i+b*u,t[4]=d*s+g*c+b*f,t[5]=d*o+g*a+b*A,t[6]=D*r+O*i+W*u,t[7]=D*s+O*c+W*f,t[8]=D*o+O*a+W*A,t}function $a(t,e,n){const r=e[0],s=e[1],o=e[2],i=e[3],c=e[4],a=e[5],u=e[6],f=e[7],A=e[8],l=n[0],B=n[1];return t[0]=r,t[1]=s,t[2]=o,t[3]=i,t[4]=c,t[5]=a,t[6]=l*r+B*i+u,t[7]=l*s+B*c+f,t[8]=l*o+B*a+A,t}function Za(t,e,n){const r=e[0],s=e[1],o=e[2],i=e[3],c=e[4],a=e[5],u=e[6],f=e[7],A=e[8],l=Math.sin(n),B=Math.cos(n);return t[0]=B*r+l*i,t[1]=B*s+l*c,t[2]=B*o+l*a,t[3]=B*i-l*r,t[4]=B*c-l*s,t[5]=B*a-l*o,t[6]=u,t[7]=f,t[8]=A,t}function en(t,e,n){const r=n[0],s=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function za(t,e){const n=e[0],r=e[1],s=e[2],o=e[3],i=n+n,c=r+r,a=s+s,u=n*i,f=r*i,A=r*c,l=s*i,B=s*c,h=s*a,d=o*i,g=o*c,b=o*a;return t[0]=1-A-h,t[3]=f-b,t[6]=l+g,t[1]=f+b,t[4]=1-u-h,t[7]=B-d,t[2]=l-g,t[5]=B+d,t[8]=1-u-A,t}var tt;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(tt||(tt={}));const qa=Object.freeze([1,0,0,0,1,0,0,0,1]);class re extends Xa{static get IDENTITY(){return tu()}static get ZERO(){return eu()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return tt}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(qa)}fromObject(e){return this.check()}fromQuaternion(e){return za(this,e),this.check()}set(e,n,r,s,o,i,c,a,u){return this[0]=e,this[1]=n,this[2]=r,this[3]=s,this[4]=o,this[5]=i,this[6]=c,this[7]=a,this[8]=u,this.check()}setRowMajor(e,n,r,s,o,i,c,a,u){return this[0]=e,this[1]=s,this[2]=c,this[3]=n,this[4]=o,this[5]=a,this[6]=r,this[7]=i,this[8]=u,this.check()}determinant(){return Va(this)}transpose(){return Ya(this,this),this.check()}invert(){return Wa(this,this),this.check()}multiplyLeft(e){return qt(this,e,this),this.check()}multiplyRight(e){return qt(this,this,e),this.check()}rotate(e){return Za(this,this,e),this.check()}scale(e){return Array.isArray(e)?en(this,this,e):en(this,this,[e,e]),this.check()}translate(e){return $a(this,this,e),this.check()}transform(e,n){let r;switch(e.length){case 2:r=La(n||[-0,-0],e,this);break;case 3:r=Wn(n||[-0,-0,-0],e,this);break;case 4:r=Sa(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return wa(r,e.length),r}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let ce,ae=null;function eu(){return ce||(ce=new re([0,0,0,0,0,0,0,0,0]),Object.freeze(ce)),ce}function tu(){return ae||(ae=new re,Object.freeze(ae)),ae}const Ie="KHR_texture_transform",nu=Ie,ue=new Ct,ru=new re,su=new re;async function ou(t,e){if(!new y(t).hasExtension(Ie)||!e.gltf?.loadBuffers)return;const s=t.json.materials||[];for(let o=0;o<s.length;o++)iu(o,t)}function iu(t,e){const n=e.json.materials?.[t],r=[n?.pbrMetallicRoughness?.baseColorTexture,n?.emissiveTexture,n?.normalTexture,n?.occlusionTexture,n?.pbrMetallicRoughness?.metallicRoughnessTexture],s=[];for(const o of r)o&&o?.extensions?.[Ie]&&cu(e,t,o,s)}function cu(t,e,n,r){const s=au(n,r);if(!s)return;const o=t.json.meshes||[];for(const i of o)for(const c of i.primitives){const a=c.material;Number.isFinite(a)&&e===a&&uu(t,c,s)}}function au(t,e){const n=t.extensions?.[Ie],{texCoord:r=0}=t,{texCoord:s=r}=n;if(!(e.findIndex(([i,c])=>i===r&&c===s)!==-1)){const i=lu(n);return r!==s&&(t.texCoord=s),e.push([r,s]),{originalTexCoord:r,texCoord:s,matrix:i}}return null}function uu(t,e,n){const{originalTexCoord:r,texCoord:s,matrix:o}=n,i=e.attributes[`TEXCOORD_${r}`];if(Number.isFinite(i)){const c=t.json.accessors?.[i];if(c&&c.bufferView){const a=t.json.bufferViews?.[c.bufferView];if(a){const{arrayBuffer:u,byteOffset:f}=t.buffers[a.buffer],A=(f||0)+(c.byteOffset||0)+(a.byteOffset||0),{ArrayType:l,length:B}=On(c,a),h=wn[c.componentType],d=Rn[c.type],g=a.byteStride||h*d,b=new Float32Array(B);for(let D=0;D<c.count;D++){const O=new l(u,A+D*g,2);ue.set(O[0],O[1],1),ue.transformByMatrix3(o),b.set([ue[0],ue[1]],D*d)}r===s?fu(c,a,t.buffers,b):Au(s,c,e,t,b)}}}}function fu(t,e,n,r){t.componentType=5126,n.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=r.buffer.byteLength,e.byteOffset=0,delete e.byteStride}function Au(t,e,n,r,s){r.buffers.push({arrayBuffer:s.buffer,byteOffset:0,byteLength:s.buffer.byteLength});const o=r.json.bufferViews;if(!o)return;o.push({buffer:r.buffers.length-1,byteLength:s.buffer.byteLength,byteOffset:0});const i=r.json.accessors;i&&(i.push({bufferView:o?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes[`TEXCOORD_${t}`]=i.length-1)}function lu(t){const{offset:e=[0,0],rotation:n=0,scale:r=[1,1]}=t,s=new re().set(1,0,0,0,1,0,e[0],e[1],1),o=ru.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),i=su.set(r[0],0,0,0,r[1],0,0,0,1);return s.multiplyRight(o).multiplyRight(i)}const Bu=Object.freeze(Object.defineProperty({__proto__:null,decode:ou,name:nu},Symbol.toStringTag,{value:"Module"})),S="KHR_lights_punctual",hu=S;async function du(t){const e=new y(t),{json:n}=e,r=e.getExtension(S);r&&(e.json.lights=r.lights,e.removeExtension(S));for(const s of n.nodes||[]){const o=e.getObjectExtension(s,S);o&&(s.light=o.light),e.removeObjectExtension(s,S)}}async function Cu(t){const e=new y(t),{json:n}=e;if(n.lights){const r=e.addExtension(S);I(!r.lights),r.lights=n.lights,delete n.lights}if(e.json.lights){for(const r of e.json.lights){const s=r.node;e.addObjectExtension(s,S,r)}delete e.json.lights}}const gu=Object.freeze(Object.defineProperty({__proto__:null,decode:du,encode:Cu,name:hu},Symbol.toStringTag,{value:"Module"})),q="KHR_materials_unlit",mu=q;async function yu(t){const e=new y(t),{json:n}=e;for(const r of n.materials||[])r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,q);e.removeExtension(q)}function Eu(t){const e=new y(t),{json:n}=e;if(e.materials)for(const r of n.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,q,{}),e.addExtension(q))}const bu=Object.freeze(Object.defineProperty({__proto__:null,decode:yu,encode:Eu,name:mu},Symbol.toStringTag,{value:"Module"})),$="KHR_techniques_webgl",pu=$;async function Fu(t){const e=new y(t),{json:n}=e,r=e.getExtension($);if(r){const s=Tu(r,e);for(const o of n.materials||[]){const i=e.getObjectExtension(o,$);i&&(o.technique=Object.assign({},i,s[i.technique]),o.technique.values=Mu(o.technique,e)),e.removeObjectExtension(o,$)}e.removeExtension($)}}async function Iu(t,e){}function Tu(t,e){const{programs:n=[],shaders:r=[],techniques:s=[]}=t,o=new TextDecoder;return r.forEach(i=>{if(Number.isFinite(i.bufferView))i.code=o.decode(e.getTypedArrayForBufferView(i.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(i=>{i.fragmentShader=r[i.fragmentShader],i.vertexShader=r[i.vertexShader]}),s.forEach(i=>{i.program=n[i.program]}),s}function Mu(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(r=>{t.uniforms[r].value&&!(r in n)&&(n[r]=t.uniforms[r].value)}),Object.keys(n).forEach(r=>{typeof n[r]=="object"&&n[r].index!==void 0&&(n[r].texture=e.getTexture(n[r].index))}),n}const Du=Object.freeze(Object.defineProperty({__proto__:null,decode:Fu,encode:Iu,name:pu},Symbol.toStringTag,{value:"Module"})),Vn=[Pi,Ai,Qc,Wc,Zc,Ta,gu,bu,Du,Bu,rc];function Gu(t,e={},n){const r=Vn.filter(s=>$n(s.name,e));for(const s of r)s.preprocess?.(t,e,n)}async function Ru(t,e={},n){const r=Vn.filter(s=>$n(s.name,e));for(const s of r)await s.decode?.(t,e,n)}function $n(t,e){const n=e?.gltf?.excludeExtensions||{};return!(t in n&&!n[t])}const Xe="KHR_binary_glTF";function wu(t){const e=new y(t),{json:n}=e;for(const r of n.images||[]){const s=e.getObjectExtension(r,Xe);s&&Object.assign(r,s),e.removeObjectExtension(r,Xe)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(Xe)}const tn={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},_u={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class Ou{idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}};json;normalize(e,n){this.json=e.json;const r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn(`glTF: Unknown version ${r.asset.version}`);return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),wu(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in tn)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const r=e[n];if(!(!r||Array.isArray(r))){e[n]=[];for(const s in r){const o=r[s];o.id=o.id||s;const i=e[n].length;e[n].push(o),this.idToIndexMap[n][s]=i}}}_convertObjectIdsToArrayIndices(e){for(const n in tn)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:r,indices:s,material:o}=n;for(const i in r)r[i]=this._convertIdToIndex(r[i],"accessor");s&&(n.indices=this._convertIdToIndex(s,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn(`gltf v1: json doesn't contain attribute ${n}`),e[n]=[]);for(const r of e[n])for(const s in r){const o=r[s],i=this._convertIdToIndex(o,s);r[s]=i}}_convertIdToIndex(e,n){const r=_u[n];if(r in this.idToIndexMap){const s=this.idToIndexMap[r][e];if(!Number.isFinite(s))throw new Error(`gltf v1: failed to resolve ${n} with id ${e}`);return s}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const n of e.materials){n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const r=n.values?.tex||n.values?.texture2d_0||n.values?.diffuseTex,s=e.textures.findIndex(o=>o.id===r);s!==-1&&(n.pbrMetallicRoughness.baseColorTexture={index:s})}}}function Lu(t,e={}){return new Ou().normalize(t,e)}async function Ju(t,e,n=0,r,s){return xu(t,e,n,r),Lu(t,{normalize:r?.gltf?.normalize}),Gu(t,r,s),r?.gltf?.loadBuffers&&t.json.buffers&&await Su(t,r,s),r?.gltf?.loadImages&&await Uu(t,r,s),await Ru(t,r,s),t}function xu(t,e,n,r){if(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!Mc(e,n,r)&&(e=new TextDecoder().decode(e)),typeof e=="string")t.json=Yr(e);else if(e instanceof ArrayBuffer){const i={};n=Dc(i,e,n,r.glb),I(i.type==="glTF",`Invalid GLB magic string ${i.type}`),t._glb=i,t.json=i.json}else I(!1,"GLTF: must be ArrayBuffer or string");const s=t.json.buffers||[];if(t.buffers=new Array(s.length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:i}=t._glb;t.buffers[0]={arrayBuffer:i[0].arrayBuffer,byteOffset:i[0].byteOffset,byteLength:i[0].byteLength}}const o=t.json.images||[];t.images=new Array(o.length).fill({})}async function Su(t,e,n){const r=t.json.buffers||[];for(let s=0;s<r.length;++s){const o=r[s];if(o.uri){const{fetch:i}=n;I(i);const c=jn(o.uri,e),u=await(await n?.fetch?.(c))?.arrayBuffer?.();t.buffers[s]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete o.uri}else t.buffers[s]===null&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(o.byteLength),byteOffset:0,byteLength:o.byteLength})}}async function Uu(t,e,n){const r=Hu(t),s=t.json.images||[],o=[];for(const i of r)o.push(Nu(t,s[i],i,e,n));return await Promise.all(o)}function Hu(t){const e=new Set,n=t.json.textures||[];for(const r of n)r.source!==void 0&&e.add(r.source);return Array.from(e).sort()}async function Nu(t,e,n,r,s){let o;if(e.uri&&!e.hasOwnProperty("bufferView")){const c=jn(e.uri,r),{fetch:a}=s;o=await(await a(c)).arrayBuffer(),e.bufferView={data:o}}if(Number.isFinite(e.bufferView)){const c=$o(t.json,t.buffers,e.bufferView);o=An(c.buffer,c.byteOffset,c.byteLength)}I(o,"glTF image has no data");let i=await rn(o,[Po,yc],{...r,mimeType:e.mimeType,basis:r.basis||{format:vn()}},s);i&&i[0]&&(i={compressed:!0,mipmaps:!1,width:i[0].width,height:i[0].height,data:i[0]}),t.images=t.images||[],t.images[n]=i}const nt={dataType:null,batchType:null,name:"glTF",id:"gltf",module:"gltf",version:sc,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:Pu,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}};async function Pu(t,e={},n){e={...nt.options,...e},e.gltf={...nt.options.gltf,...e.gltf};const{byteOffset:r=0}=e;return await Ju({},t,r,e,n)}const Ye=tr(),vu=`#version 300 es
layout(location=0) in vec3 a_position;
layout(location=1) in vec2 a_barycenter;
layout(location=2) in vec3 a_normal;

uniform mat4 u_worldViewProjection;
uniform mat4 u_world;

out vec2 v_barycenter;
out vec3 v_normal;

void main() {
   gl_Position = u_worldViewProjection * vec4(a_position, 1.0);
   v_barycenter = a_barycenter;
   v_normal = mat3(u_world) * a_normal;
}
`,ju=`#version 300 es
precision highp float;

in vec2 v_barycenter;
in vec3 v_normal;

uniform vec3 u_faceColor;
uniform vec3 u_edgeColor;

out vec4 v_outColor;

float gridFactor (vec2 vBC, float width) {
  vec3 bary = vec3(vBC.x, vBC.y, 1.0 - vBC.x - vBC.y);
  vec3 d = fwidth(bary);
  vec3 a3 = smoothstep(d * (width - 0.5), d * (width + 0.5), bary);
  return min(min(a3.x, a3.y), a3.z);
}

void main() {
  // simple cel shading: 2 levels based on normal facing up
  vec3 lightDir = normalize(vec3(0.5, 1.0, 0.5));
  float ndotl = dot(normalize(v_normal), lightDir);
  float shade = ndotl > 0.0 ? 1.0 : 0.7;
  
  float edge = 1.0 - gridFactor(v_barycenter, 1.5);
  vec3 color = mix(u_faceColor * shade, u_edgeColor, edge);
  v_outColor = vec4(color, 1.0);
}
`;function Ku(){const t=[],e=[],n=[{verts:[[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]],normal:[0,0,1]},{verts:[[1,-1,-1],[-1,-1,-1],[-1,1,-1],[1,1,-1]],normal:[0,0,-1]},{verts:[[-1,1,1],[1,1,1],[1,1,-1],[-1,1,-1]],normal:[0,1,0]},{verts:[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1]],normal:[0,-1,0]},{verts:[[1,-1,1],[1,-1,-1],[1,1,-1],[1,1,1]],normal:[1,0,0]},{verts:[[-1,-1,-1],[-1,-1,1],[-1,1,1],[-1,1,-1]],normal:[-1,0,0]}];for(const r of n){const[s,o,i,c]=r.verts,a=r.normal,u=.5;t.push(m(s[0]*u,s[1]*u,s[2]*u)),t.push(m(o[0]*u,o[1]*u,o[2]*u)),t.push(m(i[0]*u,i[1]*u,i[2]*u)),e.push(m(a[0],a[1],a[2])),e.push(m(a[0],a[1],a[2])),e.push(m(a[0],a[1],a[2])),t.push(m(s[0]*u,s[1]*u,s[2]*u)),t.push(m(i[0]*u,i[1]*u,i[2]*u)),t.push(m(c[0]*u,c[1]*u,c[2]*u)),e.push(m(a[0],a[1],a[2])),e.push(m(a[0],a[1],a[2])),e.push(m(a[0],a[1],a[2]))}return{positions:t,normals:e}}function ku(t=.5,e=.2,n=24,r=16){const s=[],o=[];for(let i=0;i<n;i++)for(let c=0;c<r;c++){const a=i/n*2*Math.PI,u=(i+1)/n*2*Math.PI,f=c/r*2*Math.PI,A=(c+1)/r*2*Math.PI,l=(V,x)=>{const Te=(t+e*Math.cos(x))*Math.cos(V),Me=(t+e*Math.cos(x))*Math.sin(V),De=e*Math.sin(x);return m(Te,Me,De)},B=(V,x)=>{const Te=Math.cos(x)*Math.cos(V),Me=Math.cos(x)*Math.sin(V),De=Math.sin(x);return m(Te,Me,De)},h=l(a,f),d=l(u,f),g=l(a,A),b=l(u,A),D=B(a,f),O=B(u,f),W=B(a,A),gt=B(u,A);s.push(h,d,b),o.push(D,O,gt),s.push(h,b,g),o.push(D,gt,W)}return{positions:s,normals:o}}function Qu(){const t=nr(),e=[];for(const n of t){const r=nn(G(),n);e.push(r)}return{positions:t,normals:e}}function Xu(t,e){const n=[],r=[[1,0],[0,1],[0,0]];for(let s=0;s<t.length;s++){const o=t[s],i=e[s],c=r[s%3];n.push(o[0],o[1],o[2],c[0],c[1],i[0],i[1],i[2])}return new Float32Array(n)}class Yu extends fe.Component{constructor(e){super(e),this.canvas=fe.createRef(),this.fileInput=fe.createRef(),this.vertexCount=0,this.customMesh=null,this.loadShape=n=>{let r,s;switch(n){case"cube":const f=Ku();r=f.positions,s=f.normals;break;case"torus":const A=ku();r=A.positions,s=A.normals;break;case"custom":if(!this.customMesh){console.warn("No custom mesh loaded");return}r=this.customMesh.positions,s=this.customMesh.normals;break;default:const l=Qu();r=l.positions,s=l.normals;break}const o=Xu(r,s);this.vertexCount=r.length,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.STATIC_DRAW);const i=0,c=1,a=2,u=32;this.gl.enableVertexAttribArray(i),this.gl.vertexAttribPointer(i,3,this.gl.FLOAT,!1,u,0),this.gl.enableVertexAttribArray(c),this.gl.vertexAttribPointer(c,2,this.gl.FLOAT,!1,u,12),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,3,this.gl.FLOAT,!1,u,20)},this.handleShapeChange=n=>{if(n==="custom"&&!this.customMesh){this.fileInput.current?.click();return}this.setState({selectedShape:n}),this.loadShape(n)},this.handleFileLoad=async n=>{const r=n.target.files?.[0];if(r){try{const s=await io(r,nt),o=this.extractMeshFromGLTF(s);o?(this.customMesh=o,this.setState({selectedShape:"custom",customMeshName:r.name}),this.loadShape("custom")):console.error("No mesh data found in GLTF")}catch(s){console.error("Error loading GLTF:",s)}n.target.value=""}},this.extractMeshFromGLTF=n=>{const r=[],s=[],o=n.meshes||[];for(const c of o)for(const a of c.primitives||[]){const u=a.attributes?.POSITION,f=a.attributes?.NORMAL,A=a.indices;if(!u?.value)continue;const l=u.value,B=f?.value,h=A?.value;if(h)for(let d=0;d<h.length;d++){const g=h[d];r.push(m(l[g*3],l[g*3+1],l[g*3+2])),B&&s.push(m(B[g*3],B[g*3+1],B[g*3+2]))}else for(let d=0;d<l.length;d+=3)r.push(m(l[d],l[d+1],l[d+2])),B&&s.push(m(B[d],B[d+1],B[d+2]))}if(r.length===0)return null;if(s.length===0)for(let c=0;c<r.length;c+=3){const a=r[c],u=r[c+1],f=r[c+2],A=se(G(),u,a),l=se(G(),f,a),B=nn(G(),sr(G(),A,l));s.push(we(B),we(B),we(B))}return{positions:this.normalizeMesh(r),normals:s}},this.normalizeMesh=n=>{const r=m(1/0,1/0,1/0),s=m(-1/0,-1/0,-1/0);for(const u of n)or(r,r,u),ir(s,s,u);const o=yt(G(),cr(G(),r,s),.5),i=se(G(),s,r),c=Math.max(i[0],i[1],i[2]),a=c>0?1/c:1;return n.map(u=>{const f=se(G(),u,o);return yt(G(),f,a)})},this.animationLoop=()=>{if(this.requestID=window.requestAnimationFrame(this.animationLoop),this.camera.update(),!this.vis.isVisible())return;const n=Re(Ye.bg0).gl().slice(0,3);this.gl.clearColor(n[0],n[1],n[2],1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);const r=this.camera.getTrackballCameraMatrix(this.props.width,this.props.height);this.gl.uniformMatrix4fv(this.worldViewProjectionLoc,!1,r),this.gl.uniformMatrix4fv(this.worldLoc,!1,r),this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertexCount)},this.state={selectedShape:"icosahedron",customMeshName:null}}componentDidMount(){this.camera=new er(this.canvas.current,{rotation:ar(ur(),0,.1,0),enableZoom:!0}),this.vis=new rr(this.canvas.current),this.gl=this.canvas.current.getContext("webgl2"),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.program=qn(this.gl,[mt(this.gl,this.gl.VERTEX_SHADER,vu),mt(this.gl,this.gl.FRAGMENT_SHADER,ju)]),this.worldViewProjectionLoc=this.gl.getUniformLocation(this.program,"u_worldViewProjection"),this.worldLoc=this.gl.getUniformLocation(this.program,"u_world"),this.faceColorLoc=this.gl.getUniformLocation(this.program,"u_faceColor"),this.edgeColorLoc=this.gl.getUniformLocation(this.program,"u_edgeColor"),this.buffer=this.gl.createBuffer(),this.gl.useProgram(this.program),this.gl.uniform3fv(this.faceColorLoc,Re(Ye.blue).gl().slice(0,3)),this.gl.uniform3fv(this.edgeColorLoc,Re(Ye.fg1).gl().slice(0,3)),this.loadShape(this.state.selectedShape),this.animationLoop()}componentWillUnmount(){window.cancelAnimationFrame(this.requestID),this.camera.cleanup(),this.vis.cleanup()}render(){const{selectedShape:e,customMeshName:n}=this.state,r=["cube","icosahedron","torus"];return C.jsxs("div",{style:this.props.style,className:this.props.className,children:[C.jsx("canvas",{ref:this.canvas,height:this.props.height,width:this.props.width,style:{display:"block",margin:"0 auto"}}),C.jsx("input",{ref:this.fileInput,type:"file",accept:".gltf,.glb",onChange:this.handleFileLoad,style:{display:"none"}}),C.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1rem",fontFamily:"monospace",flexWrap:"wrap"},children:[r.map(s=>C.jsx("button",{onClick:()=>this.handleShapeChange(s),className:`btn btn-secondary ${e===s?"active":""}`,style:{transition:"all 0.15s ease"},children:s},s)),C.jsx("button",{onClick:()=>this.fileInput.current?.click(),className:`btn btn-secondary ${e==="custom"?"active":""}`,style:{transition:"all 0.15s ease"},children:n||"load gltf..."})]})]})}}const Wu=()=>C.jsx(zn,{children:({Citation:t,CitationBank:e})=>C.jsxs(C.Fragment,{children:[C.jsxs(Ge,{id:"overview",name:"Overview",children:[C.jsx("p",{children:"In this article, we're going to demo the differences between several different cel-shading and edge coloring algorithms."}),C.jsx("p",{children:"Cel shading (also known as toon shading) is a non-photorealistic rendering technique that makes 3D graphics appear flat and cartoon-like. Combined with edge detection and outline rendering, it can create striking visual styles reminiscent of hand-drawn animation or comic books."}),C.jsx("p",{children:"We'll explore various approaches including:"}),C.jsxs("ul",{children:[C.jsx("li",{children:"Classic quantized diffuse shading"}),C.jsx("li",{children:"Sobel-based edge detection"}),C.jsx("li",{children:"Normal-based edge detection"}),C.jsx("li",{children:"Depth-based edge detection"}),C.jsx("li",{children:"Fresnel rim lighting effects"})]})]}),C.jsx(Ge,{id:"demo",name:"Demo",children:C.jsx(Yu,{width:400,height:400})}),C.jsx(Ge,{id:"sources",name:"Sources",children:C.jsx(e,{})})]})}),Vu=Zn.createRoot(document.getElementById("root"));Vu.render(C.jsx(fe.StrictMode,{children:C.jsx(Wu,{})}));
