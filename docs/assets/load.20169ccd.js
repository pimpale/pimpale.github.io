import{a as _,j as l,F as j}from"./bootstrap.eb315efa.js";const y=(()=>typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global||typeof global=="object"&&global.GLOBAL===global?global:{})();y.__REACT_ASYNC__=y.__REACT_ASYNC__||{};const G=()=>{};class W{constructor(){this.abort=G,this.signal={}}}let n;try{n=require("prop-types")}catch{}const f=n&&n.oneOfType([n.node,n.func]),m=n&&n.shape({initialValue:n.any,data:n.any,error:n.instanceOf(Error),value:n.any,startedAt:n.instanceOf(Date),finishedAt:n.instanceOf(Date),status:n.oneOf(["initial","pending","fulfilled","rejected"]),isInitial:n.bool,isPending:n.bool,isLoading:n.bool,isFulfilled:n.bool,isResolved:n.bool,isRejected:n.bool,isSettled:n.bool,counter:n.number,promise:n.instanceOf(Promise),run:n.func,reload:n.func,cancel:n.func,setData:n.func,setError:n.func});var h=n&&{Async:{children:f,promise:n.instanceOf(Promise),promiseFn:n.func,deferFn:n.func,watch:n.any,watchFn:n.func,initialValue:n.any,onResolve:n.func,onReject:n.func,reducer:n.func,dispatcher:n.func,debugLabel:n.string,suspense:n.bool},Initial:{children:f,state:m.isRequired,persist:n.bool},Pending:{children:f,state:m.isRequired,initial:n.bool},Fulfilled:{children:f,state:m.isRequired,persist:n.bool},Rejected:{children:f,state:m.isRequired,persist:n.bool},Settled:{children:f,state:m.isRequired,persist:n.bool}};const R=(e,...i)=>typeof e=="function"?e(...i):e,$=({children:e,persist:i,state:r={}})=>l(j,{children:r.isInitial||i&&!r.data?R(e,r):null}),q=({children:e,initial:i,state:r={}})=>l(j,{children:r.isPending&&(!i||!r.value)?R(e,r):null}),N=({children:e,persist:i,state:r={}})=>l(j,{children:r.isFulfilled||i&&r.data?R(e,r.data,r):null}),U=({children:e,persist:i,state:r={}})=>l(j,{children:r.isRejected||i&&r.error?R(e,r.error,r):null}),Y=({children:e,persist:i,state:r={}})=>l(j,{children:r.isSettled||i&&r.value?R(e,r):null});h&&($.propTypes=h.Initial,q.propTypes=h.Pending,N.propTypes=h.Fulfilled,U.propTypes=h.Rejected,Y.propTypes=h.Settled);var o;(function(e){e.initial="initial",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"})(o||(o={}));const z=(e,i)=>e instanceof Error?o.rejected:e!==void 0?o.fulfilled:i?o.pending:o.initial,H=e=>e instanceof Error?o.rejected:e!==void 0?o.fulfilled:o.initial,g=e=>({status:e,isInitial:e===o.initial,isPending:e===o.pending,isLoading:e===o.pending,isFulfilled:e===o.fulfilled,isResolved:e===o.fulfilled,isRejected:e===o.rejected,isSettled:e===o.fulfilled||e===o.rejected}),F=function(){};Object.setPrototypeOf?Object.setPrototypeOf(F,Promise):F.__proto__=Promise;F.prototype=Object.assign(Object.create(Promise.prototype),{finally(){return this},catch(){return this},then(){return this}});const P=new F;var d;(function(e){e.start="start",e.cancel="cancel",e.fulfill="fulfill",e.reject="reject"})(d||(d={}));const J=({initialValue:e,promise:i,promiseFn:r})=>({initialValue:e,data:e instanceof Error?void 0:e,error:e instanceof Error?e:void 0,value:e,startedAt:i||r?new Date:void 0,finishedAt:e?new Date:void 0,...g(z(e,i||r)),counter:0,promise:P}),O=(e,i)=>{switch(i.type){case d.start:return{...e,startedAt:new Date,finishedAt:void 0,...g(o.pending),counter:i.meta.counter,promise:i.meta.promise};case d.cancel:return{...e,startedAt:void 0,finishedAt:void 0,...g(H(e.error||e.data)),counter:i.meta.counter,promise:i.meta.promise};case d.fulfill:return{...e,data:i.payload,value:i.payload,error:void 0,finishedAt:new Date,...g(o.fulfilled),promise:i.meta.promise};case d.reject:return{...e,error:i.payload,value:i.payload,finishedAt:new Date,...g(o.rejected),promise:i.meta.promise};default:return e}},K=e=>(i,...r)=>{e(i,...r),i.type===d.start&&typeof i.payload=="function"&&i.payload()};class Z extends _.Component{}function Q(e={},i="Async"){const{Consumer:r,Provider:D}=_.createContext(void 0);function p({children:a}){return l(r,{children:t=>{if(!t)throw new Error("this component should only be used within an associated <Async> component!");return a(t)}})}class I extends _.Component{constructor(t){super(t),this.mounted=!1,this.counter=0,this.args=[],this.promise=P,this.abortController=new W,this.start=this.start.bind(this),this.load=this.load.bind(this),this.run=this.run.bind(this),this.cancel=this.cancel.bind(this),this.onResolve=this.onResolve.bind(this),this.onReject=this.onReject.bind(this),this.setData=this.setData.bind(this),this.setError=this.setError.bind(this);const s=t.promise,c=t.promiseFn||e.promiseFn,u=t.initialValue||e.initialValue;this.state={...J({initialValue:u,promise:s,promiseFn:c}),cancel:this.cancel,run:this.run,reload:()=>{this.load(),this.run(...this.args)},setData:this.setData,setError:this.setError},this.debugLabel=t.debugLabel||e.debugLabel;const{devToolsDispatcher:A}=y.__REACT_ASYNC__,T=t.reducer||e.reducer,x=t.dispatcher||e.dispatcher||A,k=T?(b,w)=>T(b,w,O):O,M=K((b,w)=>{this.setState(B=>k(B,b),w)});this.dispatch=x?b=>x(b,M,t):M}componentDidMount(){this.mounted=!0,(this.props.promise||!this.state.initialValue)&&this.load()}componentDidUpdate(t){const{watch:s,watchFn:c=e.watchFn,promise:u,promiseFn:A}=this.props;if(s!==t.watch)return this.counter&&this.cancel(),this.load();if(c&&c({...e,...this.props},{...e,...t}))return this.counter&&this.cancel(),this.load();if(u!==t.promise&&(this.counter&&this.cancel(),u))return this.load();if(A!==t.promiseFn&&(this.counter&&this.cancel(),A))return this.load()}componentWillUnmount(){this.cancel(),this.mounted=!1}getMeta(t){return{counter:this.counter,promise:this.promise,debugLabel:this.debugLabel,...t}}start(t){return"AbortController"in y&&(this.abortController.abort(),this.abortController=new y.AbortController),this.counter++,this.promise=new Promise((s,c)=>{if(!this.mounted)return;const u=()=>t().then(s,c);this.dispatch({type:d.start,payload:u,meta:this.getMeta()})})}load(){const t=this.props.promise,s=this.props.promiseFn||e.promiseFn;if(t)this.start(()=>t).then(this.onResolve(this.counter)).catch(this.onReject(this.counter));else if(s){const c={...e,...this.props};this.start(()=>s(c,this.abortController)).then(this.onResolve(this.counter)).catch(this.onReject(this.counter))}}run(...t){const s=this.props.deferFn||e.deferFn;if(s){this.args=t;const c={...e,...this.props};return this.start(()=>s(t,c,this.abortController)).then(this.onResolve(this.counter),this.onReject(this.counter))}}cancel(){const t=this.props.onCancel||e.onCancel;t&&t(),this.counter++,this.abortController.abort(),this.mounted&&this.dispatch({type:d.cancel,meta:this.getMeta()})}onResolve(t){return s=>{if(this.counter===t){const c=this.props.onResolve||e.onResolve;this.setData(s,()=>c&&c(s))}return s}}onReject(t){return s=>{if(this.counter===t){const c=this.props.onReject||e.onReject;this.setError(s,()=>c&&c(s))}return s}}setData(t,s){return this.mounted&&this.dispatch({type:d.fulfill,payload:t,meta:this.getMeta()},s),t}setError(t,s){return this.mounted&&this.dispatch({type:d.reject,payload:t,error:!0,meta:this.getMeta()},s),t}render(){const{children:t,suspense:s}=this.props;if(s&&this.state.isPending&&this.promise!==P)throw this.promise;if(typeof t=="function"){const c=t;return l(D,{value:this.state,children:c(this.state)})}return t!=null?l(D,{value:this.state,children:t}):null}}h&&(I.propTypes=h.Async);const S=a=>l(p,{children:t=>l($,{...Object.assign({},a,{state:t})})}),C=a=>l(p,{children:t=>l(q,{...Object.assign({},a,{state:t})})}),v=a=>l(p,{children:t=>l(N,{...Object.assign({},a,{state:t})})}),E=a=>l(p,{children:t=>l(U,{...Object.assign({},a,{state:t})})}),L=a=>l(p,{children:t=>l(Y,{...Object.assign({},a,{state:t})})});return S.displayName=`${i}.Initial`,C.displayName=`${i}.Pending`,v.displayName=`${i}.Fulfilled`,E.displayName=`${i}.Rejected`,L.displayName=`${i}.Settled`,Object.assign(I,{displayName:i,Initial:S,Pending:C,Loading:C,Fulfilled:v,Resolved:v,Rejected:E,Settled:L})}var V=Q();async function ee(e){return await(await fetch(e)).text()}export{V as A,ee as f};
