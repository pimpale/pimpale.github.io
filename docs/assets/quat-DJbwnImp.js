var d=1e-6,E=typeof Float32Array<"u"?Float32Array:Array,k="zyx";function L(){var r=new E(9);return E!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function X(){var r=new E(16);return E!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function Z(r){var n=new E(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}function S(r,n,a){var e=n[0],c=n[1],s=n[2],v=n[3],i=n[4],f=n[5],y=n[6],l=n[7],z=n[8],$=n[9],A=n[10],R=n[11],g=n[12],p=n[13],F=n[14],T=n[15],M=a[0],x=a[1],h=a[2],w=a[3];return r[0]=M*e+x*i+h*z+w*g,r[1]=M*c+x*f+h*$+w*p,r[2]=M*s+x*y+h*A+w*F,r[3]=M*v+x*l+h*R+w*T,M=a[4],x=a[5],h=a[6],w=a[7],r[4]=M*e+x*i+h*z+w*g,r[5]=M*c+x*f+h*$+w*p,r[6]=M*s+x*y+h*A+w*F,r[7]=M*v+x*l+h*R+w*T,M=a[8],x=a[9],h=a[10],w=a[11],r[8]=M*e+x*i+h*z+w*g,r[9]=M*c+x*f+h*$+w*p,r[10]=M*s+x*y+h*A+w*F,r[11]=M*v+x*l+h*R+w*T,M=a[12],x=a[13],h=a[14],w=a[15],r[12]=M*e+x*i+h*z+w*g,r[13]=M*c+x*f+h*$+w*p,r[14]=M*s+x*y+h*A+w*F,r[15]=M*v+x*l+h*R+w*T,r}function q(r,n,a){var e=n[0],c=n[1],s=n[2],v=n[3],i=e+e,f=c+c,y=s+s,l=e*i,z=e*f,$=e*y,A=c*f,R=c*y,g=s*y,p=v*i,F=v*f,T=v*y;return r[0]=1-(A+g),r[1]=z+T,r[2]=$-F,r[3]=0,r[4]=z-T,r[5]=1-(l+g),r[6]=R+p,r[7]=0,r[8]=$+F,r[9]=R-p,r[10]=1-(l+A),r[11]=0,r[12]=a[0],r[13]=a[1],r[14]=a[2],r[15]=1,r}function j(r,n,a,e){var c=n[0],s=n[1],v=n[2],i=n[3],f=c+c,y=s+s,l=v+v,z=c*f,$=c*y,A=c*l,R=s*y,g=s*l,p=v*l,F=i*f,T=i*y,M=i*l,x=e[0],h=e[1],w=e[2];return r[0]=(1-(R+p))*x,r[1]=($+M)*x,r[2]=(A-T)*x,r[3]=0,r[4]=($-M)*h,r[5]=(1-(z+p))*h,r[6]=(g+F)*h,r[7]=0,r[8]=(A+T)*w,r[9]=(g-F)*w,r[10]=(1-(z+R))*w,r[11]=0,r[12]=a[0],r[13]=a[1],r[14]=a[2],r[15]=1,r}function m(r,n){var a=n[0],e=n[1],c=n[2],s=n[3],v=a+a,i=e+e,f=c+c,y=a*v,l=e*v,z=e*i,$=c*v,A=c*i,R=c*f,g=s*v,p=s*i,F=s*f;return r[0]=1-z-R,r[1]=l+F,r[2]=$-p,r[3]=0,r[4]=l-F,r[5]=1-y-R,r[6]=A+g,r[7]=0,r[8]=$+p,r[9]=A-g,r[10]=1-y-z,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Y(r,n,a,e,c){var s=1/Math.tan(n/2);if(r[0]=s/a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,c!=null&&c!==1/0){var v=1/(e-c);r[10]=(c+e)*v,r[14]=2*c*e*v}else r[10]=-1,r[14]=-2*e;return r}var b=Y;function _(r,n,a,e,c,s,v){var i=1/(n-a),f=1/(e-c),y=1/(s-v);return r[0]=-2*i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*f,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*y,r[11]=0,r[12]=(n+a)*i,r[13]=(c+e)*f,r[14]=(v+s)*y,r[15]=1,r}var t=_;function u(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8]+r[9]*r[9]+r[10]*r[10]+r[11]*r[11]+r[12]*r[12]+r[13]*r[13]+r[14]*r[14]+r[15]*r[15])}function o(r,n,a){return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],r[3]=n[3]-a[3],r[4]=n[4]-a[4],r[5]=n[5]-a[5],r[6]=n[6]-a[6],r[7]=n[7]-a[7],r[8]=n[8]-a[8],r[9]=n[9]-a[9],r[10]=n[10]-a[10],r[11]=n[11]-a[11],r[12]=n[12]-a[12],r[13]=n[13]-a[13],r[14]=n[14]-a[14],r[15]=n[15]-a[15],r}var r1=S;function U(){var r=new E(3);return E!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function n1(r){var n=new E(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n}function D(r){var n=r[0],a=r[1],e=r[2];return Math.sqrt(n*n+a*a+e*e)}function O(r,n,a){var e=new E(3);return e[0]=r,e[1]=n,e[2]=a,e}function G(r,n){var a=n[0],e=n[1],c=n[2],s=a*a+e*e+c*c;return s>0&&(s=1/Math.sqrt(s)),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s,r}function Q(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function I(r,n,a){var e=n[0],c=n[1],s=n[2],v=a[0],i=a[1],f=a[2];return r[0]=c*f-s*i,r[1]=s*v-e*f,r[2]=e*i-c*v,r}function a1(r,n,a){var e=n[0],c=n[1],s=n[2],v=a[3]*e+a[7]*c+a[11]*s+a[15];return v=v||1,r[0]=(a[0]*e+a[4]*c+a[8]*s+a[12])/v,r[1]=(a[1]*e+a[5]*c+a[9]*s+a[13])/v,r[2]=(a[2]*e+a[6]*c+a[10]*s+a[14])/v,r}var B=D;(function(){var r=U();return function(n,a,e,c,s,v){var i,f;for(a||(a=3),e||(e=0),c?f=Math.min(c*a+e,n.length):f=n.length,i=e;i<f;i+=a)r[0]=n[i],r[1]=n[i+1],r[2]=n[i+2],s(r,r,v),n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2];return n}})();function C(){var r=new E(4);return E!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function H(r,n){var a=n[0],e=n[1],c=n[2],s=n[3],v=a*a+e*e+c*c+s*s;return v>0&&(v=1/Math.sqrt(v)),r[0]=a*v,r[1]=e*v,r[2]=c*v,r[3]=s*v,r}(function(){var r=C();return function(n,a,e,c,s,v){var i,f;for(a||(a=4),e||(e=0),c?f=Math.min(c*a+e,n.length):f=n.length,i=e;i<f;i+=a)r[0]=n[i],r[1]=n[i+1],r[2]=n[i+2],r[3]=n[i+3],s(r,r,v),n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3];return n}})();function P(){var r=new E(4);return E!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function J(r,n,a){a=a*.5;var e=Math.sin(a);return r[0]=e*n[0],r[1]=e*n[1],r[2]=e*n[2],r[3]=Math.cos(a),r}function K(r,n,a){var e=n[0],c=n[1],s=n[2],v=n[3],i=a[0],f=a[1],y=a[2],l=a[3];return r[0]=e*l+v*i+c*y-s*f,r[1]=c*l+v*f+s*i-e*y,r[2]=s*l+v*y+e*f-c*i,r[3]=v*l-e*i-c*f-s*y,r}function N(r,n,a,e){var c=n[0],s=n[1],v=n[2],i=n[3],f=a[0],y=a[1],l=a[2],z=a[3],$,A,R,g,p;return A=c*f+s*y+v*l+i*z,A<0&&(A=-A,f=-f,y=-y,l=-l,z=-z),1-A>d?($=Math.acos(A),R=Math.sin($),g=Math.sin((1-e)*$)/R,p=Math.sin(e*$)/R):(g=1-e,p=e),r[0]=g*c+p*f,r[1]=g*s+p*y,r[2]=g*v+p*l,r[3]=g*i+p*z,r}function W(r,n){var a=n[0]+n[4]+n[8],e;if(a>0)e=Math.sqrt(a+1),r[3]=.5*e,e=.5/e,r[0]=(n[5]-n[7])*e,r[1]=(n[6]-n[2])*e,r[2]=(n[1]-n[3])*e;else{var c=0;n[4]>n[0]&&(c=1),n[8]>n[c*3+c]&&(c=2);var s=(c+1)%3,v=(c+2)%3;e=Math.sqrt(n[c*3+c]-n[s*3+s]-n[v*3+v]+1),r[c]=.5*e,e=.5/e,r[3]=(n[s*3+v]-n[v*3+s])*e,r[s]=(n[s*3+c]+n[c*3+s])*e,r[v]=(n[v*3+c]+n[c*3+v])*e}return r}function e1(r,n,a,e){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:k,s=Math.PI/360;n*=s,e*=s,a*=s;var v=Math.sin(n),i=Math.cos(n),f=Math.sin(a),y=Math.cos(a),l=Math.sin(e),z=Math.cos(e);switch(c){case"xyz":r[0]=v*y*z+i*f*l,r[1]=i*f*z-v*y*l,r[2]=i*y*l+v*f*z,r[3]=i*y*z-v*f*l;break;case"xzy":r[0]=v*y*z-i*f*l,r[1]=i*f*z-v*y*l,r[2]=i*y*l+v*f*z,r[3]=i*y*z+v*f*l;break;case"yxz":r[0]=v*y*z+i*f*l,r[1]=i*f*z-v*y*l,r[2]=i*y*l-v*f*z,r[3]=i*y*z+v*f*l;break;case"yzx":r[0]=v*y*z+i*f*l,r[1]=i*f*z+v*y*l,r[2]=i*y*l-v*f*z,r[3]=i*y*z-v*f*l;break;case"zxy":r[0]=v*y*z-i*f*l,r[1]=i*f*z+v*y*l,r[2]=i*y*l+v*f*z,r[3]=i*y*z-v*f*l;break;case"zyx":r[0]=v*y*z-i*f*l,r[1]=i*f*z+v*y*l,r[2]=i*y*l-v*f*z,r[3]=i*y*z+v*f*l;break;default:throw new Error("Unknown angle order "+c)}return r}var v1=K,V=H,c1=(function(){var r=U(),n=O(1,0,0),a=O(0,1,0);return function(e,c,s){var v=Q(c,s);return v<-.999999?(I(r,n,c),B(r)<1e-6&&I(r,a,c),G(r,r),J(e,r,Math.PI),e):v>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(I(r,c,s),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=1+v,V(e,e))}})();(function(){var r=P(),n=P();return function(a,e,c,s,v,i){return N(r,e,v,i),N(n,c,s,i),N(a,r,n,2*i*(1-i)),a}})();(function(){var r=L();return function(n,a,e,c){return r[0]=e[0],r[3]=e[1],r[6]=e[2],r[1]=c[0],r[4]=c[1],r[7]=c[2],r[2]=-a[0],r[5]=-a[1],r[8]=-a[2],V(n,W(n,r))}})();export{E as A,e1 as a,P as b,n1 as c,X as d,m as e,O as f,r1 as g,q as h,U as i,J as j,u as k,o as l,v1 as m,G as n,t as o,b as p,j as q,c1 as r,N as s,a1 as t,Z as u};
