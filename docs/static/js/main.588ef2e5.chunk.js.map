{"version":3,"sources":["map.ts","components/TerrainGenIntro.tsx","ScalarMap.ts","VectorMap.ts","components/ImageDataDisplay.tsx","components/VectorMapDisplay.tsx","components/WireframeRenderer.tsx","components/Header.tsx","components/Layout.tsx","components/Section.tsx","assets/govind_pimpale_resume.pdf","pages/Home.tsx","pages/Achernar.tsx","math.ts","assets/Mug_and_Torus_morph.gif","assets/ColorWheel.png","components/SingularityDemo.tsx","pages/TerrainGeneration.tsx","pages/Resume.tsx","pages/Error.tsx","components/ScrollToTop.tsx","App.tsx","index.tsx"],"names":["grayscaleMap","hmap","dims","width","height","imageData","ImageData","x","y","i","value","getv","data","thresholdHeightMap","thresh","threshcol","TerrainGenIntroPhase","ScalarMap","xsize","ysize","fn","arr","this","Float32Array","assert","v","VectorMap","vx","vy","ImageDataDisplay","props","displayCanvas","React","createRef","paint","bind","canvas","current","context","getContext","putImageData","className","style","ref","Component","VectorMapDisplay","tick","base","state","alphaData","particles","Array","intervalCode","setState","window","setInterval","clearInterval","nparticles","map","p","dir","vmap","Math","floor","age","filter","concat","_","random","ndata","setv","ctx","final","bindex","maybeCanvas","maybeContext","paintHeightMap","makeTorusNoise2D","scale","seed","noise4","makeNoise4D","theta","phi","cos","PI","sin","createCurlNoise","sampleCurlNoise","noise","EPSILON","dx","ret","createElevationMap","createFractalNoise","noises","sum","weight","octaves","weightsum","o","reduce","a","b","rnoises","createMountainNoise","pow","abs","mnoise","clamp","max","min","dest","rval","mval","val","TerrainGenIntro","nextPhaseClick","event","nextphase","preventDefault","HeightMapGen","OceanGen","airCurrents","Date","now","WindMapGen","initialElevation","rmap","histtemp","currtemp","type","onClick","WireframeRenderer","mount","requestID","controls","scene","camera","renderer","wireframeMesh","sceneSetup","clientWidth","clientHeight","THREE","position","z","TrackballControls","noPan","noZoom","alpha","setSize","appendChild","domElement","addCustomSceneObjects","geometries","geometry","color","material","wireframe","add","push","ambientLight","startAnimationLoop","forEach","w","rotateY","update","render","requestAnimationFrame","handleWindowResize","handleResize","addEventListener","removeEventListener","cancelAnimationFrame","dispose","Header","to","id","Footer","Layout","children","Section","overflow","top","visibility","name","Rotated","useMediaQuery","minWidth","transformCss","xDisplacement","rotation","transformOrigin","transform","distance","display","left","mx","ownRow","marginLeft","marginRight","IntroCard","title","Home","href","Resume","offset","maxWidth","Achernar","mod","n","m","loadImage","imageUrl","fetch","response","blob","fileBlob","createImageBitmap","bitmap","document","createElement","drawImage","getImageData","extend","img","radius","newImg","srcx","srcbasei","destbasei","mirror","boxBlur","srcxsize","srcysize","newxsize","newysize","rSums","Uint32Array","gSums","bSums","aSums","srcBaseIdx","destIdx","srcIdx","pixels","srcy","aIdx","bIdx","cIdx","dIdx","rSum","gSum","bSum","aSum","destBaseIdx","cubeGeometry","cubeMaterials","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","SingularityDemo","range","mesh","handleCircularityChange","valueAsNumber","newPosition","attributes","count","getX","getY","getZ","dist","hypot","nx","ny","nz","newGeometry","clone","setAttribute","remove","geo","mat","step","defaultValue","noise2D","makeNoise2D","AsideCard","TerrainGeneration","src","MugAndTorusMorphUrl","alt","promise","ColorWheelUrl","then","setData","Pending","role","Fulfilled","fixedData","mirrorData","periodicData","fixedBlur","mirrorBlur","periodicBlur","onChange","e","target","ResumePath","aspectRatio","Error","ScrollToTop","pathname","useLocation","useEffect","scrollTo","App","path","exact","component","ReactDOM","StrictMode","getElementById"],"mappings":"iRAEO,SAASA,EAAaC,GAG3B,IAFA,MAA0BA,EAAKC,OAAvBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACTC,EAAY,IAAIC,UAAUH,EAAOC,GAC9BG,EAAI,EAAGA,EAAIJ,EAAOI,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAQI,IAAK,CAC/B,IAAMC,EAAsB,GAAjBF,EAAIC,EAAIL,GACbO,EAAQT,EAAKU,KAAKJ,EAAGC,GAC3BH,EAAUO,KAAKH,EAAI,GAAa,IAARC,EACxBL,EAAUO,KAAKH,EAAI,GAAa,IAARC,EACxBL,EAAUO,KAAKH,EAAI,GAAa,IAARC,EACxBL,EAAUO,KAAKH,EAAI,GAAK,IAG5B,OAAOJ,EAGF,SAASQ,EAAmBZ,EAAiBa,EAAgBC,GAGlE,IAFA,MAA0Bd,EAAKC,OAAvBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACTC,EAAY,IAAIC,UAAUH,EAAOC,GAC9BG,EAAI,EAAGA,EAAIJ,EAAOI,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAQI,IAAK,CAC/B,IAAMC,EAAsB,GAAjBF,EAAIC,EAAIL,GACbO,EAAQT,EAAKU,KAAKJ,EAAGC,GACvBE,EAAQI,GACVT,EAAUO,KAAKH,EAAI,GAAa,IAARC,EACxBL,EAAUO,KAAKH,EAAI,GAAa,IAARC,EACxBL,EAAUO,KAAKH,EAAI,GAAa,IAARC,EACxBL,EAAUO,KAAKH,EAAI,GAAK,MAExBJ,EAAUO,KAAKH,EAAI,GAAKM,EAAU,GAClCV,EAAUO,KAAKH,EAAI,GAAKM,EAAU,GAClCV,EAAUO,KAAKH,EAAI,GAAKM,EAAU,GAClCV,EAAUO,KAAKH,EAAI,GAAK,KAI9B,OAAOJ,E,IC8FJW,E,QC7FUC,E,WAhCb,WAAYC,EAAeC,EAAeC,GAIxC,GAJgF,yBAJ1EC,SAIyE,OAHhEH,WAGgE,OAFhEC,WAEgE,EAC/EG,KAAKD,IAAM,IAAIE,aAAaL,EAAQC,GACpCG,KAAKJ,MAAQA,EACbI,KAAKH,MAAQA,EACPC,EACJ,IAAK,IAAIZ,EAAI,EAAGA,EAAIW,EAAOX,IACzB,IAAK,IAAID,EAAI,EAAGA,EAAIW,EAAOX,IACzBe,KAAKD,IAAId,EAAIC,EAAIW,GAASC,EAAGb,EAAGC,G,wCAMxC,SAAKD,EAAWC,GAGd,OAFAgB,IAAOjB,EAAIe,KAAKJ,OAChBM,IAAOhB,EAAIc,KAAKH,OACTG,KAAKD,IAAIC,KAAKJ,MAAQV,EAAID,K,kBAGnC,SAAKA,EAAWC,EAAWiB,GACzBD,IAAOjB,EAAIe,KAAKJ,OAChBM,IAAOhB,EAAIc,KAAKH,OAChBK,IAAOC,GAAK,GAAKA,GAAK,GACtBH,KAAKD,IAAIC,KAAKJ,MAAQV,EAAID,GAAKkB,I,kBAGjC,WACE,MAAO,CAAEtB,MAAOmB,KAAKJ,MAAOd,OAAQkB,KAAKH,W,aCA9BO,E,WA3Bb,WAAYR,EAAeC,GAAgB,yBAJnCE,SAIkC,OAHlCH,WAGkC,OAFlCC,WAEkC,EACxCG,KAAKD,IAAM,IAAIE,aAAaL,EAAQC,EAAQ,GAC5CG,KAAKJ,MAAQA,EACbI,KAAKH,MAAQA,E,wCAGf,SAAKZ,EAAWC,GAGd,OAFAgB,IAAOjB,EAAIe,KAAKJ,OAChBM,IAAOhB,EAAIc,KAAKH,OACT,CAACG,KAAKD,IAA2B,GAAtBC,KAAKJ,MAAQV,EAAID,GAAS,GAC5Ce,KAAKD,IAA2B,GAAtBC,KAAKJ,MAAQV,EAAID,GAAS,M,kBAGtC,SAAKA,EAAWC,EAAWiB,GACzBD,IAAOjB,EAAIe,KAAKJ,OAChBM,IAAOhB,EAAIc,KAAKH,OAChB,kBAAeM,EAAf,GAAKE,EAAL,KAASC,EAAT,KACAN,KAAKD,IAA2B,GAAtBC,KAAKJ,MAAQV,EAAID,GAAS,GAAKoB,EACzCL,KAAKD,IAA2B,GAAtBC,KAAKJ,MAAQV,EAAID,GAAS,GAAKqB,I,kBAG3C,WACE,MAAO,CAAEzB,MAAOmB,KAAKJ,MAAOd,OAAQkB,KAAKH,W,oBCoB9BU,E,kDAnCb,WAAYC,GAA+B,IAAD,8BACxC,cAAMA,IAHAC,cAAgBC,IAAMC,YAI5B,EAAKC,MAAQ,EAAKA,MAAMC,KAAX,gBAF2B,E,qDAK1C,WACEb,KAAKY,U,gCAGP,WACEZ,KAAKY,U,mBAGP,WACE,IAAME,EAASd,KAAKS,cAAcM,QAClC,GAAc,MAAVD,EAAgB,CAClB,IAAME,EAAUF,EAAOG,WAAW,MACnB,MAAXD,GACFA,EAAQE,aAAalB,KAAKQ,MAAMlB,KAAM,EAAG,M,oBAK/C,WACE,MAA0BU,KAAKQ,MAAMlB,KAA7BT,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACf,OAAO,wBACLqC,UAAWnB,KAAKQ,MAAMW,UACtBC,MAAOpB,KAAKQ,MAAMY,MAClBC,IAAKrB,KAAKS,cACV5B,MAAOA,EACPC,OAAQA,Q,GAlCiB4B,IAAMY,W,QCiItBC,E,kDAhHb,WAAYf,GAA+B,IAAD,uBACxC,cAAMA,IAHAC,cAAgBC,IAAMC,YAI5B,EAAKC,MAAQ,EAAKA,MAAMC,KAAX,gBACb,EAAKW,KAAO,EAAKA,KAAKX,KAAV,gBACZ,MAA0BL,EAAMiB,KAAxB5C,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OAJyB,OAKxC,EAAK4C,MAAQ,CACXC,UAAW,IAAIhC,EAAUd,EAAOC,GAChC8C,UAAW,IAAIC,MACfC,aAAc,MARwB,E,qDAY1C,WACE9B,KAAK+B,SAAS,CAAED,aAAcE,OAAOC,YAAYjC,KAAKwB,KAAM,S,kCAG9D,WACQxB,KAAK0B,MAAMI,cACfE,OAAOE,cAAclC,KAAK0B,MAAMI,cAElC9B,KAAK+B,SAAS,CAAED,aAAc,S,gCAGhC,WACE9B,KAAKY,U,kBAIP,WA2BE,IA3BM,IAAD,OACL,EAA0BZ,KAAK0B,MAAMC,UAAU/C,OAAvCC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OAETqD,EAAanC,KAAK0B,MAAME,UAAUQ,KACtC,SAACC,GAEC,IAAMC,EAAM,EAAK9B,MAAM+B,KAAKlD,KAAKmD,KAAKC,MAAMJ,EAAEpD,GAAIuD,KAAKC,MAAMJ,EAAEnD,IAC/D,MAAO,CACLD,EAAGoD,EAAEpD,EAAIqD,EAAI,GAAK,EAClBpD,EAAGmD,EAAEnD,EAAIoD,EAAI,GAAK,EAClBI,IAAKL,EAAEK,IAAM,MAIhBC,QAAO,SAACN,GAAD,OAAOA,EAAEpD,EAAI,GAAKoD,EAAEpD,EAAIJ,GAASwD,EAAEnD,EAAI,GAAKmD,EAAEnD,EAAIJ,GAAUuD,EAAEK,IAAM,OAC3EE,OAEC,YAAIf,MAAgC,IACjCO,KAAI,SAAAS,GAAC,MAAK,CACT5D,EAAGuD,KAAKM,SAAWjE,EACnBK,EAAGsD,KAAKM,SAAWhE,EACnB4D,IAAK,OAKTK,EAAQ,IAAIpD,EAAUd,EAAOC,GACxBG,EAAI,EAAGA,EAAIJ,EAAOI,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAQI,IAC1B6D,EAAMC,KAAK/D,EAAGC,EAAGc,KAAK0B,MAAMC,UAAUtC,KAAKJ,EAAGC,GAAK,KA7BlD,oBAiCWiD,GAjCX,IAiCL,2BAA4B,CAAC,IAAlBE,EAAiB,QAC1BU,EAAMC,KAAKR,KAAKC,MAAMJ,EAAEpD,GAAIuD,KAAKC,MAAMJ,EAAEnD,GAAI,IAlC1C,8BAsCLc,KAAK+B,SAAS,CACZJ,UAAWoB,EACXnB,UAAWO,M,4BAIf,SAAec,GACb,MAA0BjD,KAAKQ,MAAMiB,KAA7B5C,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACfmE,EAAI/B,aAAalB,KAAKQ,MAAMiB,KAAM,EAAG,GAErC,IADA,IAAIyB,EAAQ,IAAIlE,UAAUH,EAAOC,GACxBG,EAAI,EAAGA,EAAIJ,EAAOI,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAQI,IAAK,CAC/B,IAAMiE,EAA2B,GAAjBtE,EAAQK,EAAID,GAC5BiE,EAAM5D,KAAK6D,EAAS,GAAKnD,KAAKQ,MAAMiB,KAAKnC,KAAK6D,EAAS,GACvDD,EAAM5D,KAAK6D,EAAS,GAAKnD,KAAKQ,MAAMiB,KAAKnC,KAAK6D,EAAS,GAAuC,IAAlCnD,KAAK0B,MAAMC,UAAUtC,KAAKJ,EAAGC,GACzFgE,EAAM5D,KAAK6D,EAAS,GAAKnD,KAAKQ,MAAMiB,KAAKnC,KAAK6D,EAAS,GACvDD,EAAM5D,KAAK6D,EAAS,GAAKnD,KAAKQ,MAAMiB,KAAKnC,KAAK6D,EAAS,GAG3DF,EAAI/B,aAAagC,EAAO,EAAG,K,mBAG7B,WACE,IAAME,EAAcpD,KAAKS,cAAcM,QACvC,GAAmB,MAAfqC,EAAqB,CACvB,IAAMC,EAAeD,EAAYnC,WAAW,MACxB,MAAhBoC,GACFrD,KAAKsD,eAAeD,M,oBAK1B,WACE,MAA0BrD,KAAKQ,MAAMiB,KAA7B5C,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACf,OACE,wBACEsC,MAAOpB,KAAKQ,MAAMY,MAClBD,UAAWnB,KAAKQ,MAAMW,UACtBE,IAAKrB,KAAKS,cACV5B,MAAOA,EACPC,OAAQA,Q,GA7Ge4B,IAAMY,WJXrC,SAASiC,EAAiBC,EAAeC,GACvC,IAAMC,EAASC,sBAAYF,GAC3B,OAAO,SAACG,EAAeC,GAAhB,OAAgCH,EACrClB,KAAKsB,IAAIF,EAAQpB,KAAKuB,GAAK,GAAKP,EAAOhB,KAAKwB,IAAIJ,EAAQpB,KAAKuB,GAAK,GAAKP,EACvEhB,KAAKsB,IAAID,EAAMrB,KAAKuB,GAAK,GAAKP,EAAOhB,KAAKwB,IAAIH,EAAMrB,KAAKuB,GAAK,GAAKP,IAIvE,SAASS,EAAgBrE,EAAeC,EAAe4D,GACrD,SAASS,EAAgBC,EAAyClF,EAAWC,GAC3E,IAAMkF,EAAU,KAKVC,GAHOF,EAAMlF,EAAImF,EAASlF,GACnBiF,EAAMlF,EAAImF,EAASlF,IAErB,KAOX,MAAO,EALMiF,EAAMlF,EAAGC,EAAIkF,GACbD,EAAMlF,EAAGC,EAAIkF,IAEf,MAEEC,GAQf,IALA,IAAIC,EAAM,IAAIlE,EAAUR,EAAOC,GAEzBsE,EAAQZ,EAAiB,EAAGE,GAGzBxE,EAAI,EAAGA,EAAIW,EAAOX,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIW,EAAOX,IACzBoF,EAAItB,KAAK/D,EAAGC,EAAGgF,EAAgBC,EAAOlF,EAAIW,EAAOV,EAAIW,IAGzD,OAAOyE,EAIT,SAASC,EAAmB3E,EAAeC,EAAe4D,GACxD,SAASe,EACPvF,EACAC,EACAuF,GAKA,IADA,EACIC,EAAM,EADV,cAEgCD,GAFhC,IAEA,2BAAwC,CAAC,IAAD,UAA3BN,EAA2B,EAA3BA,MAAOQ,EAAoB,EAApBA,OAClBD,GAAOP,EAAMlF,EAAGC,GAAKyF,GAHvB,8BAKA,OAAOD,EAGT,IAAME,EAAU,CACd,CAAEpB,MAAO,IAAMmB,OAAQ,IACvB,CAAEnB,MAAO,IAAMmB,OAAQ,IACvB,CAAEnB,MAAO,IAAMmB,OAAQ,IACvB,CAAEnB,MAAO,IAAMmB,OAAQ,IACvB,CAAEnB,MAAO,IAAMmB,OAAQ,GACvB,CAAEnB,MAAO,IAAMmB,OAAQ,GACvB,CAAEnB,MAAO,IAAMmB,OAAQ,IAGnBE,EAAYD,EAAQxC,KAAI,SAAA0C,GAAC,OAAIA,EAAEH,UAAQI,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,KAE5DC,EAAUN,EAAQxC,KAAI,WAAoBjD,GAApB,IAAGqE,EAAH,EAAGA,MAAOmB,EAAV,EAAUA,OAAV,MAA2B,CACrDR,MAAOZ,EAAiBC,EAAOC,EAAOtE,GACtCwF,OAAQA,EAASE,MAInB,SAASM,EACPlG,EACAC,EACAiF,GAEA,OAAO3B,KAAK4C,IAAI,EAAI5C,KAAK6C,IAAIlB,EAAMlF,EAAGC,IAAK,GAU7C,IAPA,IAAMoG,EAAS/B,EAAiB,EAAGE,EAAO,GAEpC8B,EAAQ,SAACtG,GAAD,OAAeuD,KAAKgD,IAAIhD,KAAKiD,IAAIxG,EAAG,GAAI,IAGlDyG,EAAO,IAAI/F,EAAUC,EAAOC,GAEvBZ,EAAI,EAAGA,EAAIW,EAAOX,IACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIW,EAAOX,IAAK,CAC9B,IAAMyG,EAAOnB,EAAmBvF,EAAIW,EAAOV,EAAIW,EAAOqF,GAAW,GAE3DU,EAAOT,EAAoBlG,EAAIW,EAAOV,EAAIW,EAAOyF,GAAU,GAE3DO,EAAMrD,KAAK4C,IAAW,GAAPQ,EAAoB,GAAPD,EAAY,GAC9CD,EAAK1C,KAAK/D,EAAGC,EAAGqG,EAAMM,IAI1B,OAAOH,G,SAoBJhG,O,+BAAAA,I,uBAAAA,I,4BAAAA,M,SAsHUoG,E,kDA7Fb,WAAYtF,GAA8B,IAAD,8BACvC,cAAMA,IAYRuF,eAAiB,SAACC,GAGhB,IAAIC,EACJ,OAFAD,EAAME,iBAEE,EAAKxE,MAAMA,OACjB,KAAKhC,EAAqByG,aACxBF,EAAYvG,EAAqB0G,SACjC,MAEF,KAAK1G,EAAqB0G,SACxB,EAAKrE,SAAS,CACZsE,YAAapC,EAAgB,EAAKzD,MAAM3B,MAAO,EAAK2B,MAAM1B,OAAQwH,KAAKC,SAEzEN,EAAYvG,EAAqB8G,WACjC,MAEF,KAAK9G,EAAqB8G,WACxBP,EAAYvG,EAAqByG,aAIrC,EAAKpE,SAAS,CACZL,MAAOuE,KAjCT,EAAKvE,MAAQ,CACXA,MAAOhC,EAAqByG,aAC5BM,iBAAkBlC,EAAmB,EAAK/D,MAAM3B,MAAO,EAAK2B,MAAM1B,OAAQwH,KAAKC,OAC/EF,YAAa,KACbK,KAAM,KACNC,SAAU,KACVC,SAAU,MAR2B,E,0CAuCzC,WACE,OAAQ5G,KAAK0B,MAAMA,OACjB,KAAKhC,EAAqByG,aAExB,OADAjG,IAAsC,MAA/BF,KAAK0B,MAAM+E,kBACX,qCACL,cAAC,EAAD,CACEtF,UAAWnB,KAAKQ,MAAMW,UACtBC,MAAOpB,KAAKQ,MAAMY,MAClB9B,KAAMC,EAAmBS,KAAK0B,MAAM+E,iBAAkB,EAAG,CAAC,EAAG,EAAG,MAElE,8BACE,wBAAQI,KAAK,SAAS1F,UAAU,eAAe2F,QAAS9G,KAAK+F,eAA7D,6BAMN,KAAKrG,EAAqB0G,SAExB,OADAlG,IAAsC,MAA/BF,KAAK0B,MAAM+E,kBACX,qCACL,cAAC,EAAD,CACEtF,UAAWnB,KAAKQ,MAAMW,UACtBC,MAAOpB,KAAKQ,MAAMY,MAClB9B,KAAMC,EAAmBS,KAAK0B,MAAM+E,iBAAkB,GAAK,CAAC,EAAM,IAAM,QAE1E,8BACE,wBAAQI,KAAK,SAAS1F,UAAU,eAAe2F,QAAS9G,KAAK+F,eAA7D,6BAMN,KAAKrG,EAAqB8G,WAGxB,OAFAtG,IAAsC,MAA/BF,KAAK0B,MAAM+E,kBAClBvG,IAAiC,MAA1BF,KAAK0B,MAAM2E,aACX,qCACL,cAAC,EAAD,CACElF,UAAWnB,KAAKQ,MAAMW,UACtBC,MAAOpB,KAAKQ,MAAMY,MAClBmB,KAAMvC,KAAK0B,MAAM2E,YACjB5E,KAAMlC,EAAmBS,KAAK0B,MAAM+E,iBAAkB,GAAK,CAAC,EAAM,IAAM,QAE1E,8BACE,wBAAQI,KAAK,SAAS1F,UAAU,eAAe2F,QAAS9G,KAAK+F,eAA7D,6B,GApFkBrF,IAAMY,W,QK7BrByF,E,4MA5GLC,MAAQtG,IAAMC,Y,EAGdsG,e,IACAC,c,IACAC,W,IACAC,Y,IACAC,c,IACAC,cAA8B,G,EAmBtCC,WAAa,WAEX,IAAM1I,EAAQ,EAAKmI,MAAMjG,QAASyG,YAC5B1I,EAAS,EAAKkI,MAAMjG,QAAS0G,aAEnC,EAAKN,MAAQ,IAAIO,IACjB,EAAKN,OAAS,IAAIM,KACf,GACD,GACA,IACC,IAGH,EAAKN,OAAOO,SAASC,EAAI,GAGzB,EAAKV,SAAW,IAAIW,IAAkB,EAAKT,OAAQ,EAAKJ,MAAMjG,SAE9D,EAAKmG,SAASY,OAAQ,EACtB,EAAKZ,SAASa,QAAS,EAEvB,EAAKV,SAAW,IAAIK,IAAoB,CAAEM,OAAO,IACjD,EAAKX,SAASY,QAAQpJ,EAAOC,GAC7B,EAAKkI,MAAMjG,QAASmH,YAAY,EAAKb,SAASc,a,EAMhDC,sBAAwB,WAAM,oBAGM,EAAK5H,MAAM6H,YAHjB,IAG5B,2BAAyD,CAAC,IAAD,UAA5CC,EAA4C,EAA5CA,SAAUC,EAAkC,EAAlCA,MACfC,EAAW,IAAId,IAAwB,CAC3Ce,WAAW,EACXF,MAAOA,IAIHE,EAAY,IAAIf,IAAWY,EAAUE,GAC3C,EAAKrB,MAAMuB,IAAID,GACf,EAAKnB,cAAcqB,KAAKF,IAZE,8BAgB5B,IAAMG,EAAe,IAAIlB,IAAmB,UAC5C,EAAKP,MAAMuB,IAAIE,I,EAGjBC,mBAAqB,WACnB,EAAKvB,cAAcwB,SAAQ,SAAAC,GAAC,OAAIA,EAAEC,QAAQ,SAC1C,EAAK9B,SAAS+B,SACd,EAAK5B,SAAS6B,OAAO,EAAK/B,MAAO,EAAKC,QAKtC,EAAKH,UAAYjF,OAAOmH,sBAAsB,EAAKN,qB,EAGrDO,mBAAqB,WACnB,IAAMvK,EAAQ,EAAKmI,MAAMjG,QAASyG,YAC5B1I,EAAS,EAAKkI,MAAMjG,QAAS0G,aAEnC,EAAKP,SAASmC,eACd,EAAKhC,SAASY,QAAQpJ,EAAOC,I,uDAjF/B,WACEkB,KAAKuH,aACLvH,KAAKoI,wBACLpI,KAAK6I,qBACL7G,OAAOsH,iBAAiB,SAAUtJ,KAAKoJ,sB,kCAIzC,WACEpH,OAAOuH,oBAAoB,SAAUvJ,KAAKoJ,oBAC1CpH,OAAOwH,qBAAqBxJ,KAAKiH,WACjCjH,KAAKkH,SAAUuC,Y,oBAiFjB,WACE,OAAO,qBAAKrI,MAAOpB,KAAKQ,MAAMY,MAAOC,IAAKrB,KAAKgH,Y,GA3GnBtG,IAAMY,W,QCiBvBoI,EA7BA,kBACb,wBAAQvI,UAAU,OAAlB,SACE,qBAAKA,UAAW,sDAAhB,SACE,sBAAKA,UAAU,mBAAf,UACE,cAAC,IAAD,CAAMA,UAAU,eAAewI,GAAG,IAAlC,SAAsC,sDAEtC,wBAAQ9C,KAAK,SAAS1F,UAAU,iBAC9B,iBAAe,WAAW,iBAAe,0BACzC,gBAAc,yBAAyB,gBAAc,QAAQ,aAAW,oBAF1E,SAIE,cAAC,IAAD,CAAmBA,UAAU,gBAE/B,sBAAKA,UAAU,2BAA2ByI,GAAG,yBAA7C,UAEE,sBAAKzI,UAAU,aAAf,UACE,cAAC,IAAD,CAAMwI,GAAG,UAAUxI,UAAU,oBAA7B,SAAiD,8CACjD,cAAC,IAAD,CAAMwI,GAAG,YAAYxI,UAAU,oBAA/B,SAAmD,mDAGrD,sBAAKA,UAAU,qBAAf,UACE,cAAC,IAAD,CAAMwI,GAAG,qBAAqBxI,UAAU,oBAAxC,SAA4D,0DAC5D,cAAC,IAAD,CAAMwI,GAAG,WAAWxI,UAAU,oBAA9B,SAAkD,+CAClD,cAAC,IAAD,CAAMwI,GAAG,YAAYxI,UAAU,oBAA/B,SAAmD,8DCtB/D,SAAS0I,IACP,OACE,yBAAQ1I,UAAU,uBAAlB,UAAyC,uBACvC,qEAMN,IAOe2I,EAP6B,SAAAtJ,GAAK,OAC/C,qCACE,cAAC,EAAD,IACCA,EAAMuJ,SACP,cAACF,EAAD,QCSWG,EAjBwC,SAAAxJ,GACrD,OAAO,0BAASW,UAAU,OAAOC,MAAO,CAAE6I,SAAU,SAAUtC,SAAU,YAAjE,UACL,sBACEiC,GAAIpJ,EAAMoJ,GACVxI,MAAO,CACLuG,SAAU,WACVuC,IAAK,SACLC,WAAY,YAEhB,gCACE,cAAC,IAAD,CAAMR,GAAE,WAAMnJ,EAAMoJ,IAAMzI,UAAU,uBAApC,SAA2D,qCAC3D,6BAAKX,EAAM4J,UAEZ5J,EAAMuJ,a,yBCrBI,MAA0B,kD,QCsBnCM,EAAiD,SAAA7J,GAErD,GAAK8J,wBAAc,CAAEC,SAAU,MAKxB,CACL,IACIC,EADEC,EAAgBjI,KAAKsB,IAAItD,EAAMkK,UAAYlI,KAAKuB,GAAK,MAKzDyG,EAFEC,GAAiB,GAEJ,CACbE,gBAAiB,QACjBC,UAAU,UAAD,OAAYpK,EAAMkK,SAAlB,0BAA4ClK,EAAMqK,SAAlD,uBAAyErK,EAAMkK,SAA/E,gCAEFD,EAAgB,GAEV,CACbE,gBAAiB,OACjBC,UAAU,UAAD,OAAYpK,EAAMkK,SAAlB,0BAA4ClK,EAAMqK,SAAlD,uBAAyErK,EAAMkK,SAA/E,6BAII,CACbC,gBAAiB,SACjBC,UAAU,UAAD,OAAYpK,EAAMkK,SAAlB,0BAA4ClK,EAAMqK,SAAlD,uBAAyErK,EAAMkK,SAA/E,+BAWb,OAAO,qBAAKtJ,MAAK,2BAAOoJ,GAPP,CACfM,QAAS,QACTnD,SAAU,WACVuC,IAAK,MACLa,KAAM,QAGD,SACJvK,EAAMuJ,WApCT,IAAMiB,EAAE,UAAMxK,EAAMyK,OAAS,GAAK,EAA1B,MACR,OAAO,qBAAK7J,MAAO,CAAE8J,WAAYF,EAAIG,YAAaH,GAAK7J,UAAU,OAA1D,SACJX,EAAMuJ,YA2CPqB,EAAqD,SAAA5K,GAAK,OAC9D,qBAAKW,UAAU,OAAOC,MAAO,CAAEvC,MAAO,SAAtC,SACE,sBAAKsC,UAAU,YAAf,UACE,oBAAIA,UAAU,aAAd,SAA4BX,EAAM6K,QAClC,qBAAKlK,UAAU,YAAf,SAA4BX,EAAMuJ,iBAiJzBuB,EA5IF,kBACX,eAAC,EAAD,WACE,sBAAKnK,UAAU,qDAAf,UACE,cAAC,EAAD,CAAS0J,SAAU,EAAGH,SAAU,GAAIO,QAAM,EAA1C,SACE,cAAC,EAAD,CACE7J,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCuJ,WAAY,CAAC,CACXC,SAAU,IAAIZ,IAA0B,GACxCa,MAAO,eAKb,cAAC,EAAD,CAASsC,SAAU,GAAIH,UAAW,GAAlC,SACE,cAAC,EAAD,CAAWW,MAAM,QAAjB,SACE,mBAAGE,KAAK,SAAR,sDAGJ,cAAC,EAAD,CAASV,SAAU,GAAIH,SAAU,EAAjC,SACE,cAAC,EAAD,CAAWW,MAAM,UAAjB,SACE,mBAAGE,KAAK,WAAR,+CAGJ,cAAC,EAAD,CAASV,SAAU,GAAIH,SAAU,GAAjC,SACE,cAAC,EAAD,CAAWW,MAAM,SAAjB,SACE,mBAAGE,KAAK,+CAAR,gDAGJ,cAAC,EAAD,CAASV,SAAU,GAAIH,SAAU,IAAjC,SACE,cAAC,EAAD,CAAWW,MAAM,WAAjB,SACE,mBAAGE,KAAK,YAAR,gEAGJ,cAAC,EAAD,CAASV,SAAU,GAAIH,SAAU,IAAjC,SACE,cAAC,EAAD,CAAWW,MAAM,qBAAjB,SACE,mBAAGE,KAAK,qBAAR,mDAGJ,cAAC,EAAD,CAASV,SAAU,GAAIH,SAAU,IAAjC,SACE,cAAC,EAAD,CAAWW,MAAM,SAAjB,SACE,cAAC,IAAD,CAAM1B,GAAG,UAAT,6BAIJ,cAAC,EAAD,CAASkB,SAAU,GAAIH,SAAU,GAAIO,QAAM,EAA3C,SACE,mBAAGM,KAAK,SAASpK,UAAU,gCAAgC,aAAW,QAAtE,SAA8E,cAAC,IAAD,WAGlF,sBAAKyI,GAAG,UAAUzI,UAAU,YAA5B,UACE,eAAC,EAAD,CAASyI,GAAG,QAAQQ,KAAK,QAAzB,UACE,oCACA,gHAEe,mBACXmB,KAAK,sHADM,gCAFf,YAKe,mBAAGA,KAAK,mCAAR,iCALf,8FAOsB,mBAAGA,KAAK,sBAAR,qBAPtB,oCASA,+BACE,6BAAI,mBAAGA,KAAK,8BAAR,sBACJ,6BAAI,mBAAGA,KAAK,8CAAR,wBACJ,6BAAI,mBAAGA,KAAMC,EAAT,yBAEN,0CACA,kKAEoB,mBAAGD,KAAK,8BAAR,kBAFpB,iFAIA,sCACA,0DAEQ,mBAAGA,KAAK,uBAAR,qBAFR,QAEuD,mBAAGA,KAAK,kCAAR,wBAFvD,4BAGyB,mBAAGA,KAAK,uBAAR,sBAHzB,oIAK0C,mBAAGA,KAAK,+CAAR,kBAL1C,UAQF,eAAC,EAAD,CAAS3B,GAAG,UAAUQ,KAAK,UAA3B,UACE,oTAKA,8BACE,mBAAGmB,KAAK,sBAAR,6BACA,uBACA,mBAAGA,KAAK,6BAAR,+BAGJ,eAAC,EAAD,CAAS3B,GAAG,WAAWQ,KAAK,WAA5B,UACE,uCADF,iBAEgB,4BAAG,mDAFnB,qCAGE,+BACE,+BACE,2CADF,4BAC4C,2CAD5C,2IAKA,+BAAI,4CAAJ,iOAGA,+BAAI,qCAAJ,oIAIF,gDACA,4LAE2D,0CAF3D,yDAIA,wDACA,8BACE,cAAC,IAAD,CAAMT,GAAG,sCAAT,kCACA,uBACA,cAAC,IAAD,CAAMA,GAAG,YAAT,6BAGJ,uBACA,cAAC,EAAD,CAASC,GAAG,oBAAoBQ,KAAK,oBAArC,SACE,gCAEE,cAAC,IAAD,CAAUtL,OAAQ,IAAK2M,OAAQ,IAA/B,SACE,cAAC,EAAD,CACE5M,MAAO,IACPC,OAAQ,IACRsC,MAAO,CAAEvC,MAAO,IAAK6M,SAAU,QAC/BvK,UAAU,yCAGd,uBACA,cAAC,IAAD,CAAMwI,GAAG,qBAAT,0CAGJ,8BC1MSgC,MARf,WACE,OAAO,cAAC,EAAD,UACP,cAAC,EAAD,CAAS/B,GAAG,YAAYQ,KAAK,iB,iCCJxB,SAASwB,GAAIC,EAAWC,GAC7B,OAASD,EAAIC,EAAKA,GAAKA,EAGlB,SAAeC,GAAtB,mC,8CAAO,WAAyBC,GAAzB,uBAAAhH,EAAA,sEACkBiH,MAAMD,GADxB,cACCE,EADD,gBAEkBA,EAASC,OAF3B,cAECC,EAFD,gBAGgBC,kBAAkBD,GAHlC,cAGCE,EAHD,QAICxL,EAASyL,SAASC,cAAc,WAC/B3N,MAAQyN,EAAOzN,MACtBiC,EAAOhC,OAASwN,EAAOxN,QACjBkC,EAAUF,EAAOG,WAAW,OAC1BwL,UAAUH,EAAQ,EAAG,GARxB,kBASEtL,EAAQ0L,aAAa,EAAG,EAAGJ,EAAOzN,MAAOyN,EAAOxN,SATlD,6C,sBAiBA,SAAS6N,GAAOC,EAAgB3H,EAAuB4H,GAE5D3M,IAAO2M,EAAS,EAAG,2BAEnB,IAAIC,EAAS,IAAI9N,UAAU4N,EAAI9N,OAAkB,EAAT+N,EAAYD,EAAI/N,MAAiB,EAATgO,GAEhE,OAAQ5H,GACN,IAAK,QACH,IAAK,IAAI/F,EAAI,EAAGA,EAAI4N,EAAOjO,MAAOK,IAChC,IAAK,IAAID,EAAI,EAAGA,EAAI6N,EAAOhO,OAAQG,IAAK,CAEtC,IAAM8N,EAAOvK,KAAKgD,IAAIhD,KAAKiD,IAAIxG,EAAI4N,EAAQD,EAAI/N,MAAQ,GAAI,GAIrDmO,EAAuC,GAHhCxK,KAAKgD,IAAIhD,KAAKiD,IAAIvG,EAAI2N,EAAQD,EAAI9N,OAAS,GAAI,GAGnC8N,EAAI/N,MAAQkO,GAC/BE,EAAqC,GAAxB/N,EAAI4N,EAAOjO,MAAQI,GAGtC6N,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GAGrD,MAEF,IAAK,WACH,IAAK,IAAI9N,EAAI,EAAGA,EAAI4N,EAAOjO,MAAOK,IAChC,IAAK,IAAID,EAAI,EAAGA,EAAI6N,EAAOhO,OAAQG,IAAK,CAEtC,IAAM8N,EAAOnB,GAAI3M,EAAI4N,EAAQD,EAAI/N,OAI3BmO,EAAuC,GAHhCpB,GAAI1M,EAAI2N,EAAQD,EAAI9N,QAGR8N,EAAI/N,MAAQkO,GAC/BE,EAAqC,GAAxB/N,EAAI4N,EAAOjO,MAAQI,GAGtC6N,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GAGrD,MAEF,IAAK,SAaH,IAbc,IACLE,EAAT,SAAgBjO,EAAW8J,GACzB,OAAI9J,EAAI,EAECuD,KAAKiD,IAAIjD,KAAKgD,KAAKvG,EAAG,GAAI8J,GACxB9J,GAAK8J,EAEPvG,KAAKiD,IAAIjD,KAAKgD,IAAI,EAAIuD,EAAI9J,EAAG,GAAI8J,GAEjC9J,GAIFC,EAAI,EAAGA,EAAI4N,EAAOjO,MAAOK,IAChC,IAAK,IAAID,EAAI,EAAGA,EAAI6N,EAAOhO,OAAQG,IAAK,CAEtC,IAAM8N,EAAOG,EAAOjO,EAAI4N,EAAQD,EAAI/N,MAAQ,GAItCmO,EAAuC,GAHhCE,EAAOhO,EAAI2N,EAAQD,EAAI9N,OAAS,GAGpB8N,EAAI/N,MAAQkO,GAC/BE,EAAqC,GAAxB/N,EAAI4N,EAAOjO,MAAQI,GAGtC6N,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,GACjDF,EAAOxN,KAAK2N,EAAY,GAAKL,EAAItN,KAAK0N,EAAW,IAOzD,OAAOF,EAIF,SAASK,GAAQP,EAAgBC,GACtC3M,IAAO2M,EAAS,EAAG,2BAKnB,IAAMO,EAAWR,EAAI/N,MACfwO,EAAWT,EAAI9N,OAGfwO,EAAWF,EAAoB,EAATP,EACtBU,EAAWF,EAAoB,EAATR,EAE5B3M,IAAOoN,EAAW,GAAKC,EAAW,EAAG,uBAarC,IAVA,IAAIT,EAAS,IAAI9N,UAAUsO,EAAUC,GAIjCC,EAAQ,IAAIC,YAAYL,EAAWC,GACnCK,EAAQ,IAAID,YAAYL,EAAWC,GACnCM,EAAQ,IAAIF,YAAYL,EAAWC,GACnCO,EAAQ,IAAIH,YAAYL,EAAWC,GAG9BnO,EAAI,EAAGA,EAAImO,EAAUnO,IAE5B,IAAK,IAAID,EAAI,EAAGA,EAAImO,EAAUnO,IAAK,CACjC,IAAM4O,EAAkC,GAApBR,EAAWnO,EAAID,GAC7B6O,EAAUT,EAAWnO,EAAID,EAE/BuO,EAAMM,GAAWlB,EAAItN,KAAKuO,EAAa,GAAKL,EAAMM,EAAQ,GAC1DJ,EAAMI,GAAWlB,EAAItN,KAAKuO,EAAa,GAAKH,EAAMI,EAAQ,GAC1DH,EAAMG,GAAWlB,EAAItN,KAAKuO,EAAa,GAAKF,EAAMG,EAAQ,GAC1DF,EAAME,GAAWlB,EAAItN,KAAKuO,EAAa,GAAKD,EAAME,EAAQ,GAK9D,IAAK,IAAI7O,EAAI,EAAGA,EAAImO,EAAUnO,IAE5B,IAAK,IAAIC,EAAI,EAAGA,EAAImO,EAAUnO,IAAK,CACjC,IAAM4O,EAAUT,EAAWnO,EAAID,EACzB8O,EAASV,GAAYnO,EAAI,GAAKD,EAEpCuO,EAAMM,IAAYN,EAAMO,GACxBL,EAAMI,IAAYJ,EAAMK,GACxBJ,EAAMG,IAAYH,EAAMI,GACxBH,EAAME,IAAYF,EAAMG,GAQ5B,IAHA,IAAMC,EAASxL,KAAK4C,IAAa,EAATyH,EAAY,GAG3B3N,EAAI,EAAGA,EAAIqO,EAAUrO,IAC5B,IAAK,IAAID,EAAI,EAAGA,EAAIqO,EAAUrO,IAAK,CAKjC,IAAM8N,EAAO9N,EAAI4N,EACXoB,EAAO/O,EAAI2N,EAGXqB,EAAQnB,EAAOF,EAAUQ,GAAYY,EAAOpB,GAC5CsB,EAAQpB,EAAOF,EAAUQ,GAAYY,EAAOpB,GAC5CuB,EAAQrB,EAAOF,EAAUQ,GAAYY,EAAOpB,GAC5CwB,EAAQtB,EAAOF,EAAUQ,GAAYY,EAAOpB,GAG5CyB,EAAOd,EAAMa,IAASb,EAAMW,GAAQX,EAAMY,GAAQZ,EAAMU,IACxDK,EAAOb,EAAMW,IAASX,EAAMS,GAAQT,EAAMU,GAAQV,EAAMQ,IACxDM,EAAOb,EAAMU,IAASV,EAAMQ,GAAQR,EAAMS,GAAQT,EAAMO,IACxDO,EAAOb,EAAMS,IAAST,EAAMO,GAAQP,EAAMQ,GAAQR,EAAMM,IAGxDQ,EAAmC,GAApBzP,EAAIC,EAAIqO,GAC7BT,EAAOxN,KAAKoP,EAAc,GAAKJ,EAAON,EACtClB,EAAOxN,KAAKoP,EAAc,GAAKH,EAAOP,EACtClB,EAAOxN,KAAKoP,EAAc,GAAKF,EAAOR,EACtClB,EAAOxN,KAAKoP,EAAc,GAAKD,EAAOT,EAI1C,OAAOlB,ECnMM,WAA0B,gDCA1B,OAA0B,uCCYnC6B,GAAe,IAAIjH,IAAkB,EAAG,EAAG,EAAG,EAAG,EAAG,GAEpDkH,GAAgB,CACpB,IAAIlH,IAAwB,CAC1BmH,eAAe,EACfC,oBAAqB,EACrBC,mBAAoB,EACpBxG,MAAO,UAET,IAAIb,IAAwB,CAC1BmH,eAAe,EACfC,oBAAqB,EACrBC,mBAAoB,EACpBxG,MAAO,WAET,IAAIb,IAAwB,CAC1BmH,eAAe,EACfC,oBAAqB,EACrBC,mBAAoB,EACpBxG,MAAO,WAET,IAAIb,IAAwB,CAC1BmH,eAAe,EACfC,oBAAqB,EACrBC,mBAAoB,EACpBxG,MAAO,WAET,IAAIb,IAAwB,CAC1BmH,eAAe,EACfC,oBAAqB,EACrBC,mBAAoB,EACpBxG,MAAO,WAET,IAAIb,IAAwB,CAC1BmH,eAAe,EACfC,oBAAqB,EACrBC,mBAAoB,EACpBxG,MAAO,YAsJIyG,G,4MA9ILhI,MAAQtG,IAAMC,Y,EAGdsO,MAAQvO,IAAMC,Y,EAGdsG,e,IACAC,c,IACAC,W,IACAC,Y,IACAC,c,IACA6H,U,IAsBR3H,WAAa,WAEX,IAAM1I,EAAQ,EAAKmI,MAAMjG,QAASyG,YAC5B1I,EAAS,EAAKkI,MAAMjG,QAAS0G,aAEnC,EAAKN,MAAQ,IAAIO,IACjB,EAAKN,OAAS,IAAIM,KACf,IACD,IACA,KACC,KAGH,EAAKN,OAAOO,SAASC,EAAI,GAGzB,EAAKV,SAAW,IAAIW,IAAkB,EAAKT,OAAQ,EAAKJ,MAAMjG,SAE9D,EAAKmG,SAASY,OAAQ,EACtB,EAAKZ,SAASa,QAAS,EAEvB,EAAKV,SAAW,IAAIK,IAAoB,CAAEM,OAAO,IACjD,EAAKX,SAASY,QAAQpJ,EAAOC,GAC7B,EAAKkI,MAAMjG,QAASmH,YAAY,EAAKb,SAASc,a,EAMhDC,sBAAwB,WAEtB,IAAMQ,EAAe,IAAIlB,IAAmB,UAC5C,EAAKP,MAAMuB,IAAIE,I,EAGjBuG,wBAA0B,WAOxB,IALA,IAAMnH,EAAQ,EAAKiH,MAAMlO,QAASqO,cAG5BC,EAAc,IAAIpP,aAAsD,EAAzC0O,GAAaW,WAAW3H,SAAS4H,OAE7DpQ,EAAI,EAAGA,EAAIwP,GAAaW,WAAW3H,SAAS4H,MAAOpQ,IAAK,CAE/D,IAAMF,EAAI0P,GAAaW,WAAW3H,SAAS6H,KAAKrQ,GAC1CD,EAAIyP,GAAaW,WAAW3H,SAAS8H,KAAKtQ,GAC1CyI,EAAI+G,GAAaW,WAAW3H,SAAS+H,KAAKvQ,GAE1CwQ,EAAOnN,KAAKoN,MAAM3Q,EAAGC,EAAG0I,GAGxBiI,EAAK5Q,EAAI0Q,EACTG,EAAK5Q,EAAIyQ,EACTI,EAAKnI,EAAI+H,EAGfN,EAAgB,EAAJlQ,EAAQ,GAAKF,GAAK4Q,EAAK5Q,GAAK+I,EACxCqH,EAAgB,EAAJlQ,EAAQ,GAAKD,GAAK4Q,EAAK5Q,GAAK8I,EACxCqH,EAAgB,EAAJlQ,EAAQ,GAAKyI,GAAKmI,EAAKnI,GAAKI,EAI1C,IAAIgI,EAAcrB,GAAasB,QAC/BD,EAAYE,aAAa,WAAY,IAAIxI,IAAsB2H,EAAa,IAG5E,EAAKlI,MAAMgJ,OAAO,EAAKjB,MAGvB,IAAMA,EAAO,IAAIxH,IAAWsI,EAAapB,IACzC,EAAKzH,MAAMuB,IAAIwG,GACf,EAAKA,KAAOA,EAGZ,IAAIkB,EAAM,IAAI1I,IAAwB,EAAKwH,KAAK5G,UAC5C+H,EAAM,IAAI3I,IAAwB,CAAEa,MAAO,UAC3CE,EAAY,IAAIf,IAAmB0I,EAAKC,GAC5CnB,EAAKxG,IAAID,I,EAGXI,mBAAqB,WACnB,EAAK3B,SAAS+B,SACd,EAAK5B,SAAS6B,OAAO,EAAK/B,MAAO,EAAKC,QAKtC,EAAKH,UAAYjF,OAAOmH,sBAAsB,EAAKN,qB,EAGrDO,mBAAqB,WACnB,IAAMvK,EAAQ,EAAKmI,MAAMjG,QAASyG,YAC5B1I,EAAS,EAAKkI,MAAMjG,QAAS0G,aAEnC,EAAKP,SAASmC,eACd,EAAKhC,SAASY,QAAQpJ,EAAOC,I,uDAlH/B,WACEkB,KAAKuH,aACLvH,KAAKoI,wBACLpI,KAAKmP,0BACLnP,KAAK6I,qBACL7G,OAAOsH,iBAAiB,SAAUtJ,KAAKoJ,oBACvCpJ,KAAKiP,MAAMlO,QAASuI,iBAAiB,SAAUtJ,KAAKmP,2B,kCAItD,WACEnP,KAAKiP,MAAMlO,QAASwI,oBAAoB,SAAUvJ,KAAKmP,yBACvDnN,OAAOuH,oBAAoB,SAAUvJ,KAAKoJ,oBAC1CpH,OAAOwH,qBAAqBxJ,KAAKiH,WACjCjH,KAAKkH,SAAUuC,Y,oBAuGjB,WACE,OAAO,sBAAKrI,MAAOpB,KAAKQ,MAAMY,MAAOD,UAAWnB,KAAKQ,MAAMW,UAApD,UACL,qBAAKE,IAAKrB,KAAKgH,MAAO7F,UAAU,uCAChC,sBAAKA,UAAU,+BAAf,UACE,uBAAOA,UAAU,aAAjB,0BACA,uBAAO0F,KAAK,QAAQ1F,UAAU,aAAasE,IAAI,IAAID,IAAI,IAAI8K,KAAK,OAAOC,aAAa,IAAIlP,IAAKrB,KAAKiP,kB,GA3I5EvO,IAAMY,WCtB9BkP,GAAUC,sBAAYnK,KAAKC,OAM3BmK,GAAqD,SAAAlQ,GAAK,OAC9D,qBAAKW,UAAU,iBAAf,SACE,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,uCAAd,SAAsDX,EAAM6K,QAC5D,qBAAKlK,UAAU,YAAf,SAA4BX,EAAMuJ,iBA8RzB4G,GAzRW,kBACxB,cAAC,EAAD,UACE,sBAAKxP,UAAU,iBAAf,UACE,eAAC,EAAD,CAASyI,GAAG,WAAWQ,KAAK,WAA5B,UACE,uCACA,+QAIA,2CACA,0PAGO,mBAAGmB,KAAK,0CAAR,uBAHP,QAG2E,mBAAGA,KAAK,+CAAR,0BAH3E,mRAMoC,mBAAGA,KAAK,kEAAR,iDANpC,6IASA,+CACA,+EAGA,+BACE,0DACA,2EACA,6IACA,4EACA,wEACA,8EACA,0DAGJ,eAAC,EAAD,CAAS3B,GAAG,WAAWQ,KAAK,iBAA5B,UACE,0CACA,yGAC0E,8CAD1E,OAGA,eAAC,GAAD,CAAWiB,MAAM,WAAjB,oTAGE,sBAAKlK,UAAU,2BAAf,UACE,qBAAKyP,IAAKC,GAAqB1P,UAAU,qCAAqC2P,IAAI,yCAClF,iEAAmC,mBAAGvF,KAAK,kEAAR,0BALvC,yBAOwB,mBAAGA,KAAK,yCAAR,2DAPxB,OASA,2GAGA,+BACE,oDACA,qDACA,iDACA,yDAEF,gFAGA,2CACA,6dAKA,mlBAQA,qDACA,mXAMA,oTAKA,iDACA,0PAIA,gNAEiG,mDAFjG,OAIA,eAAC,GAAD,CAAWF,MAAM,gBAAjB,UACE,iEACkC,iDADlC,iNAIA,cAAC,GAAD,CAAiBlK,UAAU,UAAUC,MAAO,CAAEvC,MAAO,UACrD,2ZAMA,uMAKF,4OAIA,sDACA,yWAMA,mCACI,wDADJ,yEAGA,iHAIA,cAAC,IAAD,CAAU4M,OAAQ,IAAlB,SACE,cAAC,GAAD,CAAWJ,MAAM,mCAAjB,SACE,cAAC,IAAD,CAAO0F,QACLhF,GAAUiF,IAEPC,MAAK,SAAAhS,GAAC,MAAK,CAAE2N,IAAK3N,EAAG4N,OAAQ,QAHlC,SAKG,gBAAGqE,EAAH,EAAGA,QAAH,OAAiB,qCAChB,cAAC,IAAMC,QAAP,UACE,qBAAKhQ,UAAU,iBAAiBiQ,KAAK,aAEvC,cAAC,IAAMC,UAAP,UAAsD,YAAsB,IAAnBzE,EAAkB,EAAlBA,IAAKC,EAAa,EAAbA,OAEtDyE,EAAY3E,GAAOC,EAAK,QAASC,GACjC0E,EAAa5E,GAAOC,EAAK,SAAUC,GACnC2E,EAAe7E,GAAOC,EAAK,WAAYC,GAEvC4E,EAAYtE,GAAQmE,EAAWzE,GAC/B6E,EAAavE,GAAQoE,EAAY1E,GACjC8E,EAAexE,GAAQqE,EAAc3E,GAE3C,OAAO,sBAAK1L,UAAU,YAAf,UACL,sBAAKA,UAAU,2BAA2BC,MAAO,CAAEvC,MAAO,QAA1D,UACE,4BAAG,oDACH,cAAC,EAAD,CACEuC,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCqC,UAAU,qCACV7B,KAAMsN,IAER,gEAAkC,mBAAGrB,KAAK,oEAAR,uBAClC,sBAAKpK,UAAU,uBAAf,UACE,uBAAOA,UAAU,aAAjB,yBACA,uBAAO0F,KAAK,QAAQ1F,UAAU,aAAasE,IAAI,IAAID,IAAI,MAAM+K,aAAa,MACxEqB,SAAU,SAAAC,GAAC,OAAIX,EAAQ,CAAErE,OAAQgF,EAAEC,OAAO1C,cAAexC,iBAI/D,sBAAKzL,UAAU,MAAf,UACE,sBAAKA,UAAU,MAAf,UACE,8DACA,iDACA,cAAC,EAAD,CACEA,UAAU,qBACVC,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCQ,KAAMgS,IAER,8CACA,cAAC,EAAD,CACEnQ,UAAU,qBACVC,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCQ,KAAMmS,OAGV,sBAAKtQ,UAAU,MAAf,UACE,iEACA,iDACA,cAAC,EAAD,CACEA,UAAU,qBACVC,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCQ,KAAMiS,IAER,8CACA,cAAC,EAAD,CACEpQ,UAAU,qBACVC,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCQ,KAAMoS,OAGV,sBAAKvQ,UAAU,MAAf,UACE,iEACA,iDACA,cAAC,EAAD,CACEA,UAAU,qBACVC,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCQ,KAAMkS,IAER,8CACA,cAAC,EAAD,CACErQ,UAAU,qBACVC,MAAO,CAAEvC,MAAO,OAAQC,OAAQ,QAChCQ,KAAMqS,0BAWxB,6CACA,+BACE,0GACA,0GACA,gHAEF,8HACA,yRAMF,eAAC,EAAD,CAAS/H,GAAG,oBAAoBQ,KAAK,qBAArC,UACE,uCACA,+HAEyC,oDAFzC,OAIA,eAAC,GAAD,CAAWiB,MAAM,iBAAjB,UACE,kGAAoE,iDAApE,kCACA,cAAC,IAAD,CAAUvM,OAAQ,IAAlB,SACE,cAAC,EAAD,CACEqC,UAAU,qCACV7B,KAAMZ,EAAa,IAAIiB,EAAU,IAAK,IAAK6C,KAAKM,aAGpD,kNAIA,uOAKA,sEACA,cAAC,IAAD,CAAUhE,OAAQ,IAAlB,SACE,cAAC,EAAD,CACEqC,UAAU,qCACV7B,KAAMZ,EAAa,IAAIiB,EAAU,IAAK,KAAK,SAACV,EAAGC,GAAJ,OAAUsR,GAAQvR,EAAI,GAAIC,EAAI,IAAM,EAAI,WAGvF,gHAGA,mGACA,+BACE,6BAAI,mBAAGqM,KAAK,yDAAR,wCACJ,6BAAI,mBAAGA,KAAK,6CAAR,4BACJ,6BAAI,mBAAGA,KAAK,8CAAR,6BACJ,6BAAI,mBAAGA,KAAK,kDAAR,oCAEN,6HCjTKC,GAVA,kBACb,cAAC,EAAD,UACE,qBAAKrK,UAAU,iBAAf,SACE,cAAC,EAAD,CAASyI,GAAG,SAASQ,KAAK,SAA1B,SACE,wBAAQiB,MAAM,SAASuF,IAAKmB,EAAY3Q,MAAO,CAAEvC,MAAO,OAAQmT,YAAa,gBCStEC,OAhBf,WACE,OACE,qBAAK7Q,MAAO,CACV0J,QAAS,OACThM,OAAQ,QACRD,MAAO,SAHT,SAKE,sBAAKsC,UAAU,8BAAf,UACE,4CACA,gDACA,cAAC,IAAD,CAAMwI,GAAG,IAAT,+BCTO,SAASuI,KACtB,IAAQC,EAAaC,cAAbD,SAMR,OAJAE,qBAAU,WACRrQ,OAAOsQ,SAAS,EAAG,KAClB,CAACH,IAEG,K,YCmBMI,OAff,WACE,OACE,eAAC,IAAD,WACE,cAACL,GAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOM,KAAK,IAAIC,OAAK,EAACC,UAAWpH,IACjC,cAAC,IAAD,CAAOkH,KAAK,YAAYC,OAAK,EAACC,UAAW/G,IACzC,cAAC,IAAD,CAAO6G,KAAK,qBAAqBC,OAAK,EAACC,UAAW/B,KAClD,cAAC,IAAD,CAAO6B,KAAK,UAAUC,OAAK,EAACC,UAAWlH,KACvC,cAAC,IAAD,CAAOgH,KAAK,IAAIE,UAAWT,YCnBnCU,IAASzJ,OACP,cAAC,IAAM0J,WAAP,UACE,cAAC,GAAD,MAEFrG,SAASsG,eAAe,W","file":"static/js/main.588ef2e5.chunk.js","sourcesContent":["import ScalarMap from './ScalarMap';\n\nexport function grayscaleMap(hmap: ScalarMap) {\n  const { width, height } = hmap.dims();\n  const imageData = new ImageData(width, height);\n  for (let x = 0; x < width; x++) {\n    for (let y = 0; y < height; y++) {\n      const i = (x + y * width) * 4;\n      const value = hmap.getv(x, y);\n      imageData.data[i + 0] = value * 255;\n      imageData.data[i + 1] = value * 255;\n      imageData.data[i + 2] = value * 255;\n      imageData.data[i + 3] = 255;\n    }\n  }\n  return imageData;\n}\n\nexport function thresholdHeightMap(hmap: ScalarMap, thresh: number, threshcol: [number, number, number]): ImageData {\n  const { width, height } = hmap.dims();\n  const imageData = new ImageData(width, height);\n  for (let x = 0; x < width; x++) {\n    for (let y = 0; y < height; y++) {\n      const i = (x + y * width) * 4;\n      const value = hmap.getv(x, y);\n      if (value > thresh) {\n        imageData.data[i + 0] = value * 255;\n        imageData.data[i + 1] = value * 255;\n        imageData.data[i + 2] = value * 255;\n        imageData.data[i + 3] = 255;\n      } else {\n        imageData.data[i + 0] = threshcol[0];\n        imageData.data[i + 1] = threshcol[1];\n        imageData.data[i + 2] = threshcol[2];\n        imageData.data[i + 3] = 255;\n      }\n    }\n  }\n  return imageData;\n}\n","import React from 'react';\nimport assert from 'assert';\n\nimport { thresholdHeightMap } from '../map';\n\nimport { makeNoise2D, makeNoise4D } from 'open-simplex-noise';\nimport ScalarMap from '../ScalarMap';\nimport VectorMap from '../VectorMap';\n\n\nimport ImageDataDisplay from '../components/ImageDataDisplay';\nimport VectorMapDisplay from '../components/VectorMapDisplay';\n\nfunction makeTorusNoise2D(scale: number, seed: number) {\n  const noise4 = makeNoise4D(seed);\n  return (theta: number, phi: number) => noise4(\n    Math.cos(theta * Math.PI * 2) / scale, Math.sin(theta * Math.PI * 2) / scale,\n    Math.cos(phi * Math.PI * 2) / scale, Math.sin(phi * Math.PI * 2) / scale\n  );\n}\n\nfunction createCurlNoise(xsize: number, ysize: number, seed: number) {\n  function sampleCurlNoise(noise: (x: number, y: number) => number, x: number, y: number) {\n    const EPSILON = 0.0001;\n    //Find rate of change in X direction\n    const dxs1 = noise(x + EPSILON, y);\n    const dxs2 = noise(x - EPSILON, y);\n    //Average to find approximate derivative\n    const dx = (dxs1 - dxs2) / (2 * EPSILON);\n    //Find rate of change in Y direction\n    const dys1 = noise(x, y + EPSILON);\n    const dys2 = noise(x, y - EPSILON);\n    //Average to find approximate derivative\n    const dy = (dys1 - dys2) / (2 * EPSILON);\n    //Curl\n    return [dy, -dx];\n  }\n\n  let ret = new VectorMap(xsize, ysize);\n\n  const noise = makeTorusNoise2D(3, seed);\n\n  // find rate of change in X direction by averaging together 2 samples\n  for (let x = 0; x < xsize; x++) {\n    for (let y = 0; y < ysize; y++) {\n      ret.setv(x, y, sampleCurlNoise(noise, x / xsize, y / ysize));\n    }\n  }\n  return ret;\n}\n\n\nfunction createElevationMap(xsize: number, ysize: number, seed: number) {\n  function createFractalNoise(\n    x: number,\n    y: number,\n    noises: {\n      noise: (x: number, y: number) => number,\n      weight: number\n    }[]\n  ) {\n    let sum = 0;\n    for (const { noise, weight } of noises) {\n      sum += noise(x, y) * weight;\n    }\n    return sum;\n  }\n\n  const octaves = [\n    { scale: 1.20, weight: 70 },\n    { scale: 0.64, weight: 19 },\n    { scale: 0.32, weight: 15 },\n    { scale: 0.16, weight: 13 },\n    { scale: 0.08, weight: 8 },\n    { scale: 0.04, weight: 5 },\n    { scale: 0.03, weight: 3 },\n  ];\n\n  const weightsum = octaves.map(o => o.weight).reduce((a, b) => a + b);\n\n  const rnoises = octaves.map(({ scale, weight }, i) => ({\n    noise: makeTorusNoise2D(scale, seed + i),\n    weight: weight / weightsum\n  }));\n\n\n  function createMountainNoise(\n    x: number,\n    y: number,\n    noise: (x: number, y: number) => number,\n  ) {\n    return Math.pow(1 - Math.abs(noise(x, y)), 3);\n  }\n\n  const mnoise = makeTorusNoise2D(3, seed - 1);\n\n  const clamp = (x: number) => Math.max(Math.min(x, 1), 0)\n\n  // where results will be written to, (0.0 -> 1.0)\n  let dest = new ScalarMap(xsize, ysize);\n\n  for (let x = 0; x < xsize; x++) {\n    for (let y = 0; y < ysize; y++) {\n      const rval = createFractalNoise(x / xsize, y / ysize, rnoises) + 0.5;\n\n      const mval = createMountainNoise(x / xsize, y / ysize, mnoise) + 0.5;\n\n      const val = Math.pow(mval * 0.3 + rval * 0.7, 4);\n      dest.setv(x, y, clamp(val));\n    }\n  }\n\n  return dest;\n}\n\n\n\n// temperature calculated in celsius\n// Affected by elevation and latitude\nfunction createTemperatureMap(elevation: ScalarMap, seed: number) {\n  const random = makeNoise2D(seed);\n  const { width, height } = elevation.dims();\n  const tmap = new ScalarMap(width, height);\n\n  for (let x = 0; x < width; x++) {\n    for (let y = 0; y < height; y++) {\n\n    }\n  }\n\n}\n\nenum TerrainGenIntroPhase {\n  HeightMapGen,\n  OceanGen,\n  WindMapGen,\n}\n\ninterface TerrainGenIntroProps {\n  width: number,\n  height: number,\n  style?: React.CSSProperties,\n  className: string,\n}\n\ninterface TerrainGenIntroState {\n  state: TerrainGenIntroPhase,\n  // the initial heightmap that will be modified\n  initialElevation: ScalarMap | null,\n  airCurrents: VectorMap | null,\n  rmap: ScalarMap | null,\n  histtemp: ScalarMap | null,\n  currtemp: ScalarMap | null,\n}\n\nclass TerrainGenIntro extends React.Component<TerrainGenIntroProps, TerrainGenIntroState>{\n\n  constructor(props: TerrainGenIntroProps) {\n    super(props);\n    this.state = {\n      state: TerrainGenIntroPhase.HeightMapGen,\n      initialElevation: createElevationMap(this.props.width, this.props.height, Date.now()),\n      airCurrents: null,\n      rmap: null,\n      histtemp: null,\n      currtemp: null,\n    };\n  }\n\n\n  nextPhaseClick = (event: React.MouseEvent) => {\n\n    event.preventDefault();\n    let nextphase;\n    switch (this.state.state) {\n      case TerrainGenIntroPhase.HeightMapGen: {\n        nextphase = TerrainGenIntroPhase.OceanGen;\n        break;\n      }\n      case TerrainGenIntroPhase.OceanGen: {\n        this.setState({\n          airCurrents: createCurlNoise(this.props.width, this.props.height, Date.now())\n        });\n        nextphase = TerrainGenIntroPhase.WindMapGen;\n        break;\n      }\n      case TerrainGenIntroPhase.WindMapGen: {\n        nextphase = TerrainGenIntroPhase.HeightMapGen;\n        break;\n      }\n    }\n    this.setState({\n      state: nextphase,\n    });\n  }\n\n  render() {\n    switch (this.state.state) {\n      case TerrainGenIntroPhase.HeightMapGen: {\n        assert(this.state.initialElevation != null);\n        return <>\n          <ImageDataDisplay\n            className={this.props.className}\n            style={this.props.style}\n            data={thresholdHeightMap(this.state.initialElevation, 0, [0, 0, 0])}\n          />\n          <div>\n            <button type=\"button\" className=\"btn btn-dark\" onClick={this.nextPhaseClick}>\n              Next Phase\n            </button>\n          </div>\n        </>\n      }\n      case TerrainGenIntroPhase.OceanGen: {\n        assert(this.state.initialElevation != null);\n        return <>\n          <ImageDataDisplay\n            className={this.props.className}\n            style={this.props.style}\n            data={thresholdHeightMap(this.state.initialElevation, 0.2, [0x07, 0x66, 0x78])}\n          />\n          <div>\n            <button type=\"button\" className=\"btn btn-dark\" onClick={this.nextPhaseClick}>\n              Next Phase\n            </button>\n          </div>\n        </>\n      }\n      case TerrainGenIntroPhase.WindMapGen: {\n        assert(this.state.initialElevation != null);\n        assert(this.state.airCurrents != null);\n        return <>\n          <VectorMapDisplay\n            className={this.props.className}\n            style={this.props.style}\n            vmap={this.state.airCurrents}\n            base={thresholdHeightMap(this.state.initialElevation, 0.2, [0x07, 0x66, 0x78])}\n          />\n          <div>\n            <button type=\"button\" className=\"btn btn-dark\" onClick={this.nextPhaseClick}>\n              Reset\n            </button>\n          </div>\n        </>\n      }\n    }\n  }\n}\n\n\nexport default TerrainGenIntro;\n","import assert from 'assert';\n\nclass ScalarMap {\n  private arr: Float32Array;\n  private readonly xsize: number;\n  private readonly ysize: number;\n\n  constructor(xsize: number, ysize: number, fn?: (x: number, y: number) => number) {\n    this.arr = new Float32Array(xsize * ysize);\n    this.xsize = xsize;\n    this.ysize = ysize;\n    if (!!fn) {\n      for (let y = 0; y < ysize; y++) {\n        for (let x = 0; x < xsize; x++) {\n          this.arr[x + y * ysize] = fn(x, y);\n        }\n      }\n    }\n  }\n\n  getv(x: number, y: number) {\n    assert(x < this.xsize);\n    assert(y < this.ysize);\n    return this.arr[this.xsize * y + x];\n  }\n\n  setv(x: number, y: number, v: number) {\n    assert(x < this.xsize);\n    assert(y < this.ysize);\n    assert(v >= 0 && v <= 1.0);\n    this.arr[this.xsize * y + x] = v;\n  }\n\n  dims() {\n    return { width: this.xsize, height: this.ysize };\n  }\n\n}\n\nexport default ScalarMap;\n","import assert from 'assert';\n\nclass VectorMap {\n  private arr: Float32Array;\n  private xsize: number;\n  private ysize: number;\n\n  constructor(xsize: number, ysize: number) {\n    this.arr = new Float32Array(xsize * ysize * 2);\n    this.xsize = xsize;\n    this.ysize = ysize;\n  }\n\n  getv(x: number, y: number) {\n    assert(x < this.xsize);\n    assert(y < this.ysize);\n    return [this.arr[(this.xsize * y + x) * 2 + 0],\n    this.arr[(this.xsize * y + x) * 2 + 1]];\n  }\n\n  setv(x: number, y: number, v: number[]) {\n    assert(x < this.xsize);\n    assert(y < this.ysize);\n    let [vx, vy] = v;\n    this.arr[(this.xsize * y + x) * 2 + 0] = vx;\n    this.arr[(this.xsize * y + x) * 2 + 1] = vy;\n  }\n\n  dims() {\n    return { width: this.xsize, height: this.ysize };\n  }\n\n}\n\nexport default VectorMap;\n","import React from 'react';\n\n// Object displaying some image data\n\ninterface ImageDataDisplayProps {\n  data: ImageData,\n  className?: string,\n  style?: React.CSSProperties\n}\n\nclass ImageDataDisplay extends React.Component<ImageDataDisplayProps> {\n\n  private displayCanvas = React.createRef<HTMLCanvasElement>();\n\n  constructor(props: ImageDataDisplayProps) {\n    super(props);\n    this.paint = this.paint.bind(this);\n  }\n\n  componentDidMount() {\n    this.paint();\n  }\n\n  componentDidUpdate() {\n    this.paint();\n  }\n\n  paint() {\n    const canvas = this.displayCanvas.current;\n    if (canvas != null) {\n      const context = canvas.getContext(\"2d\");\n      if (context != null) {\n        context.putImageData(this.props.data, 0, 0);\n      }\n    }\n  }\n\n  render() {\n    const { width, height } = this.props.data;\n    return <canvas\n      className={this.props.className}\n      style={this.props.style}\n      ref={this.displayCanvas}\n      width={width}\n      height={height}\n    />\n  }\n}\n\nexport default ImageDataDisplay;\n","import React from 'react';\nimport ScalarMap from '../ScalarMap';\nimport VectorMap from '../VectorMap';\n\n\ntype VectorMapDisplayParticle = {\n  x: number;\n  y: number;\n  age: number;\n}\n\ninterface VectorMapDisplayState {\n  alphaData: ScalarMap;\n  particles: VectorMapDisplayParticle[];\n  intervalCode: number | null;\n}\n\ninterface VectorMapDisplayProps {\n  vmap: VectorMap;\n  base: ImageData;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nclass VectorMapDisplay extends React.Component<VectorMapDisplayProps, VectorMapDisplayState> {\n  private displayCanvas = React.createRef<HTMLCanvasElement>();\n\n  constructor(props: VectorMapDisplayProps) {\n    super(props);\n    this.paint = this.paint.bind(this);\n    this.tick = this.tick.bind(this);\n    const { width, height } = props.base;\n    this.state = {\n      alphaData: new ScalarMap(width, height),\n      particles: new Array<VectorMapDisplayParticle>(),\n      intervalCode: null,\n    }\n  }\n\n  componentDidMount() {\n    this.setState({ intervalCode: window.setInterval(this.tick, 100) });\n  }\n\n  componentWillUnmount() {\n    if (!!this.state.intervalCode) {\n      window.clearInterval(this.state.intervalCode)\n    }\n    this.setState({ intervalCode: null })\n  }\n\n  componentDidUpdate() {\n    this.paint();\n  }\n\n\n  tick() {\n    const { width, height } = this.state.alphaData.dims();\n    // update particles\n    const nparticles = this.state.particles.map(\n      (p) => {\n        // move particles\n        const dir = this.props.vmap.getv(Math.floor(p.x), Math.floor(p.y));\n        return {\n          x: p.x + dir[0] / 2,\n          y: p.y + dir[1] / 2,\n          age: p.age + 1\n        }\n      })\n      // decay particles that are outside boundaries or too old\n      .filter((p) => p.x > 0 && p.x < width && p.y > 0 && p.y < height && p.age < 100)\n      .concat(\n        // Add more particles\n        [...Array<VectorMapDisplayParticle>(4)]\n          .map(_ => ({\n            x: Math.random() * width,\n            y: Math.random() * height,\n            age: 0,\n          }))\n      );\n\n    // regen imagedata\n    let ndata = new ScalarMap(width, height);\n    for (let x = 0; x < width; x++) {\n      for (let y = 0; y < height; y++) {\n        ndata.setv(x, y, this.state.alphaData.getv(x, y) / 1.1);\n      }\n    }\n\n    for (const p of nparticles) {\n      ndata.setv(Math.floor(p.x), Math.floor(p.y), 1);\n    }\n\n\n    this.setState({\n      alphaData: ndata,\n      particles: nparticles\n    });\n  }\n\n  paintHeightMap(ctx: CanvasRenderingContext2D) {\n    const { width, height } = this.props.base;\n    ctx.putImageData(this.props.base, 0, 0);\n    let final = new ImageData(width, height);\n    for (let x = 0; x < width; x++) {\n      for (let y = 0; y < height; y++) {\n        const bindex = (width * y + x) * 4;\n        final.data[bindex + 0] = this.props.base.data[bindex + 0];\n        final.data[bindex + 1] = this.props.base.data[bindex + 1] + this.state.alphaData.getv(x, y) * 255;\n        final.data[bindex + 2] = this.props.base.data[bindex + 2];\n        final.data[bindex + 3] = this.props.base.data[bindex + 3];\n      }\n    }\n    ctx.putImageData(final, 0, 0);\n  }\n\n  paint() {\n    const maybeCanvas = this.displayCanvas.current;\n    if (maybeCanvas != null) {\n      const maybeContext = maybeCanvas.getContext(\"2d\");\n      if (maybeContext != null) {\n        this.paintHeightMap(maybeContext);\n      }\n    }\n  }\n\n  render() {\n    const { width, height } = this.props.base;\n    return (\n      <canvas\n        style={this.props.style}\n        className={this.props.className}\n        ref={this.displayCanvas}\n        width={width}\n        height={height}\n      />\n    );\n  }\n}\n\nexport default VectorMapDisplay;\n","import React from \"react\";\nimport * as THREE from 'three';\nimport { TrackballControls } from \"three/examples/jsm/controls/TrackballControls\";\n\n\ntype WireframeRendererProps = {\n  style: React.CSSProperties,\n  geometries: {\n    geometry: THREE.BufferGeometry\n    color: number\n  }[]\n}\n\ntype WireframeRendererState = {}\n\nclass WireframeRenderer extends React.Component<WireframeRendererProps, WireframeRendererState> {\n\n  // this is the ref that three js uses\n  private mount = React.createRef<HTMLDivElement>();\n\n  // we assume these variables are properly initialized\n  private requestID!: number;\n  private controls!: TrackballControls;\n  private scene!: THREE.Scene;\n  private camera!: THREE.OrthographicCamera;\n  private renderer!: THREE.WebGLRenderer;\n  private wireframeMesh: THREE.Mesh[] = [];\n\n\n  componentDidMount() {\n    this.sceneSetup();\n    this.addCustomSceneObjects();\n    this.startAnimationLoop();\n    window.addEventListener('resize', this.handleWindowResize);\n  }\n\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleWindowResize);\n    window.cancelAnimationFrame(this.requestID!);\n    this.controls!.dispose();\n  }\n\n  // Standard scene setup in Three.js. Check \"Creating a scene\" manual for more information\n  // https://threejs.org/docs/#manual/en/introduction/Creating-a-scene\n  sceneSetup = () => {\n    // get container dimensions and use them for scene sizing\n    const width = this.mount.current!.clientWidth;\n    const height = this.mount.current!.clientHeight;\n\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.OrthographicCamera(\n      -10,\n      10,\n      10,\n      -10,\n    );\n\n    this.camera.position.z = 10; // is used here to set some distance from a cube that is located at z = 0\n    // TrackballControls allow a camera to trackball around the object\n    // https://threejs.org/docs/#examples/controls/TrackballControls\n    this.controls = new TrackballControls(this.camera, this.mount.current!);\n\n    this.controls.noPan = true;\n    this.controls.noZoom = true;\n\n    this.renderer = new THREE.WebGLRenderer({ alpha: true }); // alpha true enables transparency\n    this.renderer.setSize(width, height);\n    this.mount.current!.appendChild(this.renderer.domElement); // mount using React ref\n  };\n\n  // Here should come custom code.\n  // Code below is taken from Three.js BoxGeometry example\n  // https://threejs.org/docs/#api/en/geometries/BoxGeometry\n  addCustomSceneObjects = () => {\n\n    // create wireframe from provided geometry\n    for (const { geometry, color } of this.props.geometries) {\n      const material = new THREE.MeshBasicMaterial({\n        wireframe: true,\n        color: color,\n      });\n\n      // add wireframe\n      const wireframe = new THREE.Mesh(geometry, material);\n      this.scene.add(wireframe);\n      this.wireframeMesh.push(wireframe);\n    }\n\n    // add ambient light\n    const ambientLight = new THREE.AmbientLight(0xffffff);\n    this.scene.add(ambientLight);\n  };\n\n  startAnimationLoop = () => {\n    this.wireframeMesh.forEach(w => w.rotateY(0.005));\n    this.controls.update();\n    this.renderer.render(this.scene, this.camera);\n\n    // The window.requestAnimationFrame() method tells the browser that you wish to perform\n    // an animation and requests that the browser call a specified function\n    // to update an animation before the next repaint\n    this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\n  };\n\n  handleWindowResize = () => {\n    const width = this.mount.current!.clientWidth;\n    const height = this.mount.current!.clientHeight;\n\n    this.controls.handleResize();\n    this.renderer.setSize(width, height);\n\n    // only for perspective cameras\n    /*\n     * this.camera.aspect = width / height;\n     * // Note that after making changes to most of camera properties you have to call\n     * // .updateProjectionMatrix for the changes to take effect.\n     * this.camera.updateProjectionMatrix();\n     */\n  };\n\n  render() {\n    return <div style={this.props.style} ref={this.mount} />;\n  }\n}\n\nexport default WireframeRenderer;\n","import { Link } from 'react-router-dom';\nimport { ThreeDotsVertical } from 'react-bootstrap-icons'\n\nconst Header = () =>\n  <header className=\"pb-5\">\n    <nav className={\"navbar navbar-expand-lg py-3 fixed-top bg-secondary\"}>\n      <div className=\"container d-flex\">\n        <Link className=\"navbar-brand\" to=\"/\"><strong>Govind Pimpale</strong></Link>\n        {/*Collapsible Button*/}\n        <button type=\"button\" className=\"navbar-toggler\"\n          data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\"\n          aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"\n        >\n          <ThreeDotsVertical className=\"text-body\" />\n        </button>\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          {/*Left Aligned*/}\n          <div className=\"navbar-nav\">\n            <Link to=\"/resume\" className=\"nav-item nav-link\"><strong>Resume</strong></Link>\n            <Link to=\"/projects\" className=\"nav-item nav-link\"><strong>Projects</strong></Link>\n          </div>\n          {/*Right Aligned*/}\n          <div className=\"navbar-nav ms-auto\">\n            <Link to=\"/terraingeneration\" className=\"nav-item nav-link\"><strong>Terrain Generation</strong></Link>\n            <Link to=\"/gravity\" className=\"nav-item nav-link\"><strong>Gravity</strong></Link>\n            <Link to=\"/achernar\" className=\"nav-item nav-link\"><strong>Achernar</strong></Link>\n          </div>\n        </div>\n      </div>\n    </nav>\n  </header>\n\nexport default Header;\n","import React from 'react';\nimport Header from './Header';\n\nfunction Footer() {\n  return (\n    <footer className=\"container-fluid my-3\"><br />\n      <p>&copy; Govind Pimpale, MIT Licensed</p>\n    </footer>\n  )\n}\n\n\nconst Layout: React.FunctionComponent<{}> = props =>\n  <>\n    <Header />\n    {props.children}\n    <Footer />\n  </>\n\nexport default Layout;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\ntype SectionProps = {\n  id: string\n  name: string\n}\n\nconst Section: React.FunctionComponent<SectionProps> = props => {\n  return <section className=\"mt-5\" style={{ overflow: \"hidden\", position: \"relative\", }}>\n    <span\n      id={props.id}\n      style={{\n        position: \"absolute\",\n        top: \"-100px\",\n        visibility: \"hidden\",\n      }}></span>\n    <div>\n      <Link to={`#${props.id}`} className=\"float-end text-muted\"><h3>#</h3></Link>\n      <h2>{props.name}</h2>\n    </div>\n    {props.children}\n  </section>\n}\n\nexport default Section;\n","export default __webpack_public_path__ + \"static/media/govind_pimpale_resume.1587fc69.pdf\";","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport * as THREE from 'three';\nimport TerrainGenIntro from '../components/TerrainGenIntro';\nimport WireframeRenderer from '../components/WireframeRenderer';\nimport Layout from '../components/Layout';\nimport Section from '../components/Section';\nimport LazyLoad from 'react-lazyload';\nimport { useMediaQuery } from 'react-responsive'\n\nimport Resume from '../assets/govind_pimpale_resume.pdf';\n\nimport { CaretDownFill } from 'react-bootstrap-icons';\n\ntype RotatedProps = {\n  rotation: number,\n  distance: number,\n  // when collapsed should this be its own row\n  ownRow?: boolean\n}\n\nconst Rotated: React.FunctionComponent<RotatedProps> = props => {\n\n  if (!useMediaQuery({ minWidth: 992 })) {\n    const mx = `${props.ownRow ? 20 : 1}em`;\n    return <div style={{ marginLeft: mx, marginRight: mx}} className=\"my-3\" >\n      {props.children}\n    </div>\n  } else {\n    const xDisplacement = Math.cos(props.rotation * (Math.PI / 180));\n    let transformCss;\n\n    if (xDisplacement < -0.1) {\n      // Left\n      transformCss = {\n        transformOrigin: \"right\",\n        transform: `rotate(${props.rotation}deg) translate(${props.distance}em) rotate(${-props.rotation}deg) translate(-100%, -50%)`,\n      }\n    } else if (xDisplacement > 0.1) {\n      // Right\n      transformCss = {\n        transformOrigin: \"left\",\n        transform: `rotate(${props.rotation}deg) translate(${props.distance}em) rotate(${-props.rotation}deg) translate(0%, -50%)`,\n      };\n    } else {\n      // Center\n      transformCss = {\n        transformOrigin: \"center\",\n        transform: `rotate(${props.rotation}deg) translate(${props.distance}em) rotate(${-props.rotation}deg) translate(-50%, -50%)`,\n      };\n    }\n\n    const blockCss = {\n      display: \"block\",\n      position: \"absolute\" as const,\n      top: \"50%\",\n      left: \"50%\",\n    };\n\n    return <div style={{ ...transformCss, ...blockCss }}>\n      {props.children}\n    </div>\n  }\n}\n\ntype IntroCardProps = {\n  title: string,\n}\n\nconst IntroCard: React.FunctionComponent<IntroCardProps> = props =>\n  <div className=\"card\" style={{ width: \"15rem\" }}>\n    <div className=\"card-body\">\n      <h5 className=\"card-title\">{props.title}</h5>\n      <div className=\"card-text\">{props.children}</div>\n    </div>\n  </div>\n\n\nconst Home = () =>\n  <Layout>\n    <div className=\"min-vh-100 d-flex justify-content-center flex-wrap\">\n      <Rotated distance={0} rotation={90} ownRow>\n        <WireframeRenderer\n          style={{ width: \"20em\", height: \"20em\" }}\n          geometries={[{\n            geometry: new THREE.IcosahedronGeometry(5),\n            color: 0xEBDBB2\n          }]}\n        />\n      </Rotated>\n      {/* Data */}\n      <Rotated distance={15} rotation={-45} >\n        <IntroCard title=\"About\">\n          <a href=\"#about\">About me, my projects, and this site</a>\n        </IntroCard>\n      </Rotated>\n      <Rotated distance={15} rotation={0} >\n        <IntroCard title=\"Innexgo\">\n          <a href=\"#innexgo\">Open source education systems</a>\n        </IntroCard>\n      </Rotated>\n      <Rotated distance={15} rotation={45} >\n        <IntroCard title=\"Source\">\n          <a href=\"https://github.com/pimpale/pimpale.github.io\">View source code for this site</a>\n        </IntroCard>\n      </Rotated>\n      <Rotated distance={15} rotation={-45 + 180} >\n        <IntroCard title=\"Achernar\">\n          <a href=\"#achernar\">A minimalistic, secure, and low level language</a>\n        </IntroCard>\n      </Rotated>\n      <Rotated distance={15} rotation={0 + 180} >\n        <IntroCard title=\"Terrain Generation\">\n          <a href=\"#terraingeneration\">Demo Procedural Generation System</a>\n        </IntroCard>\n      </Rotated>\n      <Rotated distance={15} rotation={45 + 180} >\n        <IntroCard title=\"Resume\" >\n          <Link to=\"/resume\">View Resume</Link>\n        </IntroCard>\n      </Rotated>\n      {/* Down button */}\n      <Rotated distance={20} rotation={90} ownRow>\n        <a href=\"#about\" className=\"btn btn-secondary border-dark\" aria-label=\"About\"><CaretDownFill /></a>\n      </Rotated>\n    </div>\n    <div id=\"content\" className=\"container\">\n      <Section id=\"about\" name=\"About\">\n        <h5>Me</h5>\n        <p>\n          I'm a student at UCLA, studying Computer Science and Engineering.\n          I believe in <a\n            href=\"https://globalprioritiesinstitute.org/wp-content/uploads/2019/Greaves_MacAskill_The_Case_for_Strong_Longtermism.pdf\">\n            Strong Longtermism\n          </a> and the <a href=\"https://suckless.org/philosophy/\">Suckless philosophy</a>.\n          In my free time, I enjoy recreational programming (especially in C).\n          I currently work at <a href=\"https://innexgo.com\">Innexgo</a>, making educational software.\n        </p>\n        <ul>\n          <li><a href=\"https://github.com/pimpale/\">Github</a></li>\n          <li><a href=\"https://www.linkedin.com/in/govind-pimpale/\">LinkedIn</a></li>\n          <li><a href={Resume}>Resume</a></li>\n        </ul>\n        <h5>Projects</h5>\n        <p>\n          Most of my projects are licensed permissively, usually under MIT or the Unlicense. If they're not on the site,\n          you can find them <a href=\"https://github.com/pimpale/\">here</a>. You can also follow me on github to keep up to date on their development.\n        </p>\n        <h5>Site</h5>\n        <p>\n          This site was made\n          using <a href=\"https://reactjs.org/\">ReactJS</a> and <a href=\"https://www.typescriptlang.org/\">Typescript</a>,\n          with the animations in <a href=\"https://threejs.org/\">three.js</a>.\n          All content on this site is licensed under the MIT license unless otherwise specified.\n          The source of this website can be found <a href=\"https://github.com/pimpale/pimpale.github.io\">here</a>.\n        </p>\n      </Section>\n      <Section id=\"innexgo\" name=\"Innexgo\">\n        <p>\n          In 2018 I helped create Innexgo, an open source student attendance system. Innexgo uses RFID stickers to automatically take\n          attendance without wasting student or teacher time and provides data analysis tools for converting raw attendance data to useful\n          graphs and statistics.\n        </p>\n        <p>\n          <a href=\"https://innexgo.com\">Company Website</a>\n          <br />\n          <a href=\"https://github.com/innexgo\">Source Code</a>\n        </p>\n      </Section>\n      <Section id=\"achernar\" name=\"Achernar\">\n        <h5>Goals</h5>\n        Achernar is a <b><i>Work In Progress</i></b> programming language focusing on:\n        <ul>\n          <li>\n            <b>Minimalism</b>: Achernar strives to be <i>orthogonal</i>.\n            Language features are simple to understand, independent, and highly composable.\n            As such, minimalism is both possible and ergonomic.\n          </li>\n          <li><b>Versatility</b>: Achernar does not lock the user into any particular framework and is highly unopinionated.\n            Use Achernar compiled or interpreted. It can be easily dropped into any existing project without dragging in any dependencies.\n          </li>\n          <li><b>Safe</b>: Achernar is designed with type safety in mind. It is strongly typed and offers additional Ada\n            style contract programming.\n          </li>\n        </ul>\n        <h5>Current Status</h5>\n        <p>\n          I am currently about 50% through writing the first compiler in C that will compile Achernar code.\n          The compiler uses its own custom standard library called <code>comlib</code> that will evolve into Achernar's standard library.\n        </p>\n        <h5>Additional Information</h5>\n        <p>\n          <Link to=\"https://github.com/pimpale/achernar\">Achernar Source Code</Link>\n          <br />\n          <Link to=\"/achernar\">More Info</Link>\n        </p>\n      </Section>\n      <br />\n      <Section id=\"terraingeneration\" name=\"TerrainGeneration\">\n        <div>\n          {/* This is pretty expensive to load so we'll only do it when necessary */}\n          <LazyLoad height={800} offset={100}>\n            <TerrainGenIntro\n              width={400}\n              height={400}\n              style={{ width: 800, maxWidth: \"100%\"}}\n              className=\"border border-dark ratio ratio-1x1\"\n            />\n          </LazyLoad>\n          <br />\n          <Link to=\"/terraingeneration\">More Terrain Generation</Link>\n        </div>\n      </Section>\n      <br />\n    </div>\n  </Layout>\n\n\nexport default Home;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport Section from '../components/Section';\n\nfunction Achernar() {\n  return <Layout>\n  <Section id=\"operators\" name=\"Operators\">\n\n  </Section>\n  </Layout>\n}\n\nexport default Achernar;\n","import assert from 'assert';\n\nexport function mod(n: number, m: number) {\n  return ((n % m) + m) % m;\n}\n\nexport async function loadImage(imageUrl: string) {\n  const response = await fetch(imageUrl);\n  const fileBlob = await response.blob();\n  const bitmap = await createImageBitmap(fileBlob);\n  const canvas = document.createElement('canvas');\n  canvas.width = bitmap.width;\n  canvas.height = bitmap.height;\n  const context = canvas.getContext('2d')!;\n  context.drawImage(bitmap, 0, 0);\n  return context.getImageData(0, 0, bitmap.width, bitmap.height);\n}\n\n\nexport type BoundaryConditions = \"FIXED\" | \"MIRROR\" | \"PERIODIC\";\n\n\n// extends an image so that it can be processed by the given matrix\nexport function extend(img: ImageData, b: BoundaryConditions, radius: number): ImageData {\n  // radius is the amount we have to pad the image with\n  assert(radius > 0, \"radius must be positive\");\n\n  let newImg = new ImageData(img.height + radius * 2, img.width + radius * 2);\n\n  switch (b) {\n    case \"FIXED\": {\n      for (let y = 0; y < newImg.width; y++) {\n        for (let x = 0; x < newImg.height; x++) {\n          // clamp x and y between the correct values\n          const srcx = Math.max(Math.min(x - radius, img.width - 1), 0);\n          const srcy = Math.max(Math.min(y - radius, img.height - 1), 0);\n\n          // calculate base indexes\n          const srcbasei = (srcy * img.width + srcx) * 4;\n          const destbasei = (y * newImg.width + x) * 4;\n\n          // copy r, g, b, a\n          newImg.data[destbasei + 0] = img.data[srcbasei + 0];\n          newImg.data[destbasei + 1] = img.data[srcbasei + 1];\n          newImg.data[destbasei + 2] = img.data[srcbasei + 2];\n          newImg.data[destbasei + 3] = img.data[srcbasei + 3];\n        }\n      }\n      break;\n    }\n    case \"PERIODIC\": {\n      for (let y = 0; y < newImg.width; y++) {\n        for (let x = 0; x < newImg.height; x++) {\n          // wrap x and y between the correct values\n          const srcx = mod(x - radius, img.width);\n          const srcy = mod(y - radius, img.height);\n\n          // calculate base indexes\n          const srcbasei = (srcy * img.width + srcx) * 4;\n          const destbasei = (y * newImg.width + x) * 4;\n\n          // copy r, g, b, a\n          newImg.data[destbasei + 0] = img.data[srcbasei + 0];\n          newImg.data[destbasei + 1] = img.data[srcbasei + 1];\n          newImg.data[destbasei + 2] = img.data[srcbasei + 2];\n          newImg.data[destbasei + 3] = img.data[srcbasei + 3];\n        }\n      }\n      break;\n    }\n    case \"MIRROR\": {\n      function mirror(x: number, w: number) {\n        if (x < 0) {\n          // extend\n          return Math.min(Math.max(-x, 0), w);\n        } else if (x >= w) {\n          // extend\n          return Math.min(Math.max(2 * w - x, 0), w);\n        } else {\n          return x;\n        }\n      }\n\n      for (let y = 0; y < newImg.width; y++) {\n        for (let x = 0; x < newImg.height; x++) {\n          // wrap x and y between the correct values\n          const srcx = mirror(x - radius, img.width - 1);\n          const srcy = mirror(y - radius, img.height - 1);\n\n          // calculate base indexes\n          const srcbasei = (srcy * img.width + srcx) * 4;\n          const destbasei = (y * newImg.width + x) * 4;\n\n          // copy r, g, b, a\n          newImg.data[destbasei + 0] = img.data[srcbasei + 0];\n          newImg.data[destbasei + 1] = img.data[srcbasei + 1];\n          newImg.data[destbasei + 2] = img.data[srcbasei + 2];\n          newImg.data[destbasei + 3] = img.data[srcbasei + 3];\n        }\n      }\n      break;\n    }\n  }\n\n  return newImg;\n}\n\n// crops the data\nexport function boxBlur(img: ImageData, radius: number) {\n  assert(radius > 0, \"radius must be positive\");\n\n  // radius is the amount we will crop from the image\n\n  // dimensions of the src image\n  const srcxsize = img.width;\n  const srcysize = img.height;\n\n  // dimensions of new image\n  const newxsize = srcxsize - radius * 2;\n  const newysize = srcysize - radius * 2;\n\n  assert(newxsize > 0 && newysize > 0, \"radius is too large\");\n\n  // create new image\n  let newImg = new ImageData(newxsize, newysize);\n\n  // create specific channel sums\n  // each array is the sum of specified channel in the rectangle [0, x] by [0, y]\n  let rSums = new Uint32Array(srcxsize * srcysize);\n  let gSums = new Uint32Array(srcxsize * srcysize);\n  let bSums = new Uint32Array(srcxsize * srcysize);\n  let aSums = new Uint32Array(srcxsize * srcysize);\n\n  // here, we calculate the sum in each of the channels in the horizontal direction\n  for (let y = 0; y < srcysize; y++) {\n    // note we start at 1, not 0\n    for (let x = 1; x < srcxsize; x++) {\n      const srcBaseIdx = (srcysize * y + x) * 4;\n      const destIdx = srcysize * y + x;\n      // add the previous column value to the current column\n      rSums[destIdx] = img.data[srcBaseIdx + 0] + rSums[destIdx-1];\n      gSums[destIdx] = img.data[srcBaseIdx + 1] + gSums[destIdx-1];\n      bSums[destIdx] = img.data[srcBaseIdx + 2] + bSums[destIdx-1];\n      aSums[destIdx] = img.data[srcBaseIdx + 3] + aSums[destIdx-1];\n    }\n  }\n\n  // now, we calculate the sum in each of the channels in the vertical direction\n  for (let x = 0; x < srcxsize; x++) {\n    // note we start at 1, not 0\n    for (let y = 1; y < srcysize; y++) {\n      const destIdx = srcysize * y + x;\n      const srcIdx = srcysize * (y - 1) + x;\n      // add the above row value to the current position\n      rSums[destIdx] += rSums[srcIdx];\n      gSums[destIdx] += gSums[srcIdx];\n      bSums[destIdx] += bSums[srcIdx];\n      aSums[destIdx] += aSums[srcIdx];\n    }\n  }\n\n  // number of pixels in box\n  const pixels = Math.pow(radius * 2, 2);\n\n  // now, we calculate the blur\n  for (let y = 0; y < newysize; y++) {\n    for (let x = 0; x < newxsize; x++) {\n      // see explanation here\n      // https://github.com/francium/fast-blur/blob/master/fast_blur.c\n\n      // get src coords\n      const srcx = x + radius;\n      const srcy = y + radius;\n\n      // calculate indexes\n      const aIdx = (srcx - radius) + srcysize * (srcy - radius);\n      const bIdx = (srcx - radius) + srcysize * (srcy + radius);\n      const cIdx = (srcx + radius) + srcysize * (srcy - radius);\n      const dIdx = (srcx + radius) + srcysize * (srcy + radius);\n\n      // get sums\n      const rSum = rSums[dIdx] - (rSums[bIdx] + rSums[cIdx] - rSums[aIdx]);\n      const gSum = gSums[dIdx] - (gSums[bIdx] + gSums[cIdx] - gSums[aIdx]);\n      const bSum = bSums[dIdx] - (bSums[bIdx] + bSums[cIdx] - bSums[aIdx]);\n      const aSum = aSums[dIdx] - (aSums[bIdx] + aSums[cIdx] - aSums[aIdx]);\n\n      // destIdx\n      const destBaseIdx = (x + y * newysize) * 4;\n      newImg.data[destBaseIdx + 0] = rSum / pixels;\n      newImg.data[destBaseIdx + 1] = gSum / pixels;\n      newImg.data[destBaseIdx + 2] = bSum / pixels;\n      newImg.data[destBaseIdx + 3] = aSum / pixels;\n    }\n  }\n\n  return newImg;\n}\n\nexport function ImageDataFromFn(xsize: number, ysize: number, fn: (x: number, y: number) => number) {\n  let img = new ImageData(xsize, ysize);\n  for (let y = 0; y < img.height; y++) {\n    for (let x = 0; x < img.width; x++) {\n      const color = fn(x, y);\n      const baseIdx = (x + y * ysize) * 4;\n      img.data[baseIdx + 0] = color >> 16;\n      img.data[baseIdx + 1] = (color >> 8) & 0xFF;\n      img.data[baseIdx + 2] = color & 0xFF;\n    }\n  }\n}\n","export default __webpack_public_path__ + \"static/media/Mug_and_Torus_morph.c51dd507.gif\";","export default __webpack_public_path__ + \"static/media/ColorWheel.d590a16e.png\";","import React from \"react\";\nimport * as THREE from 'three';\nimport { TrackballControls } from \"three/examples/jsm/controls/TrackballControls\";\n\n\ntype SingularityDemoProps = {\n  style?: React.CSSProperties,\n  className?: string\n}\n\ntype SingularityDemoState = {}\n\nconst cubeGeometry = new THREE.BoxGeometry(1, 1, 1, 5, 5, 5)\n\nconst cubeMaterials = [\n  new THREE.MeshBasicMaterial({\n    polygonOffset: true,\n    polygonOffsetFactor: 1, // positive value pushes polygon further away\n    polygonOffsetUnits: 1,\n    color: 0x458588,\n  }),\n  new THREE.MeshBasicMaterial({\n    polygonOffset: true,\n    polygonOffsetFactor: 1, // positive value pushes polygon further away\n    polygonOffsetUnits: 1,\n    color: 0xdc3545,\n  }),\n  new THREE.MeshBasicMaterial({\n    polygonOffset: true,\n    polygonOffsetFactor: 1, // positive value pushes polygon further away\n    polygonOffsetUnits: 1,\n    color: 0x98971a,\n  }),\n  new THREE.MeshBasicMaterial({\n    polygonOffset: true,\n    polygonOffsetFactor: 1, // positive value pushes polygon further away\n    polygonOffsetUnits: 1,\n    color: 0xb16286,\n  }),\n  new THREE.MeshBasicMaterial({\n    polygonOffset: true,\n    polygonOffsetFactor: 1, // positive value pushes polygon further away\n    polygonOffsetUnits: 1,\n    color: 0xd79921,\n  }),\n  new THREE.MeshBasicMaterial({\n    polygonOffset: true,\n    polygonOffsetFactor: 1, // positive value pushes polygon further away\n    polygonOffsetUnits: 1,\n    color: 0xEBDBB2,\n  }),\n];\n\n\nclass SingularityDemo extends React.Component<SingularityDemoProps, SingularityDemoState> {\n\n  // this is the ref that three js uses\n  private mount = React.createRef<HTMLDivElement>();\n\n  // this is the ref we use to monitor circularization\n  private range = React.createRef<HTMLInputElement>();\n\n  // we assume these variables are properly initialized\n  private requestID!: number;\n  private controls!: TrackballControls;\n  private scene!: THREE.Scene;\n  private camera!: THREE.OrthographicCamera;\n  private renderer!: THREE.WebGLRenderer;\n  private mesh!: THREE.Mesh;\n\n\n  componentDidMount() {\n    this.sceneSetup();\n    this.addCustomSceneObjects();\n    this.handleCircularityChange();\n    this.startAnimationLoop();\n    window.addEventListener('resize', this.handleWindowResize);\n    this.range.current!.addEventListener('change', this.handleCircularityChange);\n  }\n\n\n  componentWillUnmount() {\n    this.range.current!.removeEventListener('change', this.handleCircularityChange);\n    window.removeEventListener('resize', this.handleWindowResize);\n    window.cancelAnimationFrame(this.requestID!);\n    this.controls!.dispose();\n  }\n\n  // Standard scene setup in Three.js. Check \"Creating a scene\" manual for more information\n  // https://threejs.org/docs/#manual/en/introduction/Creating-a-scene\n  sceneSetup = () => {\n    // get container dimensions and use them for scene sizing\n    const width = this.mount.current!.clientWidth;\n    const height = this.mount.current!.clientHeight;\n\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.OrthographicCamera(\n      -1.5,\n      1.5,\n      1.5,\n      -1.5,\n    );\n\n    this.camera.position.z = 10; // is used here to set some distance from a cube that is located at z = 0\n    // TrackballControls allow a camera to trackball around the object\n    // https://threejs.org/docs/#examples/controls/TrackballControls\n    this.controls = new TrackballControls(this.camera, this.mount.current!);\n\n    this.controls.noPan = true;\n    this.controls.noZoom = true;\n\n    this.renderer = new THREE.WebGLRenderer({ alpha: true }); // alpha true enables transparency\n    this.renderer.setSize(width, height);\n    this.mount.current!.appendChild(this.renderer.domElement); // mount using React ref\n  };\n\n  // Here should come custom code.\n  // Code below is taken from Three.js BoxGeometry example\n  // https://threejs.org/docs/#api/en/geometries/BoxGeometry\n  addCustomSceneObjects = () => {\n    // add ambient light\n    const ambientLight = new THREE.AmbientLight(0xffffff);\n    this.scene.add(ambientLight);\n  };\n\n  handleCircularityChange = () => {\n    // how much to lerp towards circle\n    const alpha = this.range.current!.valueAsNumber;\n\n    // we're going to calculate a new position that's an interpolation\n    const newPosition = new Float32Array(cubeGeometry.attributes.position.count * 3);\n\n    for (let i = 0; i < cubeGeometry.attributes.position.count; i++) {\n      // original x positions\n      const x = cubeGeometry.attributes.position.getX(i);\n      const y = cubeGeometry.attributes.position.getY(i);\n      const z = cubeGeometry.attributes.position.getZ(i);\n\n      const dist = Math.hypot(x, y, z);\n\n      // circular x positions\n      const nx = x / dist;\n      const ny = y / dist;\n      const nz = z / dist;\n\n      // lerp the new values between the circle calculated\n      newPosition[i * 3 + 0] = x + (nx - x) * alpha;\n      newPosition[i * 3 + 1] = y + (ny - y) * alpha;\n      newPosition[i * 3 + 2] = z + (nz - z) * alpha;\n    }\n\n    // set our new geometry\n    let newGeometry = cubeGeometry.clone();\n    newGeometry.setAttribute('position', new THREE.BufferAttribute(newPosition, 3));\n\n    // remove old mesh\n    this.scene.remove(this.mesh);\n\n    // add mesh\n    const mesh = new THREE.Mesh(newGeometry, cubeMaterials);\n    this.scene.add(mesh);\n    this.mesh = mesh;\n\n    // wireframe\n    let geo = new THREE.WireframeGeometry(this.mesh.geometry);\n    let mat = new THREE.LineBasicMaterial({ color: 0x1d2021 });\n    let wireframe = new THREE.LineSegments(geo, mat);\n    mesh.add(wireframe);\n  }\n\n  startAnimationLoop = () => {\n    this.controls.update();\n    this.renderer.render(this.scene, this.camera);\n\n    // The window.requestAnimationFrame() method tells the browser that you wish to perform\n    // an animation and requests that the browser call a specified function\n    // to update an animation before the next repaint\n    this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\n  };\n\n  handleWindowResize = () => {\n    const width = this.mount.current!.clientWidth;\n    const height = this.mount.current!.clientHeight;\n\n    this.controls.handleResize();\n    this.renderer.setSize(width, height);\n  };\n\n  render() {\n    return <div style={this.props.style} className={this.props.className}>\n      <div ref={this.mount} className=\"ratio ratio-1x1 border border-dark\" />\n      <div className=\"mx-auto d-block flex-grow-1 \">\n        <label className=\"form-label\">Circularness</label>\n        <input type=\"range\" className=\"form-range\" min=\"0\" max=\"1\" step=\"0.05\" defaultValue=\"0\" ref={this.range} />\n      </div>\n    </div>;\n  }\n}\n\nexport default SingularityDemo;\n","import React from 'react';\nimport Layout from '../components/Layout';\nimport Section from '../components/Section';\nimport { Async } from 'react-async';\nimport LazyLoad from 'react-lazyload';\nimport { makeNoise2D, makeNoise4D } from 'open-simplex-noise';\n\nimport ScalarMap from '../ScalarMap';\nimport { grayscaleMap } from '../map';\n\nimport ImageDataDisplay from '../components/ImageDataDisplay';\nimport { loadImage, extend, boxBlur } from '../math';\n\nimport MugAndTorusMorphUrl from \"../assets/Mug_and_Torus_morph.gif\";\nimport ColorWheelUrl from \"../assets/ColorWheel.png\";\n\n// demos\nimport SingularityDemo from '../components/SingularityDemo';\n\n\n\ntype FootnoteProps = {\n  index: number,\n  source: string,\n}\nconst Footnote: React.FunctionComponent<FootnoteProps> = props =>\n  <a href={props.source} style={{ textDecoration: \"none\" }}>\n    <sup>[{props.index}]</sup>\n  </a>\n\n\n\nconst noise2D = makeNoise2D(Date.now());\n\ntype AsideCardProps = {\n  title: string,\n}\n\nconst AsideCard: React.FunctionComponent<AsideCardProps> = props =>\n  <div className=\"card mx-5 mb-2\">\n    <div className=\"card-body\">\n      <h6 className=\"card-title text-decoration-underline\">{props.title}</h6>\n      <div className=\"card-text\">{props.children}</div>\n    </div>\n  </div>\n\n\nconst TerrainGeneration = () =>\n  <Layout>\n    <div className=\"container mt-5\">\n      <Section id=\"overview\" name=\"Overview\">\n        <h4>Goals</h4>\n        <p>\n          Our goal in this article will be to procedurally generate and simulate a small game world.\n          There are hundreds of ways to do this, and as we go along, we'll explore some of the different strategies we could have chosen and their tradeoffs.\n        </p>\n        <h4>Rationale</h4>\n        <p>\n          Procedural generation is a versatile tactic in game programming.\n          Games that utilize procedural generation can have much larger maps than those with handcrafted levels, since they can generate content on the fly.\n          (Ex. <a href=\"https://en.wikipedia.org/wiki/Minecraft\">Minecraft</a> and <a href=\"https://en.wikipedia.org/wiki/No_Man%27s_Sky\">No Man's Sky</a>)\n          However, a potential downside is that excessive use of procedural generation makes games feel predictable and repetitive.\n          In order to mitigate this, some games increase the depth of the world by using more elaborate generation systems.\n          Dwarf Fortress, for example, even <a href=\"https://dwarffortresswiki.org/index.php/DF2014:World_generation\">simulates an entire virtual history</a>.\n          In the following sections, we'll discuss some techniques that could be used to procedurally generate content for a hypothetical game.\n        </p>\n        <h4>Key Decisions</h4>\n        <p>\n          In summary, our key techniques are as follows:\n        </p>\n        <ul>\n          <li>Finite (but large) world</li>\n          <li>Square grid as fundamental data structure</li>\n          <li>World level procedural generation done at worldgen time, chunk level procedural generation done at runtime.</li>\n          <li>Donut world (Periodic Boundary Conditions)</li>\n          <li>Detailed biome and weather simulations</li>\n          <li>Hydraulic Erosion (Fjords and River Valleys)</li>\n          <li>Simulating History</li>\n        </ul>\n      </Section>\n      <Section id=\"topology\" name=\"World Topology\">\n        <h4>Topology</h4>\n        <p>\n          Our first (and perhaps biggest) major choice is deciding on the world's <strong>topology</strong>.\n        </p>\n        <AsideCard title=\"Topology\">\n          Topology describes the fundamental geometric properties of an object, especially those properties that don't change as the object is stretched, squished, or otherwise distorted.\n          For example, a coffee mug is topologically equivalent to a donut since the mug, like the donut, has one through hole.\n          <div className=\"mx-auto text-center my-3\">\n            <img src={MugAndTorusMorphUrl} className=\"border border-dark mx-auto d-block\" alt=\"A mug morphing into a torus and back\" />\n            <small>Image in the public domain. <a href=\"https://commons.wikimedia.org/wiki/File:Mug_and_Torus_morph.gif\">Source</a></small>\n          </div>\n          If you're interested, <a href=\"https://en.wikipedia.org/wiki/Topology\">you can read more about topology on Wikipedia</a>.\n        </AsideCard>\n        <p>\n          For our purposes, however, we want to know how the world should be shaped:\n        </p>\n        <ul>\n          <li>Is it 2D or or 3D?</li>\n          <li>Infinite or finite?</li>\n          <li>Flat or Sphere?</li>\n          <li>Boundary Conditions?</li>\n        </ul>\n        <p>\n          We will answer each of these questions in turn.\n        </p>\n        <h4>3D or 2D?</h4>\n        <p>\n          In this article, we'll choose a 3D game since it tends to be easier to adapt a 3d algorithm to a 2d world than the other way around.\n          However, it's important to note: just because our game world is 3D doesn't mean we always need to use a 3D data structure when generating the world.\n          If we guarantee that for each point on our world's surface, the elevation is a well defined number, then we can use a 2d graph or grid to represent the heightmap.\n        </p>\n        <p>\n          Heightmaps won't work if our world isn't vertically simple.\n          {/* TODO Provide example of vertically vs nonvertically simple */}\n          For example, if we want our world to be primarily cave based, with no real \"surface\" to speak of, then a given (x, y) coordinate pair may have multiple surfaces at different z levels.\n          The same problem would apply for a floating island map.\n          A possible workaround would be to use a small number of discrete z levels, each of which uses its own seperate heightmap.\n          This approach is less efficient compared to a single heightmap, but since each per unit heightmap is smaller, it may still be feasible.\n        </p>\n        <h4>Infinite or Finite?</h4>\n        <p>\n          If we don't have any complex build time systems, then we can make our world size effectively infinite, and just generate everything at runtime.\n          This is the approach Minecraft takes.\n          In some ways, this is optimal:\n          The user doesn't have to wait at all for world generation, and we have a lot of flexibility with how large the map should be.\n        </p>\n        <p>\n          However, an infinite world bars us from doing deeper simulations that require knowledge of the game map ahead of time.\n          We can't generate realistic rivers, glaciers, or historical simulations in such a world.\n          For this reason, we'll choose a finite, but reasonably large, size.\n        </p>\n        <h4>Flat or Sphere?</h4>\n        <p>\n          Spherical worlds are more realistic, so if creating an accurate simulation is important, spheres are the way to go.\n          Spherical geometry is also required if you want to be able to render the planet's surface from space.\n        </p>\n        <p>\n          However, spherical geometry is incompatible with voxel tiling over the surface.\n          If we tile over the surface of a sphere with a square grid, we will end up with at least a few <strong>singularities</strong>.\n        </p>\n        <AsideCard title=\"Singularities\">\n          <p>\n            The most common use of the word <strong>singularity</strong> is in reference to the center of a black hole, where gravity is infinitely strong.\n            However, a singularity can refer to any point where a mathematical function is undefined or has a undefined derivative.\n          </p>\n          <SingularityDemo className=\"mx-auto\" style={{ width: \"20em\" }} />\n          <p>\n            The demo above shows a simple way to tile a sphere using squares.\n            In the context of using a square grid to title over a sphere, singularties are points where our regular grid breaks down.\n            Notice how each corner square tile will be missing one diagonal neighbor, resulting in angles near it being highly distorted.\n            So in this case singularities appear at the corners of the cube.\n          </p>\n          <p>\n            In general though, there is no way to tile a sphere using a regular square grid.\n            There will always be tiles with less than the average number of neighboring tiles.\n          </p>\n        </AsideCard>\n        <p>\n          Since dealing with spheres is a needless hassle unless we have a specific use case, we're going to try to use a flat surface without curvature.\n          This will enable us to use a grid when processing the data.\n        </p>\n        <h4>Boundary Conditions?</h4>\n        <p>\n          Now that we've settled on a flat finite surface, we have to decide what should go at the edges.\n          However, we need to do more than just decide the content of the edge grid tiles.\n          Many map operations need to access data from neighboring tiles.\n          So, in order to process the edge tiles, we need to gather data from \"beyond the edge\".\n        </p>\n        <p>\n          A <strong>boundary condition</strong> is a constraint on how we treat operations that go over the edges.\n        </p>\n        <p>\n          We'll use a box blur in order to demonstrate the impacts of boundary conditions.\n        </p>\n\n        <LazyLoad offset={200}>\n          <AsideCard title=\"Blurring And Boundary Conditions\">\n            <Async promise={\n              loadImage(ColorWheelUrl)\n                // we want to be able to change radius\n                .then(x => ({ img: x, radius: 100 }))\n            }>\n              {({ setData }) => <>\n                <Async.Pending>\n                  <div className=\"spinner-border\" role=\"status\" />\n                </Async.Pending>\n                <Async.Fulfilled<{ img: ImageData, radius: number }>>{({ img, radius }) => {\n\n                  const fixedData = extend(img, \"FIXED\", radius)\n                  const mirrorData = extend(img, \"MIRROR\", radius)\n                  const periodicData = extend(img, \"PERIODIC\", radius)\n\n                  const fixedBlur = boxBlur(fixedData, radius);\n                  const mirrorBlur = boxBlur(mirrorData, radius);\n                  const periodicBlur = boxBlur(periodicData, radius);\n\n                  return <div className=\"container\">\n                    <div className=\"mx-auto text-center my-3\" style={{ width: \"20em\" }}>\n                      <p><strong>Source Image</strong></p>\n                      <ImageDataDisplay\n                        style={{ width: \"15em\", height: \"15em\" }}\n                        className=\"border border-dark mx-auto d-block\"\n                        data={img}\n                      />\n                      <small>Image in the public domain.<a href=\"https://commons.wikimedia.org/wiki/File:Eight-colour-wheel-2D.png\">Source</a></small>\n                      <div className=\"mx-auto d-block mt-3\">\n                        <label className=\"form-label\">Blur Radius</label>\n                        <input type=\"range\" className=\"form-range\" min=\"1\" max=\"120\" defaultValue=\"100\"\n                          onChange={e => setData({ radius: e.target.valueAsNumber, img })}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"row\">\n                      <div className=\"col\">\n                        <strong>Fixed Boundary Condition</strong>\n                        <p>After extension:</p>\n                        <ImageDataDisplay\n                          className=\"border border-dark\"\n                          style={{ width: \"15em\", height: \"15em\" }}\n                          data={fixedData}\n                        />\n                        <p>Final Result:</p>\n                        <ImageDataDisplay\n                          className=\"border border-dark\"\n                          style={{ width: \"15em\", height: \"15em\" }}\n                          data={fixedBlur}\n                        />\n                      </div>\n                      <div className=\"col\">\n                        <strong>Mirrored Boundary Condition</strong>\n                        <p>After extension:</p>\n                        <ImageDataDisplay\n                          className=\"border border-dark\"\n                          style={{ width: \"15em\", height: \"15em\" }}\n                          data={mirrorData}\n                        />\n                        <p>Final Result:</p>\n                        <ImageDataDisplay\n                          className=\"border border-dark\"\n                          style={{ width: \"15em\", height: \"15em\" }}\n                          data={mirrorBlur}\n                        />\n                      </div>\n                      <div className=\"col\">\n                        <strong>Periodic Boundary Condition</strong>\n                        <p>After extension:</p>\n                        <ImageDataDisplay\n                          className=\"border border-dark\"\n                          style={{ width: \"15em\", height: \"15em\" }}\n                          data={periodicData}\n                        />\n                        <p>Final Result:</p>\n                        <ImageDataDisplay\n                          className=\"border border-dark\"\n                          style={{ width: \"15em\", height: \"15em\" }}\n                          data={periodicBlur}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                }}\n                </Async.Fulfilled>\n              </>}\n            </Async>\n          </AsideCard>\n        </LazyLoad>\n        <p>Essentially:</p>\n        <ul>\n          <li>Fixed boundary conditions extend the value that was closest to the edge.</li>\n          <li>Mirrored boundary conditions make a mirror the data on the side closest.</li>\n          <li>Periodic boundary conditions take data from the opposite edge of the image.</li>\n        </ul>\n        <p>Note how the choice of the boundary condition makes a huge impact on the final blurred image.</p>\n        <p>\n          All of these boundary conditions are workable for our purposes.\n          We're going to choose a periodic boundary condition though, since it means we don't have to deal with invisible world barriers.\n          This is the same approach taken by a lot of old RPGs.\n        </p>\n      </Section>\n      <Section id=\"terrainGeneration\" name=\"Terrain Generation\">\n        <h4>Noise</h4>\n        <p>\n          Now, we'll move on to actually generating the terrain.\n          In order to do so, we need a source of <strong>coherent noise</strong>.\n        </p>\n        <AsideCard title=\"Coherent Noise\" >\n          <p>If we try to fill a grid with normal noise, using something like <code>Math.random()</code>, this is what we would get:</p>\n          <LazyLoad height={240}>\n            <ImageDataDisplay\n              className=\"border border-dark d-block mx-auto\"\n              data={grayscaleMap(new ScalarMap(240, 240, Math.random))}\n            />\n          </LazyLoad>\n          <p>\n            Since the value at each individual point is not correlated to neighboring points, there's no large scale structure.\n            So, this kind of noise isn't suitable for terrain generation.\n          </p>\n          <p>\n            We need to use an algorithm that's capable of generating noise such that points that are close together spatially have similar values.\n            To do this, we'll need our noise to accept x and y coordinates.\n            {/* TODO explain more */}\n          </p>\n          <p>This is an example of coherent noise:</p>\n          <LazyLoad height={240}>\n            <ImageDataDisplay\n              className=\"border border-dark d-block mx-auto\"\n              data={grayscaleMap(new ScalarMap(240, 240, (x, y) => noise2D(x / 10, y / 10) / 2 + 0.5))}\n            />\n          </LazyLoad>\n          <p>\n            You can see that every pixel has a neighboring pixel that is similarly colored.\n          </p>\n          <p>There are several algorithms capable of generating coherent noise:</p>\n          <ul>\n            <li><a href=\"https://en.wikipedia.org/wiki/Diamond-square_algorithm\">Diamond Square Algorithm</a></li>\n            <li><a href=\"https://en.wikipedia.org/wiki/Perlin_noise\">Perlin Noise</a></li>\n            <li><a href=\"https://en.wikipedia.org/wiki/Simplex_noise\">Simplex Noise</a></li>\n            <li><a href=\"https://en.wikipedia.org/wiki/OpenSimplex_noise\">OpenSimplex Noise</a></li>\n          </ul>\n          <p>We'll be using OpenSimplex since it's open source and provides good performance.</p>\n        </AsideCard>\n      </Section>\n    </div>\n\n  </Layout >\n\n\nexport default TerrainGeneration;\n","import Layout from '../components/Layout';\nimport Section from '../components/Section';\n\nimport ResumePath from '../assets/govind_pimpale_resume.pdf';\n\nconst Resume = () =>\n  <Layout>\n    <div className=\"container mt-5\">\n      <Section id=\"resume\" name=\"Resume\">\n        <iframe title=\"resume\" src={ResumePath} style={{ width: \"100%\", aspectRatio: \"0.9\" }} />\n      </Section>\n    </div>\n  </Layout>\n\n\nexport default Resume;\n","import { Link } from 'react-router-dom';\n\nfunction Error() {\n  return (\n    <div style={{\n      display: \"flex\",\n      height: \"100vh\",\n      width: \"100vw\"\n    }}>\n      <div className=\"my-auto mx-auto text-center\">\n        <h1>404 Error.</h1>\n        <h5>Page Not Found</h5>\n        <Link to=\"/\">Return Home</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default Error\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}\n","import { BrowserRouter, Route, Switch } from 'react-router-dom';\n\nimport Home from './pages/Home';\nimport Achernar from './pages/Achernar';\nimport TerrainGeneration from './pages/TerrainGeneration';\nimport Resume from './pages/Resume';\nimport Error from './pages/Error';\nimport ScrollToTop from \"./components/ScrollToTop\";\n\n// Bootstrap CSS & JS\nimport './styles/style.scss';\nimport 'bootstrap/dist/js/bootstrap';\n\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <ScrollToTop />\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/achernar\" exact component={Achernar} />\n        <Route path=\"/terraingeneration\" exact component={TerrainGeneration} />\n        <Route path=\"/resume\" exact component={Resume} />\n        <Route path=\"/\" component={Error} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}